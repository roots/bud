/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-bud",
factory: function (require) {
var plugin=(()=>{var Ui=Object.create,ge=Object.defineProperty;var Ut=Object.getOwnPropertyDescriptor;var Hi=Object.getOwnPropertyNames,Ht=Object.getOwnPropertySymbols,Yi=Object.getPrototypeOf,Yt=Object.prototype.hasOwnProperty,Ki=Object.prototype.propertyIsEnumerable;var Kt=(e,t,r)=>t in e?ge(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,J=(e,t)=>{for(var r in t||(t={}))Yt.call(t,r)&&Kt(e,r,t[r]);if(Ht)for(var r of Ht(t))Ki.call(t,r)&&Kt(e,r,t[r]);return e};var Xi=e=>ge(e,"__esModule",{value:!0});var b=e=>{if(typeof require!="undefined")return require(e);throw new Error('Dynamic require of "'+e+'" is not supported')};var g=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),zi=(e,t)=>{for(var r in t)ge(e,r,{get:t[r],enumerable:!0})},Vi=(e,t,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Hi(t))!Yt.call(e,n)&&n!=="default"&&ge(e,n,{get:()=>t[n],enumerable:!(r=Ut(t,n))||r.enumerable});return e},j=e=>Vi(Xi(ge(e!=null?Ui(Yi(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),Z=(e,t,r,n)=>{for(var i=n>1?void 0:n?Ut(t,r):t,o=e.length-1,s;o>=0;o--)(s=e[o])&&(i=(n?s(t,r,i):s(i))||i);return n&&i&&ge(t,r,i),i};var Qt=g((fu,Vt)=>{var Qi="Expected a function",Xt=0/0,Zi="[object Symbol]",eo=/^\s+|\s+$/g,to=/^[-+]0x[0-9a-f]+$/i,ro=/^0b[01]+$/i,no=/^0o[0-7]+$/i,io=parseInt,oo=typeof global=="object"&&global&&global.Object===Object&&global,so=typeof self=="object"&&self&&self.Object===Object&&self,ao=oo||so||Function("return this")(),co=Object.prototype,uo=co.toString,lo=Math.max,fo=Math.min,bt=function(){return ao.Date.now()};function mo(e,t,r){var n,i,o,s,a,u,p=0,c=!1,l=!1,m=!0;if(typeof e!="function")throw new TypeError(Qi);t=zt(t)||0,wt(r)&&(c=!!r.leading,l="maxWait"in r,o=l?lo(zt(r.maxWait)||0,t):o,m="trailing"in r?!!r.trailing:m);function f(h){var T=n,d=i;return n=i=void 0,p=h,s=e.apply(d,T),s}function y(h){return p=h,a=setTimeout(k,t),c?f(h):s}function x(h){var T=h-u,d=h-p,S=t-T;return l?fo(S,o-d):S}function v(h){var T=h-u,d=h-p;return u===void 0||T>=t||T<0||l&&d>=o}function k(){var h=bt();if(v(h))return O(h);a=setTimeout(k,x(h))}function O(h){return a=void 0,m&&n?f(h):(n=i=void 0,s)}function ee(){a!==void 0&&clearTimeout(a),p=0,n=u=i=a=void 0}function re(){return a===void 0?s:O(bt())}function Q(){var h=bt(),T=v(h);if(n=arguments,i=this,u=h,T){if(a===void 0)return y(u);if(l)return a=setTimeout(k,t),f(u)}return a===void 0&&(a=setTimeout(k,t)),s}return Q.cancel=ee,Q.flush=re,Q}function wt(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function po(e){return!!e&&typeof e=="object"}function yo(e){return typeof e=="symbol"||po(e)&&uo.call(e)==Zi}function zt(e){if(typeof e=="number")return e;if(yo(e))return Xt;if(wt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=wt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(eo,"");var r=ro.test(e);return r||no.test(e)?io(e.slice(2),r?2:8):to.test(e)?Xt:+e}Vt.exports=mo});var nr=g((mu,rr)=>{var Zt="Expected a function",er=0/0,ho="[object Symbol]",go=/^\s+|\s+$/g,bo=/^[-+]0x[0-9a-f]+$/i,wo=/^0b[01]+$/i,vo=/^0o[0-7]+$/i,So=parseInt,xo=typeof global=="object"&&global&&global.Object===Object&&global,Eo=typeof self=="object"&&self&&self.Object===Object&&self,ko=xo||Eo||Function("return this")(),Co=Object.prototype,_o=Co.toString,Oo=Math.max,jo=Math.min,vt=function(){return ko.Date.now()};function Fo(e,t,r){var n,i,o,s,a,u,p=0,c=!1,l=!1,m=!0;if(typeof e!="function")throw new TypeError(Zt);t=tr(t)||0,ze(r)&&(c=!!r.leading,l="maxWait"in r,o=l?Oo(tr(r.maxWait)||0,t):o,m="trailing"in r?!!r.trailing:m);function f(h){var T=n,d=i;return n=i=void 0,p=h,s=e.apply(d,T),s}function y(h){return p=h,a=setTimeout(k,t),c?f(h):s}function x(h){var T=h-u,d=h-p,S=t-T;return l?jo(S,o-d):S}function v(h){var T=h-u,d=h-p;return u===void 0||T>=t||T<0||l&&d>=o}function k(){var h=vt();if(v(h))return O(h);a=setTimeout(k,x(h))}function O(h){return a=void 0,m&&n?f(h):(n=i=void 0,s)}function ee(){a!==void 0&&clearTimeout(a),p=0,n=u=i=a=void 0}function re(){return a===void 0?s:O(vt())}function Q(){var h=vt(),T=v(h);if(n=arguments,i=this,u=h,T){if(a===void 0)return y(u);if(l)return a=setTimeout(k,t),f(u)}return a===void 0&&(a=setTimeout(k,t)),s}return Q.cancel=ee,Q.flush=re,Q}function To(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(Zt);return ze(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Fo(e,t,{leading:n,maxWait:t,trailing:i})}function ze(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Po(e){return!!e&&typeof e=="object"}function qo(e){return typeof e=="symbol"||Po(e)&&_o.call(e)==ho}function tr(e){if(typeof e=="number")return e;if(qo(e))return er;if(ze(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ze(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(go,"");var r=wo.test(e);return r||vo.test(e)?So(e.slice(2),r?2:8):bo.test(e)?er:+e}rr.exports=To});var cr=g((du,ar)=>{var $o="Expected a function",ir=1/0,No=17976931348623157e292,or=0/0,Io="[object Symbol]",Do=/^\s+|\s+$/g,Ro=/^[-+]0x[0-9a-f]+$/i,Mo=/^0b[01]+$/i,Lo=/^0o[0-7]+$/i,Ao=parseInt,Wo=Object.prototype,Bo=Wo.toString;function Jo(e,t){var r;if(typeof t!="function")throw new TypeError($o);return e=Ko(e),function(){return--e>0&&(r=t.apply(this,arguments)),e<=1&&(t=void 0),r}}function Go(e){return Jo(2,e)}function sr(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Uo(e){return!!e&&typeof e=="object"}function Ho(e){return typeof e=="symbol"||Uo(e)&&Bo.call(e)==Io}function Yo(e){if(!e)return e===0?e:0;if(e=Xo(e),e===ir||e===-ir){var t=e<0?-1:1;return t*No}return e===e?e:0}function Ko(e){var t=Yo(e),r=t%1;return t===t?r?t-r:t:0}function Xo(e){if(typeof e=="number")return e;if(Ho(e))return or;if(sr(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=sr(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Do,"");var r=Mo.test(e);return r||Lo.test(e)?Ao(e.slice(2),r?2:8):Ro.test(e)?or:+e}ar.exports=Go});var gr=g((pu,hr)=>{var zo="Expected a function",ur="__lodash_hash_undefined__",Vo="[object Function]",Qo="[object GeneratorFunction]",Zo=/[\\^$.*+?()[\]{}|]/g,es=/^\[object .+?Constructor\]$/,ts=typeof global=="object"&&global&&global.Object===Object&&global,rs=typeof self=="object"&&self&&self.Object===Object&&self,lr=ts||rs||Function("return this")();function ns(e,t){return e==null?void 0:e[t]}function is(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch(r){}return t}var os=Array.prototype,ss=Function.prototype,fr=Object.prototype,St=lr["__core-js_shared__"],mr=function(){var e=/[^.]+$/.exec(St&&St.keys&&St.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),dr=ss.toString,xt=fr.hasOwnProperty,as=fr.toString,cs=RegExp("^"+dr.call(xt).replace(Zo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),us=os.splice,ls=pr(lr,"Map"),Le=pr(Object,"create");function fe(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function fs(){this.__data__=Le?Le(null):{}}function ms(e){return this.has(e)&&delete this.__data__[e]}function ds(e){var t=this.__data__;if(Le){var r=t[e];return r===ur?void 0:r}return xt.call(t,e)?t[e]:void 0}function ps(e){var t=this.__data__;return Le?t[e]!==void 0:xt.call(t,e)}function ys(e,t){var r=this.__data__;return r[e]=Le&&t===void 0?ur:t,this}fe.prototype.clear=fs;fe.prototype.delete=ms;fe.prototype.get=ds;fe.prototype.has=ps;fe.prototype.set=ys;function be(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function hs(){this.__data__=[]}function gs(e){var t=this.__data__,r=Ve(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():us.call(t,r,1),!0}function bs(e){var t=this.__data__,r=Ve(t,e);return r<0?void 0:t[r][1]}function ws(e){return Ve(this.__data__,e)>-1}function vs(e,t){var r=this.__data__,n=Ve(r,e);return n<0?r.push([e,t]):r[n][1]=t,this}be.prototype.clear=hs;be.prototype.delete=gs;be.prototype.get=bs;be.prototype.has=ws;be.prototype.set=vs;function me(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ss(){this.__data__={hash:new fe,map:new(ls||be),string:new fe}}function xs(e){return Qe(this,e).delete(e)}function Es(e){return Qe(this,e).get(e)}function ks(e){return Qe(this,e).has(e)}function Cs(e,t){return Qe(this,e).set(e,t),this}me.prototype.clear=Ss;me.prototype.delete=xs;me.prototype.get=Es;me.prototype.has=ks;me.prototype.set=Cs;function Ve(e,t){for(var r=e.length;r--;)if(Ts(e[r][0],t))return r;return-1}function _s(e){if(!yr(e)||js(e))return!1;var t=Ps(e)||is(e)?cs:es;return t.test(Fs(e))}function Qe(e,t){var r=e.__data__;return Os(t)?r[typeof t=="string"?"string":"hash"]:r.map}function pr(e,t){var r=ns(e,t);return _s(r)?r:void 0}function Os(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function js(e){return!!mr&&mr in e}function Fs(e){if(e!=null){try{return dr.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Et(e,t){if(typeof e!="function"||t&&typeof t!="function")throw new TypeError(zo);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(Et.Cache||me),r}Et.Cache=me;function Ts(e,t){return e===t||e!==e&&t!==t}function Ps(e){var t=yr(e)?as.call(e):"";return t==Vo||t==Qo}function yr(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}hr.exports=Et});var kt=g(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});function qs(e,t,r){let n=r.value;return r.value=function(...i){let o=performance.now(),s=n.apply(this,i),a=performance.now();return console.log(`Call to ${t} took ${(a-o).toFixed(2)} milliseconds.`),s},r}function $s(e=0){return function(t,r,n){let i=n.value;return n.value=function(...o){setTimeout(()=>{i.apply(this,o)},e)},n}}var Ns=Qt();function Is(e=0,t={}){return function(r,n,i){let o=new WeakMap,s=i.value;return i.value=function(...a){let u=o.get(this);u||(u=Ns(s,e,t).bind(this),o.set(this,u)),u(...a)},i}}var Ds=nr();function Rs(e=0,t={}){return function(r,n,i){let o=i.value;return i.value=Ds(o,e,t),i}}var Ms=cr();function Ls(e,t,r){let n=r.value;return r.value=Ms(n),r}function As(e){return function(t){e.forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(n=>{t.prototype[n]=r.prototype[n]})})}}var Ws=gr();function Bs(e){return function(t,r,n){return n.value=Ws(n.value,e),n}}function Js(e,t,r){let n=r.value;if(typeof n!="function")throw new Error(`@autobind decorator can only be applied to methods not: ${typeof n}`);let i=!1;return{configurable:!0,get(){if(i||this===e.prototype||this.hasOwnProperty(t)||typeof n!="function")return n;let o=n.bind(this);return i=!0,Object.defineProperty(this,t,{configurable:!0,get(){return o},set(s){n=s,delete this[t]}}),i=!1,o},set(o){n=o}}}var br=(e,t)=>e<t?-1:e>t?1:0;function Gs(e,t={isDescending:!0,type:"string"}){let r=Symbol();return function(n,i,o){Object.defineProperty(n,i,{set:function(a){if(!a||!Array.isArray(a))throw`Value of property ${i} is not a valid array!`;let u=t.type==="date";e?this[r]=a.sort(function(p,c){let l=u?new Date(p[e]):p[e],m=u?new Date(c[e]):c[e],f=br(l,m);return t.isDescending?f*-1:f}):this[r]=a.sort(function(p,c){let l=u?new Date(p):p,m=u?new Date(c):c,f=br(l,m);return t.isDescending?f*-1:f})},get:function(){return this[r]}})}}X.Mixin=As;X.SortBy=Gs;X.bind=Js;X.debounce=Is;X.delay=$s;X.measure=qs;X.memo=Bs;X.once=Ls;X.throttle=Rs});var xr=g((vu,Sr)=>{Sr.exports={name:"bud.js",description:"\u26A1\uFE0F Lightning fast frontend build tools combining the best parts of Symfony Encore and Laravel Mix",logo:"https://cdn.roots.io/app/uploads/logo-bud.svg",card:"https://bud.js.org/img/bud.js.png",url:{discourse:"https://discourse.roots.io/c/bud/24",docs:"https://bud.js.org",git:"git@github.com:roots/bud",web:"https://github.com/roots/bud"},organization:{name:"Roots Software Foundation LLC",site:"https://roots.io",twitter:"https://twitter.com/rootswp",favicon:"https://roots.io/favicon.ico"},contributors:{kellymears:{type:["\u{1F680} steward","\u{1F4BB} dev","\u{1F4D5} docs"]},qwp6t:{type:["\u{1F680} steward","\u{1F4BB} dev","\u{1F4D5} docs"]},retlehs:{type:["\u{1F680} steward","\u{1F4D5} docs"]},swalkinshaw:{type:["\u{1F680} steward","\u{1F4BB} dev","\u{1F4D5} docs"]},joshuafredrickson:{type:["\u{1F4BB} dev","\u{1F4D5} docs"]},alwaysblank:{type:["\u{1F680} steward","\u{1F4D5} docs"]},alexdanylyschyn:{type:["\u{1F4BB} dev"]},clayrisser:{type:["\u{1F4D5} docs"]},catgofire:{type:["\u{1F4D5} docs"]},unlocdavid:{type:["\u{1F4D5} docs"]},robrecord:{type:["\u{1F4D5} docs"]}},sponsors:[{image:"https://cdn.roots.io/app/uploads/km-digital.svg",title:"KM Digital",url:"https://k-m.com/"},{image:"https://cdn.roots.io/app/uploads/carrot.svg",title:"Carrot",url:"https://carrot.com/"},{image:"https://cdn.roots.io/app/uploads/c21redwood.svg",title:"C21 Redwood Realty",url:"https://www.c21redwood.com/"},{image:"https://cdn.roots.io/app/uploads/wordpress.svg",title:"WordPress.com",url:"https://wordpress.com/"},{image:"https://cdn.roots.io/app/uploads/pantheon.svg",title:"Pantheon",url:"https://pantheon.io/"}],packages:{core:["@roots/bud","@roots/bud-api","@roots/bud-build","@roots/bud-cache","@roots/bud-compiler","@roots/bud-dashboard","@roots/bud-extensions","@roots/bud-framework","@roots/bud-hooks","@roots/bud-server"],extension:["@roots/bud-babel","@roots/bud-compress","@roots/bud-criticalcss","@roots/bud-emotion","@roots/bud-entrypoints","@roots/bud-esbuild","@roots/bud-eslint","@roots/bud-imagemin","@roots/bud-mdx","@roots/bud-postcss","@roots/bud-preset-recommend","@roots/bud-preset-wordpress","@roots/bud-prettier","@roots/bud-purgecss","@roots/bud-react","@roots/bud-sass","@roots/bud-solid","@roots/bud-stylelint","@roots/bud-swc","@roots/bud-tailwindcss","@roots/bud-terser","@roots/bud-typescript","@roots/bud-vue","@roots/bud-wordpress-dependencies","@roots/bud-wordpress-externals","@roots/bud-wordpress-manifests","@roots/sage"],library:["@roots/browserslist-config","@roots/bud-client","@roots/container","@roots/critical-css-webpack-plugin","@roots/dependencies","@roots/entrypoints-webpack-plugin","@roots/eslint-config","@roots/filesystem","@roots/merged-manifest-webpack-plugin","@roots/wordpress-dependencies-webpack-plugin","@roots/wordpress-externals-webpack-plugin","@roots/wordpress-hmr"]}}});var U=g(_t=>{"use strict";_t.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{e.call(this,...t,(i,o)=>i!=null?n(i):r(o))})},"name",{value:e.name})};_t.fromPromise=function(e){return Object.defineProperty(function(...t){let r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);e.apply(this,t.slice(0,-1)).then(n=>r(null,n),r)},"name",{value:e.name})}});var Or=g((Au,_r)=>{var oe=b("constants"),Ys=process.cwd,et=null,Ks=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return et||(et=Ys.call(process)),et};try{process.cwd()}catch(e){}typeof process.chdir=="function"&&(Ot=process.chdir,process.chdir=function(e){et=null,Ot.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Ot));var Ot;_r.exports=Xs;function Xs(e){oe.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=s(e.chownSync),e.fchownSync=s(e.fchownSync),e.lchownSync=s(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.lchmod||(e.lchmod=function(c,l,m){m&&process.nextTick(m)},e.lchmodSync=function(){}),e.lchown||(e.lchown=function(c,l,m,f){f&&process.nextTick(f)},e.lchownSync=function(){}),Ks==="win32"&&(e.rename=function(c){return function(l,m,f){var y=Date.now(),x=0;c(l,m,function v(k){if(k&&(k.code==="EACCES"||k.code==="EPERM")&&Date.now()-y<6e4){setTimeout(function(){e.stat(m,function(O,ee){O&&O.code==="ENOENT"?c(l,m,v):f(k)})},x),x<100&&(x+=10);return}f&&f(k)})}}(e.rename)),e.read=function(c){function l(m,f,y,x,v,k){var O;if(k&&typeof k=="function"){var ee=0;O=function(re,Q,h){if(re&&re.code==="EAGAIN"&&ee<10)return ee++,c.call(e,m,f,y,x,v,O);k.apply(this,arguments)}}return c.call(e,m,f,y,x,v,O)}return Object.setPrototypeOf&&Object.setPrototypeOf(l,c),l}(e.read),e.readSync=function(c){return function(l,m,f,y,x){for(var v=0;;)try{return c.call(e,l,m,f,y,x)}catch(k){if(k.code==="EAGAIN"&&v<10){v++;continue}throw k}}}(e.readSync);function t(c){c.lchmod=function(l,m,f){c.open(l,oe.O_WRONLY|oe.O_SYMLINK,m,function(y,x){if(y){f&&f(y);return}c.fchmod(x,m,function(v){c.close(x,function(k){f&&f(v||k)})})})},c.lchmodSync=function(l,m){var f=c.openSync(l,oe.O_WRONLY|oe.O_SYMLINK,m),y=!0,x;try{x=c.fchmodSync(f,m),y=!1}finally{if(y)try{c.closeSync(f)}catch(v){}else c.closeSync(f)}return x}}function r(c){oe.hasOwnProperty("O_SYMLINK")?(c.lutimes=function(l,m,f,y){c.open(l,oe.O_SYMLINK,function(x,v){if(x){y&&y(x);return}c.futimes(v,m,f,function(k){c.close(v,function(O){y&&y(k||O)})})})},c.lutimesSync=function(l,m,f){var y=c.openSync(l,oe.O_SYMLINK),x,v=!0;try{x=c.futimesSync(y,m,f),v=!1}finally{if(v)try{c.closeSync(y)}catch(k){}else c.closeSync(y)}return x}):(c.lutimes=function(l,m,f,y){y&&process.nextTick(y)},c.lutimesSync=function(){})}function n(c){return c&&function(l,m,f){return c.call(e,l,m,function(y){p(y)&&(y=null),f&&f.apply(this,arguments)})}}function i(c){return c&&function(l,m){try{return c.call(e,l,m)}catch(f){if(!p(f))throw f}}}function o(c){return c&&function(l,m,f,y){return c.call(e,l,m,f,function(x){p(x)&&(x=null),y&&y.apply(this,arguments)})}}function s(c){return c&&function(l,m,f){try{return c.call(e,l,m,f)}catch(y){if(!p(y))throw y}}}function a(c){return c&&function(l,m,f){typeof m=="function"&&(f=m,m=null);function y(x,v){v&&(v.uid<0&&(v.uid+=4294967296),v.gid<0&&(v.gid+=4294967296)),f&&f.apply(this,arguments)}return m?c.call(e,l,m,y):c.call(e,l,y)}}function u(c){return c&&function(l,m){var f=m?c.call(e,l,m):c.call(e,l);return f&&(f.uid<0&&(f.uid+=4294967296),f.gid<0&&(f.gid+=4294967296)),f}}function p(c){if(!c||c.code==="ENOSYS")return!0;var l=!process.getuid||process.getuid()!==0;return!!(l&&(c.code==="EINVAL"||c.code==="EPERM"))}}});var Tr=g((Wu,Fr)=>{var jr=b("stream").Stream;Fr.exports=zs;function zs(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);jr.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var s=Object.keys(i),a=0,u=s.length;a<u;a++){var p=s[a];this[p]=i[p]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=Infinity;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(c,l){if(c){o.emit("error",c),o.readable=!1;return}o.fd=l,o.emit("open",l),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);jr.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var u=o[s];this[u]=i[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var qr=g((Bu,Pr)=>{"use strict";Pr.exports=Qs;var Vs=Object.getPrototypeOf||function(e){return e.__proto__};function Qs(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:Vs(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var W=g((Ju,Tt)=>{var F=b("fs"),Zs=Or(),ea=Tr(),ta=qr(),tt=b("util"),R,rt;typeof Symbol=="function"&&typeof Symbol.for=="function"?(R=Symbol.for("graceful-fs.queue"),rt=Symbol.for("graceful-fs.previous")):(R="___graceful-fs.queue",rt="___graceful-fs.previous");function ra(){}function $r(e,t){Object.defineProperty(e,R,{get:function(){return t}})}var de=ra;tt.debuglog?de=tt.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(de=function(){var e=tt.format.apply(tt,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});F[R]||(Nr=global[R]||[],$r(F,Nr),F.close=function(e){function t(r,n){return e.call(F,r,function(i){i||Ir(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,rt,{value:e}),t}(F.close),F.closeSync=function(e){function t(r){e.apply(F,arguments),Ir()}return Object.defineProperty(t,rt,{value:e}),t}(F.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){de(F[R]),b("assert").equal(F[R].length,0)}));var Nr;global[R]||$r(global,F[R]);Tt.exports=jt(ta(F));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!F.__patched&&(Tt.exports=jt(F),F.__patched=!0);function jt(e){Zs(e),e.gracefulify=jt,e.createReadStream=re,e.createWriteStream=Q;var t=e.readFile;e.readFile=r;function r(d,S,E){return typeof S=="function"&&(E=S,S=null),N(d,S,E);function N(I,D,P,A){return t(I,D,function(_){_&&(_.code==="EMFILE"||_.code==="ENFILE")?ke([N,[I,D,P],_,A||Date.now(),Date.now()]):typeof P=="function"&&P.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(d,S,E,N){return typeof E=="function"&&(N=E,E=null),I(d,S,E,N);function I(D,P,A,_,K){return n(D,P,A,function(q){q&&(q.code==="EMFILE"||q.code==="ENFILE")?ke([I,[D,P,A,_],q,K||Date.now(),Date.now()]):typeof _=="function"&&_.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=s);function s(d,S,E,N){return typeof E=="function"&&(N=E,E=null),I(d,S,E,N);function I(D,P,A,_,K){return o(D,P,A,function(q){q&&(q.code==="EMFILE"||q.code==="ENFILE")?ke([I,[D,P,A,_],q,K||Date.now(),Date.now()]):typeof _=="function"&&_.apply(this,arguments)})}}var a=e.copyFile;a&&(e.copyFile=u);function u(d,S,E,N){return typeof E=="function"&&(N=E,E=0),I(d,S,E,N);function I(D,P,A,_,K){return a(D,P,A,function(q){q&&(q.code==="EMFILE"||q.code==="ENFILE")?ke([I,[D,P,A,_],q,K||Date.now(),Date.now()]):typeof _=="function"&&_.apply(this,arguments)})}}var p=e.readdir;e.readdir=c;function c(d,S,E){return typeof S=="function"&&(E=S,S=null),N(d,S,E);function N(I,D,P,A){return p(I,D,function(_,K){_&&(_.code==="EMFILE"||_.code==="ENFILE")?ke([N,[I,D,P],_,A||Date.now(),Date.now()]):(K&&K.sort&&K.sort(),typeof P=="function"&&P.call(this,_,K))})}}if(process.version.substr(0,4)==="v0.8"){var l=ea(e);v=l.ReadStream,O=l.WriteStream}var m=e.ReadStream;m&&(v.prototype=Object.create(m.prototype),v.prototype.open=k);var f=e.WriteStream;f&&(O.prototype=Object.create(f.prototype),O.prototype.open=ee),Object.defineProperty(e,"ReadStream",{get:function(){return v},set:function(d){v=d},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return O},set:function(d){O=d},enumerable:!0,configurable:!0});var y=v;Object.defineProperty(e,"FileReadStream",{get:function(){return y},set:function(d){y=d},enumerable:!0,configurable:!0});var x=O;Object.defineProperty(e,"FileWriteStream",{get:function(){return x},set:function(d){x=d},enumerable:!0,configurable:!0});function v(d,S){return this instanceof v?(m.apply(this,arguments),this):v.apply(Object.create(v.prototype),arguments)}function k(){var d=this;T(d.path,d.flags,d.mode,function(S,E){S?(d.autoClose&&d.destroy(),d.emit("error",S)):(d.fd=E,d.emit("open",E),d.read())})}function O(d,S){return this instanceof O?(f.apply(this,arguments),this):O.apply(Object.create(O.prototype),arguments)}function ee(){var d=this;T(d.path,d.flags,d.mode,function(S,E){S?(d.destroy(),d.emit("error",S)):(d.fd=E,d.emit("open",E))})}function re(d,S){return new e.ReadStream(d,S)}function Q(d,S){return new e.WriteStream(d,S)}var h=e.open;e.open=T;function T(d,S,E,N){return typeof E=="function"&&(N=E,E=null),I(d,S,E,N);function I(D,P,A,_,K){return h(D,P,A,function(q,uu){q&&(q.code==="EMFILE"||q.code==="ENFILE")?ke([I,[D,P,A,_],q,K||Date.now(),Date.now()]):typeof _=="function"&&_.apply(this,arguments)})}}return e}function ke(e){de("ENQUEUE",e[0].name,e[1]),F[R].push(e),Ft()}var nt;function Ir(){for(var e=Date.now(),t=0;t<F[R].length;++t)F[R][t].length>2&&(F[R][t][3]=e,F[R][t][4]=e);Ft()}function Ft(){if(clearTimeout(nt),nt=void 0,F[R].length!==0){var e=F[R].shift(),t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(i===void 0)de("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){de("TIMEOUT",t.name,r);var s=r.pop();typeof s=="function"&&s.call(null,n)}else{var a=Date.now()-o,u=Math.max(o-i,1),p=Math.min(u*1.2,100);a>=p?(de("RETRY",t.name,r),t.apply(null,r.concat([i]))):F[R].push(e)}nt===void 0&&(nt=setTimeout(Ft,0))}}});var pe=g(se=>{"use strict";var Dr=U().fromCallback,H=W(),na=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof H[e]=="function");Object.assign(se,H);na.forEach(e=>{se[e]=Dr(H[e])});se.exists=function(e,t){return typeof t=="function"?H.exists(e,t):new Promise(r=>H.exists(e,r))};se.read=function(e,t,r,n,i,o){return typeof o=="function"?H.read(e,t,r,n,i,o):new Promise((s,a)=>{H.read(e,t,r,n,i,(u,p,c)=>{if(u)return a(u);s({bytesRead:p,buffer:c})})})};se.write=function(e,t,...r){return typeof r[r.length-1]=="function"?H.write(e,t,...r):new Promise((n,i)=>{H.write(e,t,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffer:a})})})};typeof H.writev=="function"&&(se.writev=function(e,t,...r){return typeof r[r.length-1]=="function"?H.writev(e,t,...r):new Promise((n,i)=>{H.writev(e,t,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffers:a})})})});typeof H.realpath.native=="function"?se.realpath.native=Dr(H.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var Mr=g((Uu,Rr)=>{"use strict";var ia=b("path");Rr.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(ia.parse(t).root,""))){let n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}}});var Br=g((Hu,Pt)=>{"use strict";var Lr=pe(),{checkPath:Ar}=Mr(),Wr=e=>{let t={mode:511};return typeof e=="number"?e:J(J({},t),e).mode};Pt.exports.makeDir=async(e,t)=>(Ar(e),Lr.mkdir(e,{mode:Wr(t),recursive:!0}));Pt.exports.makeDirSync=(e,t)=>(Ar(e),Lr.mkdirSync(e,{mode:Wr(t),recursive:!0}))});var z=g((Yu,Jr)=>{"use strict";var oa=U().fromPromise,{makeDir:sa,makeDirSync:qt}=Br(),$t=oa(sa);Jr.exports={mkdirs:$t,mkdirsSync:qt,mkdirp:$t,mkdirpSync:qt,ensureDir:$t,ensureDirSync:qt}});var ae=g((Ku,Ur)=>{"use strict";var aa=U().fromPromise,Gr=pe();function ca(e){return Gr.access(e).then(()=>!0).catch(()=>!1)}Ur.exports={pathExists:aa(ca),pathExistsSync:Gr.existsSync}});var Nt=g((Xu,Hr)=>{"use strict";var Ce=W();function ua(e,t,r,n){Ce.open(e,"r+",(i,o)=>{if(i)return n(i);Ce.futimes(o,t,r,s=>{Ce.close(o,a=>{n&&n(s||a)})})})}function la(e,t,r){let n=Ce.openSync(e,"r+");return Ce.futimesSync(n,t,r),Ce.closeSync(n)}Hr.exports={utimesMillis:ua,utimesMillisSync:la}});var ye=g((zu,Xr)=>{"use strict";var _e=pe(),$=b("path"),fa=b("util");function ma(e,t,r){let n=r.dereference?i=>_e.stat(i,{bigint:!0}):i=>_e.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function da(e,t,r){let n,i=r.dereference?s=>_e.statSync(s,{bigint:!0}):s=>_e.lstatSync(s,{bigint:!0}),o=i(e);try{n=i(t)}catch(s){if(s.code==="ENOENT")return{srcStat:o,destStat:null};throw s}return{srcStat:o,destStat:n}}function pa(e,t,r,n,i){fa.callbackify(ma)(e,t,n,(o,s)=>{if(o)return i(o);let{srcStat:a,destStat:u}=s;if(u){if(We(a,u)){let p=$.basename(e),c=$.basename(t);return r==="move"&&p!==c&&p.toLowerCase()===c.toLowerCase()?i(null,{srcStat:a,destStat:u,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!u.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!a.isDirectory()&&u.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return a.isDirectory()&&It(e,t)?i(new Error(it(e,t,r))):i(null,{srcStat:a,destStat:u})})}function ya(e,t,r,n){let{srcStat:i,destStat:o}=da(e,t,n);if(o){if(We(i,o)){let s=$.basename(e),a=$.basename(t);if(r==="move"&&s!==a&&s.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&It(e,t))throw new Error(it(e,t,r));return{srcStat:i,destStat:o}}function Yr(e,t,r,n,i){let o=$.resolve($.dirname(e)),s=$.resolve($.dirname(r));if(s===o||s===$.parse(s).root)return i();_e.stat(s,{bigint:!0},(a,u)=>a?a.code==="ENOENT"?i():i(a):We(t,u)?i(new Error(it(e,r,n))):Yr(e,t,s,n,i))}function Kr(e,t,r,n){let i=$.resolve($.dirname(e)),o=$.resolve($.dirname(r));if(o===i||o===$.parse(o).root)return;let s;try{s=_e.statSync(o,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(We(t,s))throw new Error(it(e,r,n));return Kr(e,t,o,n)}function We(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function It(e,t){let r=$.resolve(e).split($.sep).filter(i=>i),n=$.resolve(t).split($.sep).filter(i=>i);return r.reduce((i,o,s)=>i&&n[s]===o,!0)}function it(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}Xr.exports={checkPaths:pa,checkPathsSync:ya,checkParentPaths:Yr,checkParentPathsSync:Kr,isSrcSubdir:It,areIdentical:We}});var nn=g((Vu,rn)=>{"use strict";var Y=W(),Be=b("path"),ha=z().mkdirs,ga=ae().pathExists,ba=Nt().utimesMillis,Je=ye();function wa(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),Je.checkPaths(e,t,"copy",r,(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:a}=o;Je.checkParentPaths(e,s,t,"copy",u=>u?n(u):r.filter?Vr(zr,a,e,t,r,n):zr(a,e,t,r,n))})}function zr(e,t,r,n,i){let o=Be.dirname(r);ga(o,(s,a)=>{if(s)return i(s);if(a)return ot(e,t,r,n,i);ha(o,u=>u?i(u):ot(e,t,r,n,i))})}function Vr(e,t,r,n,i,o){Promise.resolve(i.filter(r,n)).then(s=>s?e(t,r,n,i,o):o(),s=>o(s))}function va(e,t,r,n,i){return n.filter?Vr(ot,e,t,r,n,i):ot(e,t,r,n,i)}function ot(e,t,r,n,i){(n.dereference?Y.stat:Y.lstat)(t,(s,a)=>s?i(s):a.isDirectory()?Oa(a,e,t,r,n,i):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?Sa(a,e,t,r,n,i):a.isSymbolicLink()?Ta(e,t,r,n,i):a.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):a.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`)))}function Sa(e,t,r,n,i,o){return t?xa(e,r,n,i,o):Qr(e,r,n,i,o)}function xa(e,t,r,n,i){if(n.overwrite)Y.unlink(r,o=>o?i(o):Qr(e,t,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function Qr(e,t,r,n,i){Y.copyFile(t,r,o=>o?i(o):n.preserveTimestamps?Ea(e.mode,t,r,i):st(r,e.mode,i))}function Ea(e,t,r,n){return ka(e)?Ca(r,e,i=>i?n(i):Zr(e,t,r,n)):Zr(e,t,r,n)}function ka(e){return(e&128)==0}function Ca(e,t,r){return st(e,t|128,r)}function Zr(e,t,r,n){_a(t,r,i=>i?n(i):st(r,e,n))}function st(e,t,r){return Y.chmod(e,t,r)}function _a(e,t,r){Y.stat(e,(n,i)=>n?r(n):ba(t,i.atime,i.mtime,r))}function Oa(e,t,r,n,i,o){return t?en(r,n,i,o):ja(e.mode,r,n,i,o)}function ja(e,t,r,n,i){Y.mkdir(r,o=>{if(o)return i(o);en(t,r,n,s=>s?i(s):st(r,e,i))})}function en(e,t,r,n){Y.readdir(e,(i,o)=>i?n(i):tn(o,e,t,r,n))}function tn(e,t,r,n,i){let o=e.pop();return o?Fa(e,o,t,r,n,i):i()}function Fa(e,t,r,n,i,o){let s=Be.join(r,t),a=Be.join(n,t);Je.checkPaths(s,a,"copy",i,(u,p)=>{if(u)return o(u);let{destStat:c}=p;va(c,s,a,i,l=>l?o(l):tn(e,r,n,i,o))})}function Ta(e,t,r,n,i){Y.readlink(t,(o,s)=>{if(o)return i(o);if(n.dereference&&(s=Be.resolve(process.cwd(),s)),e)Y.readlink(r,(a,u)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?Y.symlink(s,r,i):i(a):(n.dereference&&(u=Be.resolve(process.cwd(),u)),Je.isSrcSubdir(s,u)?i(new Error(`Cannot copy '${s}' to a subdirectory of itself, '${u}'.`)):e.isDirectory()&&Je.isSrcSubdir(u,s)?i(new Error(`Cannot overwrite '${u}' with '${s}'.`)):Pa(s,r,i)));else return Y.symlink(s,r,i)})}function Pa(e,t,r){Y.unlink(t,n=>n?r(n):Y.symlink(e,t,r))}rn.exports=wa});var un=g((Qu,cn)=>{"use strict";var L=W(),Ge=b("path"),qa=z().mkdirsSync,$a=Nt().utimesMillisSync,Ue=ye();function Na(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=Ue.checkPathsSync(e,t,"copy",r);return Ue.checkParentPathsSync(e,n,t,"copy"),Ia(i,e,t,r)}function Ia(e,t,r,n){if(n.filter&&!n.filter(t,r))return;let i=Ge.dirname(r);return L.existsSync(i)||qa(i),on(e,t,r,n)}function Da(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return on(e,t,r,n)}function on(e,t,r,n){let o=(n.dereference?L.statSync:L.lstatSync)(t);if(o.isDirectory())return Ja(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Ra(o,e,t,r,n);if(o.isSymbolicLink())return Ha(e,t,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function Ra(e,t,r,n,i){return t?Ma(e,r,n,i):sn(e,r,n,i)}function Ma(e,t,r,n){if(n.overwrite)return L.unlinkSync(r),sn(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function sn(e,t,r,n){return L.copyFileSync(t,r),n.preserveTimestamps&&La(e.mode,t,r),Dt(r,e.mode)}function La(e,t,r){return Aa(e)&&Wa(r,e),Ba(t,r)}function Aa(e){return(e&128)==0}function Wa(e,t){return Dt(e,t|128)}function Dt(e,t){return L.chmodSync(e,t)}function Ba(e,t){let r=L.statSync(e);return $a(t,r.atime,r.mtime)}function Ja(e,t,r,n,i){return t?an(r,n,i):Ga(e.mode,r,n,i)}function Ga(e,t,r,n){return L.mkdirSync(r),an(t,r,n),Dt(r,e)}function an(e,t,r){L.readdirSync(e).forEach(n=>Ua(n,e,t,r))}function Ua(e,t,r,n){let i=Ge.join(t,e),o=Ge.join(r,e),{destStat:s}=Ue.checkPathsSync(i,o,"copy",n);return Da(s,i,o,n)}function Ha(e,t,r,n){let i=L.readlinkSync(t);if(n.dereference&&(i=Ge.resolve(process.cwd(),i)),e){let o;try{o=L.readlinkSync(r)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return L.symlinkSync(i,r);throw s}if(n.dereference&&(o=Ge.resolve(process.cwd(),o)),Ue.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(L.statSync(r).isDirectory()&&Ue.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return Ya(i,r)}else return L.symlinkSync(i,r)}function Ya(e,t){return L.unlinkSync(t),L.symlinkSync(e,t)}cn.exports=Na});var at=g((Zu,ln)=>{"use strict";var Ka=U().fromCallback;ln.exports={copy:Ka(nn()),copySync:un()}});var wn=g((el,bn)=>{"use strict";var fn=W(),mn=b("path"),C=b("assert"),He=process.platform==="win32";function dn(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||fn[r],r=r+"Sync",e[r]=e[r]||fn[r]}),e.maxBusyTries=e.maxBusyTries||3}function Rt(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),C(e,"rimraf: missing path"),C.strictEqual(typeof e,"string","rimraf: path should be a string"),C.strictEqual(typeof r,"function","rimraf: callback function required"),C(t,"rimraf: invalid options argument provided"),C.strictEqual(typeof t,"object","rimraf: options should be object"),dn(t),pn(e,t,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&n<t.maxBusyTries){n++;let s=n*100;return setTimeout(()=>pn(e,t,i),s)}o.code==="ENOENT"&&(o=null)}r(o)})}function pn(e,t,r){C(e),C(t),C(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&He)return yn(e,t,n,r);if(i&&i.isDirectory())return ct(e,t,n,r);t.unlink(e,o=>{if(o){if(o.code==="ENOENT")return r(null);if(o.code==="EPERM")return He?yn(e,t,o,r):ct(e,t,o,r);if(o.code==="EISDIR")return ct(e,t,o,r)}return r(o)})})}function yn(e,t,r,n){C(e),C(t),C(typeof n=="function"),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(o,s)=>{o?n(o.code==="ENOENT"?null:r):s.isDirectory()?ct(e,t,r,n):t.unlink(e,n)})})}function hn(e,t,r){let n;C(e),C(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?ut(e,t,r):t.unlinkSync(e)}function ct(e,t,r,n){C(e),C(t),C(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?Xa(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function Xa(e,t,r){C(e),C(t),C(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let o=i.length,s;if(o===0)return t.rmdir(e,r);i.forEach(a=>{Rt(mn.join(e,a),t,u=>{if(!s){if(u)return r(s=u);--o==0&&t.rmdir(e,r)}})})})}function gn(e,t){let r;t=t||{},dn(t),C(e,"rimraf: missing path"),C.strictEqual(typeof e,"string","rimraf: path should be a string"),C(t,"rimraf: missing options"),C.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&He&&hn(e,t,n)}try{r&&r.isDirectory()?ut(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return He?hn(e,t,n):ut(e,t,n);if(n.code!=="EISDIR")throw n;ut(e,t,n)}}function ut(e,t,r){C(e),C(t);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")za(e,t);else if(n.code!=="ENOENT")throw n}}function za(e,t){if(C(e),C(t),t.readdirSync(e).forEach(r=>gn(mn.join(e,r),t)),He){let r=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}bn.exports=Rt;Rt.sync=gn});var Ye=g((tl,Sn)=>{"use strict";var lt=W(),Va=U().fromCallback,vn=wn();function Qa(e,t){if(lt.rm)return lt.rm(e,{recursive:!0,force:!0},t);vn(e,t)}function Za(e){if(lt.rmSync)return lt.rmSync(e,{recursive:!0,force:!0});vn.sync(e)}Sn.exports={remove:Va(Qa),removeSync:Za}});var Fn=g((rl,jn)=>{"use strict";var ec=U().fromPromise,xn=pe(),En=b("path"),kn=z(),Cn=Ye(),_n=ec(async function(t){let r;try{r=await xn.readdir(t)}catch{return kn.mkdirs(t)}return Promise.all(r.map(n=>Cn.remove(En.join(t,n))))});function On(e){let t;try{t=xn.readdirSync(e)}catch{return kn.mkdirsSync(e)}t.forEach(r=>{r=En.join(e,r),Cn.removeSync(r)})}jn.exports={emptyDirSync:On,emptydirSync:On,emptyDir:_n,emptydir:_n}});var $n=g((nl,qn)=>{"use strict";var tc=U().fromCallback,Tn=b("path"),ce=W(),Pn=z();function rc(e,t){function r(){ce.writeFile(e,"",n=>{if(n)return t(n);t()})}ce.stat(e,(n,i)=>{if(!n&&i.isFile())return t();let o=Tn.dirname(e);ce.stat(o,(s,a)=>{if(s)return s.code==="ENOENT"?Pn.mkdirs(o,u=>{if(u)return t(u);r()}):t(s);a.isDirectory()?r():ce.readdir(o,u=>{if(u)return t(u)})})})}function nc(e){let t;try{t=ce.statSync(e)}catch{}if(t&&t.isFile())return;let r=Tn.dirname(e);try{ce.statSync(r).isDirectory()||ce.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")Pn.mkdirsSync(r);else throw n}ce.writeFileSync(e,"")}qn.exports={createFile:tc(rc),createFileSync:nc}});var Mn=g((il,Rn)=>{"use strict";var ic=U().fromCallback,Nn=b("path"),ue=W(),In=z(),oc=ae().pathExists,{areIdentical:Dn}=ye();function sc(e,t,r){function n(i,o){ue.link(i,o,s=>{if(s)return r(s);r(null)})}ue.lstat(t,(i,o)=>{ue.lstat(e,(s,a)=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),r(s);if(o&&Dn(a,o))return r(null);let u=Nn.dirname(t);oc(u,(p,c)=>{if(p)return r(p);if(c)return n(e,t);In.mkdirs(u,l=>{if(l)return r(l);n(e,t)})})})})}function ac(e,t){let r;try{r=ue.lstatSync(t)}catch{}try{let o=ue.lstatSync(e);if(r&&Dn(o,r))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=Nn.dirname(t);return ue.existsSync(n)||In.mkdirsSync(n),ue.linkSync(e,t)}Rn.exports={createLink:ic(sc),createLinkSync:ac}});var An=g((ol,Ln)=>{"use strict";var le=b("path"),Ke=W(),cc=ae().pathExists;function uc(e,t,r){if(le.isAbsolute(e))return Ke.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{let n=le.dirname(t),i=le.join(n,e);return cc(i,(o,s)=>o?r(o):s?r(null,{toCwd:i,toDst:e}):Ke.lstat(e,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:e,toDst:le.relative(n,e)})))}}function lc(e,t){let r;if(le.isAbsolute(e)){if(r=Ke.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=le.dirname(t),i=le.join(n,e);if(r=Ke.existsSync(i),r)return{toCwd:i,toDst:e};if(r=Ke.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:le.relative(n,e)}}}Ln.exports={symlinkPaths:uc,symlinkPathsSync:lc}});var Jn=g((sl,Bn)=>{"use strict";var Wn=W();function fc(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);Wn.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function mc(e,t){let r;if(t)return t;try{r=Wn.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}Bn.exports={symlinkType:fc,symlinkTypeSync:mc}});var Vn=g((al,zn)=>{"use strict";var dc=U().fromCallback,Gn=b("path"),V=pe(),Un=z(),pc=Un.mkdirs,yc=Un.mkdirsSync,Hn=An(),hc=Hn.symlinkPaths,gc=Hn.symlinkPathsSync,Yn=Jn(),bc=Yn.symlinkType,wc=Yn.symlinkTypeSync,vc=ae().pathExists,{areIdentical:Kn}=ye();function Sc(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,V.lstat(t,(i,o)=>{!i&&o.isSymbolicLink()?Promise.all([V.stat(e),V.stat(t)]).then(([s,a])=>{if(Kn(s,a))return n(null);Xn(e,t,r,n)}):Xn(e,t,r,n)})}function Xn(e,t,r,n){hc(e,t,(i,o)=>{if(i)return n(i);e=o.toDst,bc(o.toCwd,r,(s,a)=>{if(s)return n(s);let u=Gn.dirname(t);vc(u,(p,c)=>{if(p)return n(p);if(c)return V.symlink(e,t,a,n);pc(u,l=>{if(l)return n(l);V.symlink(e,t,a,n)})})})})}function xc(e,t,r){let n;try{n=V.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){let a=V.statSync(e),u=V.statSync(t);if(Kn(a,u))return}let i=gc(e,t);e=i.toDst,r=wc(i.toCwd,r);let o=Gn.dirname(t);return V.existsSync(o)||yc(o),V.symlinkSync(e,t,r)}zn.exports={createSymlink:dc(Sc),createSymlinkSync:xc}});var oi=g((cl,ii)=>{"use strict";var{createFile:Qn,createFileSync:Zn}=$n(),{createLink:ei,createLinkSync:ti}=Mn(),{createSymlink:ri,createSymlinkSync:ni}=Vn();ii.exports={createFile:Qn,createFileSync:Zn,ensureFile:Qn,ensureFileSync:Zn,createLink:ei,createLinkSync:ti,ensureLink:ei,ensureLinkSync:ti,createSymlink:ri,createSymlinkSync:ni,ensureSymlink:ri,ensureSymlinkSync:ni}});var ft=g((ul,si)=>{function Ec(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let o=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+o}function kc(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}si.exports={stringify:Ec,stripBom:kc}});var li=g((ll,ui)=>{var Oe;try{Oe=W()}catch(e){Oe=b("fs")}var mt=U(),{stringify:ai,stripBom:ci}=ft();async function Cc(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||Oe,n="throws"in t?t.throws:!0,i=await mt.fromCallback(r.readFile)(e,t);i=ci(i);let o;try{o=JSON.parse(i,t?t.reviver:null)}catch(s){if(n)throw s.message=`${e}: ${s.message}`,s;return null}return o}var _c=mt.fromPromise(Cc);function Oc(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||Oe,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=ci(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function jc(e,t,r={}){let n=r.fs||Oe,i=ai(t,r);await mt.fromCallback(n.writeFile)(e,i,r)}var Fc=mt.fromPromise(jc);function Tc(e,t,r={}){let n=r.fs||Oe,i=ai(t,r);return n.writeFileSync(e,i,r)}var Pc={readFile:_c,readFileSync:Oc,writeFile:Fc,writeFileSync:Tc};ui.exports=Pc});var mi=g((fl,fi)=>{"use strict";var dt=li();fi.exports={readJson:dt.readFile,readJsonSync:dt.readFileSync,writeJson:dt.writeFile,writeJsonSync:dt.writeFileSync}});var pt=g((ml,yi)=>{"use strict";var qc=U().fromCallback,Xe=W(),di=b("path"),pi=z(),$c=ae().pathExists;function Nc(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");let i=di.dirname(e);$c(i,(o,s)=>{if(o)return n(o);if(s)return Xe.writeFile(e,t,r,n);pi.mkdirs(i,a=>{if(a)return n(a);Xe.writeFile(e,t,r,n)})})}function Ic(e,...t){let r=di.dirname(e);if(Xe.existsSync(r))return Xe.writeFileSync(e,...t);pi.mkdirsSync(r),Xe.writeFileSync(e,...t)}yi.exports={outputFile:qc(Nc),outputFileSync:Ic}});var gi=g((dl,hi)=>{"use strict";var{stringify:Dc}=ft(),{outputFile:Rc}=pt();async function Mc(e,t,r={}){let n=Dc(t,r);await Rc(e,n,r)}hi.exports=Mc});var wi=g((pl,bi)=>{"use strict";var{stringify:Lc}=ft(),{outputFileSync:Ac}=pt();function Wc(e,t,r){let n=Lc(t,r);Ac(e,n,r)}bi.exports=Wc});var Si=g((yl,vi)=>{"use strict";var Bc=U().fromPromise,B=mi();B.outputJson=Bc(gi());B.outputJsonSync=wi();B.outputJSON=B.outputJson;B.outputJSONSync=B.outputJsonSync;B.writeJSON=B.writeJson;B.writeJSONSync=B.writeJsonSync;B.readJSON=B.readJson;B.readJSONSync=B.readJsonSync;vi.exports=B});var _i=g((hl,Ci)=>{"use strict";var Jc=W(),Mt=b("path"),Gc=at().copy,xi=Ye().remove,Uc=z().mkdirp,Hc=ae().pathExists,Ei=ye();function Yc(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r||{};let i=r.overwrite||r.clobber||!1;Ei.checkPaths(e,t,"move",r,(o,s)=>{if(o)return n(o);let{srcStat:a,isChangingCase:u=!1}=s;Ei.checkParentPaths(e,a,t,"move",p=>{if(p)return n(p);if(Kc(t))return ki(e,t,i,u,n);Uc(Mt.dirname(t),c=>c?n(c):ki(e,t,i,u,n))})})}function Kc(e){let t=Mt.dirname(e);return Mt.parse(t).root===t}function ki(e,t,r,n,i){if(n)return Lt(e,t,r,i);if(r)return xi(t,o=>o?i(o):Lt(e,t,r,i));Hc(t,(o,s)=>o?i(o):s?i(new Error("dest already exists.")):Lt(e,t,r,i))}function Lt(e,t,r,n){Jc.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):Xc(e,t,r,n):n())}function Xc(e,t,r,n){Gc(e,t,{overwrite:r,errorOnExist:!0},o=>o?n(o):xi(e,n))}Ci.exports=Yc});var Pi=g((gl,Ti)=>{"use strict";var Oi=W(),At=b("path"),zc=at().copySync,ji=Ye().removeSync,Vc=z().mkdirpSync,Fi=ye();function Qc(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=Fi.checkPathsSync(e,t,"move",r);return Fi.checkParentPathsSync(e,i,t,"move"),Zc(t)||Vc(At.dirname(t)),eu(e,t,n,o)}function Zc(e){let t=At.dirname(e);return At.parse(t).root===t}function eu(e,t,r,n){if(n)return Wt(e,t,r);if(r)return ji(t),Wt(e,t,r);if(Oi.existsSync(t))throw new Error("dest already exists.");return Wt(e,t,r)}function Wt(e,t,r){try{Oi.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return tu(e,t,r)}}function tu(e,t,r){return zc(e,t,{overwrite:r,errorOnExist:!0}),ji(e)}Ti.exports=Qc});var $i=g((bl,qi)=>{"use strict";var ru=U().fromCallback;qi.exports={move:ru(_i()),moveSync:Pi()}});var yt=g((wl,Ni)=>{"use strict";Ni.exports=J(J(J(J(J(J(J(J(J(J({},pe()),at()),Fn()),oi()),Si()),z()),$i()),pt()),ae()),Ye())});var cu={};zi(cu,{default:()=>au});var wr=j(b("@yarnpkg/cli")),we=j(b("@yarnpkg/core")),vr=j(b("@yarnpkg/shell")),ne=j(kt()),w=class extends wr.BaseCommand{async getManifest(){return await we.Manifest.tryFind(this.context.cwd)}async getConfiguration(){return await we.Configuration.find(this.context.cwd,this.context.plugins)}async getProject(){let t=await this.getConfiguration(),{project:r}=await we.Project.find(t,this.context.cwd);return r}withPassthrough(t){return this.passthrough.length?this.passthrough.reduce((r,n)=>n?`${r} ${n}`:`${r}`,t):t}log(t){var n;let r=(n=this.name)!=null?n:"@bud";process.stdout.write(`[${r}] ${t}
`)}err(t){var n;let r=(n=this.name)!=null?n:"@bud";process.stderr.write(`[${r}] ${typeof t=="string"?t:t.message}
`),process.exit(1)}async $(...t){let r=await this.getProject();await Promise.all(t.map(async n=>{if(!!n){this.log(n);try{let i=await(0,vr.execute)(n,[],{cwd:r.cwd});if(i!==0)throw new Error(`${n} failed with code ${i}`)}catch(i){this.err(i)}}}))}};Z([ne.bind],w.prototype,"getManifest",1),Z([ne.bind],w.prototype,"getConfiguration",1),Z([ne.bind],w.prototype,"getProject",1),Z([ne.bind],w.prototype,"withPassthrough",1),Z([ne.bind],w.prototype,"log",1),Z([ne.bind],w.prototype,"err",1),Z([ne.bind],w.prototype,"$",1);var Ae=class extends w{async execute(){process.stdout.write(`    
 _               _
| |__  _   _  __| |
|  _ \\| | | |/ _  |
| |_) | |_| | (_| |
|_.__/ \\__._|\\__._|
`),Object.values(Ze).filter(t=>t.usage).forEach(t=>{var r;(r=t.usage.examples)==null||r.forEach(([n,i])=>{process.stdout.write(`
[34m${i}[0m  ${n}
`)})})}};Ae.label="@bud",Ae.paths=[["@bud"]];var Er=j(b("module")),ie=j(b("path")),te={},G=((te==null?void 0:te.url)&&typeof te.url!="undefined"?te.url.replace("file:/",""):__dirname).split("sources/").shift(),Su=(0,ie.join)(G,"package.json"),xu=(0,ie.join)(G,"storage");var Eu=(0,ie.join)(G,"config","tsconfig.json");var M={root:G,config:(0,ie.join)(G,"config"),sources:(0,ie.join)(G,"sources"),tests:(0,ie.join)(G,"tests"),mocks:(0,ie.join)(G,"./storage/mocks")},kr;typeof(te==null?void 0:te.url)!="undefined"?kr=(0,Er.createRequire)(te.url)("../../../config/monorepo.config.cjs"):kr=xr();var ve=class extends w{async execute(){try{await this.$("rm -rf **/.budfiles"),await this.$("rm -rf **/node_modules/*"),await this.$(`rm -rf ${M.sources}/@roots/*/lib/*`),await this.$(`rm -rf ${M.sources}/@roots/*/types/*`)}catch(t){}try{await this.$("rm -rf storage/packages/@roots/*"),await this.$("rm -rf storage/packages/npm/*"),await this.$("rm -rf storage/mocks/*")}catch(t){}}};ve.label="@bud clean",ve.paths=[["@bud","clean"]],ve.usage={category:"@bud",description:"clean project artifacts",examples:[["clean project artifacts","yarn @bud clean"]]};var Cr=j(b("clipanion")),Ct=j(b("path"));var Us=(0,Ct.join)(M.config,"tsconfig.json"),Hs=(0,Ct.join)(M.sources,"@repo/compile-kit/src/cjs"),Se=class extends w{constructor(){super(...arguments);this.package=Cr.Option.String("package to transpile","all")}async execute(){await this.$(`yarn ts-node --project ${Us} ${Hs} ${this.package}`)}};Se.label="@bud compile",Se.paths=[["@bud","compile"]],Se.usage={category:"@bud",description:"compile a package",details:"compiles package with vercel/ncc",examples:[["compile {package name}","yarn @bud compile @roots/bud-react"]]};var Iu=`${G}/sources/@repo/compile-kit/src/cjs @roots/bud-support`,xe=class extends w{async execute(){await this.$("yarn @bud tsc"),await this.$("yarn @bud tsc --watch","yarn @bud test unit --verbose --watch","yarn @bud docs dev")}};xe.label="@bud dev",xe.paths=[["@bud","dev"]],xe.usage={category:"@bud",description:"develop project code",examples:[["run tsc, docusaurus & jest in watch mode","yarn @bud dev"]]};var Ee=class extends w{async execute(){await this.$("yarn workspace @repo/docs docusaurus start")}};Ee.label="@bud docs dev",Ee.paths=[["@bud","docs","dev"]],Ee.usage={category:"@bud",description:"develop docs",examples:[["develop docs","yarn @bud docs dev"]]};var ht=j(b("clipanion")),Ii=j(yt());var je=class extends w{constructor(){super(...arguments);this.api=ht.Option.Boolean("-a,--api",!1,{description:"build api docs"});this.site=ht.Option.Boolean("-s,--site",!1,{description:"build site files"});this.readme=ht.Option.Boolean("-r,--readme",!1,{description:"build readme files"})}async execute(){let t=!this.site&&!this.readme&&!this.api;(t||this.api)&&await this.$("typedoc           --out ./sources/@repo/docs/content/dev/api           --tsconfig ./config/tsconfig.json           --entryPoints             ./sources/@roots/bud-framework/src/index.ts             ./sources/@roots/bud-framework/src/extension/index.ts             ./sources/@roots/bud-framework/src/methods/index.ts             ./sources/@roots/bud-framework/src/services/index.ts             ./sources/@roots/bud/src/index.ts             ./sources/@roots/bud/src/cli/index.ts             ./sources/@roots/bud-api/src/index.ts             ./sources/@roots/bud-build/src/index.ts             ./sources/@roots/bud-compiler/src/index.ts             ./sources/@roots/bud-hooks/src/index.ts             ./sources/@roots/bud-server/src/index.ts             ./sources/@roots/bud/src/index.ts             ./sources/@roots/sage/src/index.ts             ./sources/@roots/container/src/index.ts"),(t||this.site)&&(await this.$(`yarn node ${M.sources}/@repo/markdown-kit/compiled/cli-examples/index.js`),await this.$("yarn workspace @repo/docs run build"),await(0,Ii.copy)(`${M.sources}/@repo/docs/content/dev/api`,`${M.sources}/@repo/docs/build/dev/api`,{overwrite:!0})),(t||this.readme)&&await this.$(`yarn node ${M.sources}/@repo/markdown-kit/compiled/readme/index.js`)}};je.label="@bud docs",je.paths=[["@bud","docs"]],je.usage={category:"@bud",description:"build docs and readme.",examples:[["build all","yarn @bud docs"],["build api documentation","yarn @bud docs --api"],["build api documentation and site files","yarn @bud docs --site"],["build readme files","yarn @bud docs --readme"]]};var Di=j(b("clipanion"));var Fe=class extends w{constructor(){super(...arguments);this.fix=Di.Option.Boolean("-f,--fix",!0,{description:"fix"})}async execute(){await this.$(`yarn prettier ./sources/@roots/*/src/**/* ${this.fix?"--write":"--check"} --config ./config/prettier.config.cjs --ignore-unknown --no-error-on-unmatched-pattern`)}};Fe.label="@bud format",Fe.paths=[["@bud","format"]],Fe.usage={category:"@bud",description:"Run coding style linters",examples:[["run prettier","yarn @bud format"],["run prettier (no fix)","yarn @bud format --no-fix"]]};var Ri=j(b("clipanion"));var Te=class extends w{constructor(){super(...arguments);this.passthrough=Ri.Option.Proxy({name:"eslint options"})}async execute(){await this.$(this.withPassthrough('yarn eslint "./sources/@roots/*/src/**/*" --config ./config/eslint.config.cjs --ignore-path config/.eslintignore --no-error-on-unmatched-pattern'))}};Te.label="@bud lint",Te.paths=[["@bud","lint"]],Te.usage={category:"@bud",description:"run eslint",examples:[["run eslint","yarn @bud lint"]]};var Pe=class extends w{async execute(){await this.$("yarn syncpack list-mismatches --config ./config/syncpack.config.cjs")}};Pe.label="@bud lint dependencies",Pe.paths=[["@bud","lint","dependencies"]],Pe.usage={category:"@bud",description:"ensure packages are synced",examples:[["lint dependency versions","yarn @bud lint dependencies"]]};var qe=class extends w{async execute(){await this.$("yarn workspaces foreach --no-private exec yarn run package-check")}};qe.label="@bud lint exports",qe.paths=[["@bud","lint","exports"]],qe.usage={category:"@bud",description:"lint published package module exports",examples:[["lint package.json module exports","yarn @bud lint exports"]]};var Bt=j(b("@yarnpkg/shell")),gt=j(yt()),Mi=j(kt());var he=class extends w{async execute(){try{await(0,gt.ensureFile)(`${process.cwd()}/storage/yarn.lock`)}catch(t){}await(0,Bt.execute)("npm",["install","--location=global","pm2","verdaccio"],{cwd:`${process.cwd()}/storage`}),await(0,Bt.execute)("pm2",["start","verdaccio","--","--config=./config/verdaccio/config.yaml"]);try{await(0,gt.remove)(`${process.cwd()}/storage`)}catch(t){}}};he.label="@bud preinstall",he.paths=[["@bud","preinstall"]],he.usage={category:"@bud",description:"Preinstallation script for repo development",details:`
# Pre-installation

This script will install the required dependencies for the repo to work.
It will also start the verdaccio server with pm2.

## Notes

This command will install the following packages globally:
  - pm2
  - verdaccio

You can stop the verdaccio server with the pm2 cli:
\`pm2 stop verdaccio\`
    `,examples:[["run preinstallation script","yarn @bud preinstall"]]},Z([Mi.bind],he.prototype,"execute",1);var Jt=j(b("clipanion")),$e=j(yt()),Li=j(b("semver"));var Ne=class extends w{constructor(){super(...arguments);this.version=Jt.Option.String("-v,--version",null,{description:"version"});this.tag=Jt.Option.String("-t,--tag",null,{description:"tag"})}isTaggedLatest(){return this.tag==="latest"}async execute(){await this.executeStep("preflight"),await this.executeStep("bump"),await this.executeStep("make"),await this.executeStep("publish")}async executeStep(t){try{if(!this[t])throw new Error(`${t} is not implemented`);await this[`${t}`]()}catch(r){this.err(`${t} failed: ${r.message}
`),this.err(r.stack),process.exit(1)}}async checkTagIsValid(){if(!this.tag){let[t]=(0,Li.parse)(this.version).prerelease;this.tag=`${t!=null?t:"latest"}`}if(this.tag!=="latest"&&this.tag!=="next")throw new Error(`--tag [${this.tag}] must be 'latest' or 'next'`)}async wipeProxyDb(){try{this.log("Wiping previously published packages");let t=await(0,$e.readJson)(`${G}/storage/.verdaccio-db.json`);t.list=[],await(0,$e.writeJson)(`${G}/storage/.verdaccio-db.json`,t),await(0,$e.emptyDir)(`${G}/storage/packages/@roots`)}catch(t){this.log("db/previously published packages could not be wiped.")}}async preflight(){await this.wipeProxyDb(),this.log("Installing"),await this.$("yarn install --immutable"),await this.checkTagIsValid()}async bump(){this.version&&await this.$(`yarn @bud version ${this.version}`)}async make(){await this.$("yarn @bud build")}async publish(){await this.$(`yarn workspaces foreach --no-private npm publish --access public --tag ${this.tag}`)}};Ne.label="@bud release",Ne.paths=[["@bud","release"]],Ne.usage={category:"@bud",description:"Do a release.",examples:[["Bump packages to x.y.z and publish","yarn @bud release --version x.y.z --tag latest"]]};var Ai=j(b("clipanion"));var nu="--config ./config/jest.config.js",Ie=class extends w{constructor(){super(...arguments);this.passthrough=Ai.Option.Proxy({name:"jest params"})}async execute(){return await this.$(this.withPassthrough(`yarn node --experimental-vm-modules $(yarn bin jest) ${nu}`))}};Ie.label="@bud test",Ie.paths=[["@bud","test"]],Ie.usage={category:"@bud",description:"run tests",examples:[["run unit tests","yarn @bud test unit"],["run integration tests","yarn @bud test integration"]]};var Wi=j(b("clipanion")),Bi=j(b("path"));var De=class extends w{constructor(){super(...arguments);this.tsconfig=(0,Bi.join)(M.config,"tsconfig.json");this.passthrough=Wi.Option.Proxy({name:"tsc options"})}async execute(){await this.$(this.withPassthrough(`yarn tsc -b ${this.tsconfig}`))}};De.label="@bud tsc",De.paths=[["@bud","tsc"],["@bud","build"]],De.usage={category:"@bud",description:"Run the typescript compiler",examples:[["run the typescript compiler","yarn @bud tsc"],["run the typescript compiler in watch mode","yarn @bud tsc --watch"],["run the typescript compiler with forced rebuild (no incremental compilation)","yarn @bud tsc --force"]]};var Ji=j(b("clipanion")),Gt=j(b("path"));var iu=(0,Gt.join)(M.config,"tsconfig.json"),ou=(0,Gt.join)(M.sources,"@repo/compile-kit/src/vendor/index.ts"),Re=class extends w{constructor(){super(...arguments);this.request=Ji.Option.Rest()}async execute(){await this.$(`yarn ts-node-esm --project ${iu} ${ou} ${this.request}`)}};Re.label="@bud vendor",Re.paths=[["@bud","vendor"]],Re.usage={category:"@bud",description:"vendor a package"};var Gi=j(b("clipanion"));var Me=class extends w{constructor(){super(...arguments);this.version=Gi.Option.String()}async execute(){if(!this.version){let{version:t}=await this.getManifest();this.version=t}await this.$(`yarn workspaces foreach --no-private package set version ${this.version}`)}};Me.label="@bud version",Me.paths=[["@bud","version"]],Me.usage={category:"@bud",description:"bump version of public packages",examples:[["Bump packages to x.y.z","yarn @bud version x.y.z"]]};var Ze={Bud:Ae,Clean:ve,Compile:Se,Dev:xe,Docs:je,DocsDev:Ee,Format:Fe,Lint:Te,LintDependencies:Pe,LintExports:qe,Preinstall:he,Release:Ne,Test:Ie,Tsc:De,Vendor:Re,Version:Me};var su={hooks:{afterAllInstalled:()=>{process.stdout.write(`
What a great install, am I right?
`)}},commands:Object.values(Ze)},au=su;return cu;})();
return plugin;
}
};
