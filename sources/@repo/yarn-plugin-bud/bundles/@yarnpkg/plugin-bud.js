/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-bud",
factory: function (require) {
var plugin=(()=>{var eo=Object.create,bt=Object.defineProperty;var tr=Object.getOwnPropertyDescriptor;var ro=Object.getOwnPropertyNames,er=Object.getOwnPropertySymbols,no=Object.getPrototypeOf,rr=Object.prototype.hasOwnProperty,io=Object.prototype.propertyIsEnumerable;var nr=(t,e,r)=>e in t?bt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,J=(t,e)=>{for(var r in e||(e={}))rr.call(e,r)&&nr(t,r,e[r]);if(er)for(var r of er(e))io.call(e,r)&&nr(t,r,e[r]);return t};var oo=t=>bt(t,"__esModule",{value:!0});var b=t=>{if(typeof require!="undefined")return require(t);throw new Error('Dynamic require of "'+t+'" is not supported')};var w=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),so=(t,e)=>{for(var r in e)bt(t,r,{get:e[r],enumerable:!0})},ao=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of ro(e))!rr.call(t,n)&&n!=="default"&&bt(t,n,{get:()=>e[n],enumerable:!(r=tr(e,n))||r.enumerable});return t},k=t=>ao(oo(bt(t!=null?eo(no(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),nt=(t,e,r,n)=>{for(var i=n>1?void 0:n?tr(e,r):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(n?s(e,r,i):s(i))||i);return n&&i&&bt(e,r,i),i};var ar=w((vu,sr)=>{var co="Expected a function",ir=0/0,uo="[object Symbol]",lo=/^\s+|\s+$/g,fo=/^[-+]0x[0-9a-f]+$/i,mo=/^0b[01]+$/i,po=/^0o[0-7]+$/i,yo=parseInt,ho=typeof global=="object"&&global&&global.Object===Object&&global,go=typeof self=="object"&&self&&self.Object===Object&&self,bo=ho||go||Function("return this")(),wo=Object.prototype,vo=wo.toString,xo=Math.max,So=Math.min,Oe=function(){return bo.Date.now()};function Eo(t,e,r){var n,i,o,s,a,u,y=0,c=!1,l=!1,m=!0;if(typeof t!="function")throw new TypeError(co);e=or(e)||0,$e(r)&&(c=!!r.leading,l="maxWait"in r,o=l?xo(or(r.maxWait)||0,e):o,m="trailing"in r?!!r.trailing:m);function f(g){var q=n,d=i;return n=i=void 0,y=g,s=t.apply(d,q),s}function h(g){return y=g,a=setTimeout(C,e),c?f(g):s}function S(g){var q=g-u,d=g-y,x=e-q;return l?So(x,o-d):x}function v(g){var q=g-u,d=g-y;return u===void 0||q>=e||q<0||l&&d>=o}function C(){var g=Oe();if(v(g))return $(g);a=setTimeout(C,S(g))}function $(g){return a=void 0,m&&n?f(g):(n=i=void 0,s)}function tt(){a!==void 0&&clearTimeout(a),y=0,n=u=i=a=void 0}function rt(){return a===void 0?s:$(Oe())}function Z(){var g=Oe(),q=v(g);if(n=arguments,i=this,u=g,q){if(a===void 0)return h(u);if(l)return a=setTimeout(C,e),f(u)}return a===void 0&&(a=setTimeout(C,e)),s}return Z.cancel=tt,Z.flush=rt,Z}function $e(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Co(t){return!!t&&typeof t=="object"}function ko(t){return typeof t=="symbol"||Co(t)&&vo.call(t)==uo}function or(t){if(typeof t=="number")return t;if(ko(t))return ir;if($e(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=$e(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(lo,"");var r=mo.test(t);return r||po.test(t)?yo(t.slice(2),r?2:8):fo.test(t)?ir:+t}sr.exports=Eo});var mr=w((xu,fr)=>{var cr="Expected a function",ur=0/0,_o="[object Symbol]",Oo=/^\s+|\s+$/g,$o=/^[-+]0x[0-9a-f]+$/i,jo=/^0b[01]+$/i,Po=/^0o[0-7]+$/i,qo=parseInt,Fo=typeof global=="object"&&global&&global.Object===Object&&global,To=typeof self=="object"&&self&&self.Object===Object&&self,No=Fo||To||Function("return this")(),Do=Object.prototype,Io=Do.toString,Ro=Math.max,Mo=Math.min,je=function(){return No.Date.now()};function Lo(t,e,r){var n,i,o,s,a,u,y=0,c=!1,l=!1,m=!0;if(typeof t!="function")throw new TypeError(cr);e=lr(e)||0,se(r)&&(c=!!r.leading,l="maxWait"in r,o=l?Ro(lr(r.maxWait)||0,e):o,m="trailing"in r?!!r.trailing:m);function f(g){var q=n,d=i;return n=i=void 0,y=g,s=t.apply(d,q),s}function h(g){return y=g,a=setTimeout(C,e),c?f(g):s}function S(g){var q=g-u,d=g-y,x=e-q;return l?Mo(x,o-d):x}function v(g){var q=g-u,d=g-y;return u===void 0||q>=e||q<0||l&&d>=o}function C(){var g=je();if(v(g))return $(g);a=setTimeout(C,S(g))}function $(g){return a=void 0,m&&n?f(g):(n=i=void 0,s)}function tt(){a!==void 0&&clearTimeout(a),y=0,n=u=i=a=void 0}function rt(){return a===void 0?s:$(je())}function Z(){var g=je(),q=v(g);if(n=arguments,i=this,u=g,q){if(a===void 0)return h(u);if(l)return a=setTimeout(C,e),f(u)}return a===void 0&&(a=setTimeout(C,e)),s}return Z.cancel=tt,Z.flush=rt,Z}function Ao(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(cr);return se(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Lo(t,e,{leading:n,maxWait:e,trailing:i})}function se(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Wo(t){return!!t&&typeof t=="object"}function Bo(t){return typeof t=="symbol"||Wo(t)&&Io.call(t)==_o}function lr(t){if(typeof t=="number")return t;if(Bo(t))return ur;if(se(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=se(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Oo,"");var r=jo.test(t);return r||Po.test(t)?qo(t.slice(2),r?2:8):$o.test(t)?ur:+t}fr.exports=Ao});var gr=w((Su,hr)=>{var Ho="Expected a function",dr=1/0,Jo=17976931348623157e292,pr=0/0,Vo="[object Symbol]",Go=/^\s+|\s+$/g,Uo=/^[-+]0x[0-9a-f]+$/i,Yo=/^0b[01]+$/i,Ko=/^0o[0-7]+$/i,Xo=parseInt,zo=Object.prototype,Qo=zo.toString;function Zo(t,e){var r;if(typeof e!="function")throw new TypeError(Ho);return t=is(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}function ts(t){return Zo(2,t)}function yr(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function es(t){return!!t&&typeof t=="object"}function rs(t){return typeof t=="symbol"||es(t)&&Qo.call(t)==Vo}function ns(t){if(!t)return t===0?t:0;if(t=os(t),t===dr||t===-dr){var e=t<0?-1:1;return e*Jo}return t===t?t:0}function is(t){var e=ns(t),r=e%1;return e===e?r?e-r:e:0}function os(t){if(typeof t=="number")return t;if(rs(t))return pr;if(yr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=yr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Go,"");var r=Yo.test(t);return r||Ko.test(t)?Xo(t.slice(2),r?2:8):Uo.test(t)?pr:+t}hr.exports=ts});var _r=w((Eu,kr)=>{var ss="Expected a function",br="__lodash_hash_undefined__",as="[object Function]",cs="[object GeneratorFunction]",us=/[\\^$.*+?()[\]{}|]/g,ls=/^\[object .+?Constructor\]$/,fs=typeof global=="object"&&global&&global.Object===Object&&global,ms=typeof self=="object"&&self&&self.Object===Object&&self,wr=fs||ms||Function("return this")();function ds(t,e){return t==null?void 0:t[e]}function ps(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch(r){}return e}var ys=Array.prototype,hs=Function.prototype,vr=Object.prototype,Pe=wr["__core-js_shared__"],xr=function(){var t=/[^.]+$/.exec(Pe&&Pe.keys&&Pe.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Sr=hs.toString,qe=vr.hasOwnProperty,gs=vr.toString,bs=RegExp("^"+Sr.call(qe).replace(us,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ws=ys.splice,vs=Er(wr,"Map"),Ut=Er(Object,"create");function mt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function xs(){this.__data__=Ut?Ut(null):{}}function Ss(t){return this.has(t)&&delete this.__data__[t]}function Es(t){var e=this.__data__;if(Ut){var r=e[t];return r===br?void 0:r}return qe.call(e,t)?e[t]:void 0}function Cs(t){var e=this.__data__;return Ut?e[t]!==void 0:qe.call(e,t)}function ks(t,e){var r=this.__data__;return r[t]=Ut&&e===void 0?br:e,this}mt.prototype.clear=xs;mt.prototype.delete=Ss;mt.prototype.get=Es;mt.prototype.has=Cs;mt.prototype.set=ks;function wt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function _s(){this.__data__=[]}function Os(t){var e=this.__data__,r=ae(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():ws.call(e,r,1),!0}function $s(t){var e=this.__data__,r=ae(e,t);return r<0?void 0:e[r][1]}function js(t){return ae(this.__data__,t)>-1}function Ps(t,e){var r=this.__data__,n=ae(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}wt.prototype.clear=_s;wt.prototype.delete=Os;wt.prototype.get=$s;wt.prototype.has=js;wt.prototype.set=Ps;function dt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function qs(){this.__data__={hash:new mt,map:new(vs||wt),string:new mt}}function Fs(t){return ce(this,t).delete(t)}function Ts(t){return ce(this,t).get(t)}function Ns(t){return ce(this,t).has(t)}function Ds(t,e){return ce(this,t).set(t,e),this}dt.prototype.clear=qs;dt.prototype.delete=Fs;dt.prototype.get=Ts;dt.prototype.has=Ns;dt.prototype.set=Ds;function ae(t,e){for(var r=t.length;r--;)if(As(t[r][0],e))return r;return-1}function Is(t){if(!Cr(t)||Ms(t))return!1;var e=Ws(t)||ps(t)?bs:ls;return e.test(Ls(t))}function ce(t,e){var r=t.__data__;return Rs(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Er(t,e){var r=ds(t,e);return Is(r)?r:void 0}function Rs(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Ms(t){return!!xr&&xr in t}function Ls(t){if(t!=null){try{return Sr.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Fe(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(ss);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(Fe.Cache||dt),r}Fe.Cache=dt;function As(t,e){return t===e||t!==t&&e!==e}function Ws(t){var e=Cr(t)?gs.call(t):"";return e==as||e==cs}function Cr(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}kr.exports=Fe});var $r=w(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});function Bs(t,e,r){let n=r.value;return r.value=function(...i){let o=performance.now(),s=n.apply(this,i),a=performance.now();return console.log(`Call to ${e} took ${(a-o).toFixed(2)} milliseconds.`),s},r}function Hs(t=0){return function(e,r,n){let i=n.value;return n.value=function(...o){setTimeout(()=>{i.apply(this,o)},t)},n}}var Js=ar();function Vs(t=0,e={}){return function(r,n,i){let o=new WeakMap,s=i.value;return i.value=function(...a){let u=o.get(this);u||(u=Js(s,t,e).bind(this),o.set(this,u)),u(...a)},i}}var Gs=mr();function Us(t=0,e={}){return function(r,n,i){let o=i.value;return i.value=Gs(o,t,e),i}}var Ys=gr();function Ks(t,e,r){let n=r.value;return r.value=Ys(n),r}function Xs(t){return function(e){t.forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(n=>{e.prototype[n]=r.prototype[n]})})}}var zs=_r();function Qs(t){return function(e,r,n){return n.value=zs(n.value,t),n}}function Zs(t,e,r){let n=r.value;if(typeof n!="function")throw new Error(`@autobind decorator can only be applied to methods not: ${typeof n}`);let i=!1;return{configurable:!0,get(){if(i||this===t.prototype||this.hasOwnProperty(e)||typeof n!="function")return n;let o=n.bind(this);return i=!0,Object.defineProperty(this,e,{configurable:!0,get(){return o},set(s){n=s,delete this[e]}}),i=!1,o},set(o){n=o}}}var Or=(t,e)=>t<e?-1:t>e?1:0;function ta(t,e={isDescending:!0,type:"string"}){let r=Symbol();return function(n,i,o){Object.defineProperty(n,i,{set:function(a){if(!a||!Array.isArray(a))throw`Value of property ${i} is not a valid array!`;let u=e.type==="date";t?this[r]=a.sort(function(y,c){let l=u?new Date(y[t]):y[t],m=u?new Date(c[t]):c[t],f=Or(l,m);return e.isDescending?f*-1:f}):this[r]=a.sort(function(y,c){let l=u?new Date(y):y,m=u?new Date(c):c,f=Or(l,m);return e.isDescending?f*-1:f})},get:function(){return this[r]}})}}X.Mixin=Xs;X.SortBy=ta;X.bind=Zs;X.debounce=Vs;X.delay=Hs;X.measure=Bs;X.memo=Qs;X.once=Ks;X.throttle=Us});var qr=w((ju,Pr)=>{Pr.exports={name:"bud.js",description:"\u26A1\uFE0F Lightning fast frontend build tools combining the best parts of Symfony Encore and Laravel Mix",logo:"https://cdn.roots.io/app/uploads/logo-bud.svg",card:"https://bud.js.org/img/bud.js.png",url:{discourse:"https://discourse.roots.io/c/bud/24",docs:"https://bud.js.org",git:"git@github.com:roots/bud",web:"https://github.com/roots/bud"},organization:{name:"Roots Software Foundation LLC",site:"https://roots.io",twitter:"https://twitter.com/rootswp",favicon:"https://roots.io/favicon.ico"},contributors:{kellymears:{type:["\u{1F680} steward","\u{1F4BB} dev","\u{1F4D5} docs"]},qwp6t:{type:["\u{1F680} steward","\u{1F4BB} dev","\u{1F4D5} docs"]},retlehs:{type:["\u{1F680} steward","\u{1F4D5} docs"]},swalkinshaw:{type:["\u{1F680} steward","\u{1F4BB} dev","\u{1F4D5} docs"]},joshuafredrickson:{type:["\u{1F4BB} dev","\u{1F4D5} docs"]},alwaysblank:{type:["\u{1F680} steward","\u{1F4D5} docs"]},alexdanylyschyn:{type:["\u{1F4BB} dev"]},clayrisser:{type:["\u{1F4D5} docs"]},catgofire:{type:["\u{1F4D5} docs"]},unlocdavid:{type:["\u{1F4D5} docs"]},robrecord:{type:["\u{1F4D5} docs"]}},sponsors:[{image:"https://cdn.roots.io/app/uploads/km-digital.svg",title:"KM Digital",url:"https://k-m.com/"},{image:"https://cdn.roots.io/app/uploads/carrot.svg",title:"Carrot",url:"https://carrot.com/"},{image:"https://cdn.roots.io/app/uploads/c21redwood.svg",title:"C21 Redwood Realty",url:"https://www.c21redwood.com/"},{image:"https://cdn.roots.io/app/uploads/wordpress.svg",title:"WordPress.com",url:"https://wordpress.com/"},{image:"https://cdn.roots.io/app/uploads/pantheon.svg",title:"Pantheon",url:"https://pantheon.io/"}],packages:{core:["@roots/bud","@roots/bud-api","@roots/bud-build","@roots/bud-cache","@roots/bud-compiler","@roots/bud-dashboard","@roots/bud-extensions","@roots/bud-framework","@roots/bud-hooks","@roots/bud-server"],extension:["@roots/bud-babel","@roots/bud-compress","@roots/bud-criticalcss","@roots/bud-emotion","@roots/bud-entrypoints","@roots/bud-esbuild","@roots/bud-eslint","@roots/bud-imagemin","@roots/bud-mdx","@roots/bud-postcss","@roots/bud-preset-recommend","@roots/bud-preset-wordpress","@roots/bud-prettier","@roots/bud-purgecss","@roots/bud-react","@roots/bud-sass","@roots/bud-solid","@roots/bud-stylelint","@roots/bud-swc","@roots/bud-tailwindcss","@roots/bud-terser","@roots/bud-typescript","@roots/bud-vue","@roots/bud-wordpress-dependencies","@roots/bud-wordpress-externals","@roots/bud-wordpress-manifests","@roots/sage"],library:["@roots/browserslist-config","@roots/bud-client","@roots/container","@roots/critical-css-webpack-plugin","@roots/dependencies","@roots/entrypoints-webpack-plugin","@roots/eslint-config","@roots/filesystem","@roots/merged-manifest-webpack-plugin","@roots/wordpress-dependencies-webpack-plugin","@roots/wordpress-externals-webpack-plugin","@roots/wordpress-hmr"]}}});var V=w(De=>{"use strict";De.fromCallback=function(t){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")t.apply(this,e);else return new Promise((r,n)=>{t.call(this,...e,(i,o)=>i!=null?n(i):r(o))})},"name",{value:t.name})};De.fromPromise=function(t){return Object.defineProperty(function(...e){let r=e[e.length-1];if(typeof r!="function")return t.apply(this,e);t.apply(this,e.slice(0,-1)).then(n=>r(null,n),r)},"name",{value:t.name})}});var Ir=w((Ku,Dr)=>{var st=b("constants"),na=process.cwd,le=null,ia=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return le||(le=na.call(process)),le};try{process.cwd()}catch(t){}typeof process.chdir=="function"&&(Ie=process.chdir,process.chdir=function(t){le=null,Ie.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Ie));var Ie;Dr.exports=oa;function oa(t){st.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=o(t.chown),t.fchown=o(t.fchown),t.lchown=o(t.lchown),t.chmod=n(t.chmod),t.fchmod=n(t.fchmod),t.lchmod=n(t.lchmod),t.chownSync=s(t.chownSync),t.fchownSync=s(t.fchownSync),t.lchownSync=s(t.lchownSync),t.chmodSync=i(t.chmodSync),t.fchmodSync=i(t.fchmodSync),t.lchmodSync=i(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=u(t.statSync),t.fstatSync=u(t.fstatSync),t.lstatSync=u(t.lstatSync),t.lchmod||(t.lchmod=function(c,l,m){m&&process.nextTick(m)},t.lchmodSync=function(){}),t.lchown||(t.lchown=function(c,l,m,f){f&&process.nextTick(f)},t.lchownSync=function(){}),ia==="win32"&&(t.rename=function(c){return function(l,m,f){var h=Date.now(),S=0;c(l,m,function v(C){if(C&&(C.code==="EACCES"||C.code==="EPERM")&&Date.now()-h<6e4){setTimeout(function(){t.stat(m,function($,tt){$&&$.code==="ENOENT"?c(l,m,v):f(C)})},S),S<100&&(S+=10);return}f&&f(C)})}}(t.rename)),t.read=function(c){function l(m,f,h,S,v,C){var $;if(C&&typeof C=="function"){var tt=0;$=function(rt,Z,g){if(rt&&rt.code==="EAGAIN"&&tt<10)return tt++,c.call(t,m,f,h,S,v,$);C.apply(this,arguments)}}return c.call(t,m,f,h,S,v,$)}return Object.setPrototypeOf&&Object.setPrototypeOf(l,c),l}(t.read),t.readSync=function(c){return function(l,m,f,h,S){for(var v=0;;)try{return c.call(t,l,m,f,h,S)}catch(C){if(C.code==="EAGAIN"&&v<10){v++;continue}throw C}}}(t.readSync);function e(c){c.lchmod=function(l,m,f){c.open(l,st.O_WRONLY|st.O_SYMLINK,m,function(h,S){if(h){f&&f(h);return}c.fchmod(S,m,function(v){c.close(S,function(C){f&&f(v||C)})})})},c.lchmodSync=function(l,m){var f=c.openSync(l,st.O_WRONLY|st.O_SYMLINK,m),h=!0,S;try{S=c.fchmodSync(f,m),h=!1}finally{if(h)try{c.closeSync(f)}catch(v){}else c.closeSync(f)}return S}}function r(c){st.hasOwnProperty("O_SYMLINK")?(c.lutimes=function(l,m,f,h){c.open(l,st.O_SYMLINK,function(S,v){if(S){h&&h(S);return}c.futimes(v,m,f,function(C){c.close(v,function($){h&&h(C||$)})})})},c.lutimesSync=function(l,m,f){var h=c.openSync(l,st.O_SYMLINK),S,v=!0;try{S=c.futimesSync(h,m,f),v=!1}finally{if(v)try{c.closeSync(h)}catch(C){}else c.closeSync(h)}return S}):(c.lutimes=function(l,m,f,h){h&&process.nextTick(h)},c.lutimesSync=function(){})}function n(c){return c&&function(l,m,f){return c.call(t,l,m,function(h){y(h)&&(h=null),f&&f.apply(this,arguments)})}}function i(c){return c&&function(l,m){try{return c.call(t,l,m)}catch(f){if(!y(f))throw f}}}function o(c){return c&&function(l,m,f,h){return c.call(t,l,m,f,function(S){y(S)&&(S=null),h&&h.apply(this,arguments)})}}function s(c){return c&&function(l,m,f){try{return c.call(t,l,m,f)}catch(h){if(!y(h))throw h}}}function a(c){return c&&function(l,m,f){typeof m=="function"&&(f=m,m=null);function h(S,v){v&&(v.uid<0&&(v.uid+=4294967296),v.gid<0&&(v.gid+=4294967296)),f&&f.apply(this,arguments)}return m?c.call(t,l,m,h):c.call(t,l,h)}}function u(c){return c&&function(l,m){var f=m?c.call(t,l,m):c.call(t,l);return f&&(f.uid<0&&(f.uid+=4294967296),f.gid<0&&(f.gid+=4294967296)),f}}function y(c){if(!c||c.code==="ENOSYS")return!0;var l=!process.getuid||process.getuid()!==0;return!!(l&&(c.code==="EINVAL"||c.code==="EPERM"))}}});var Lr=w((Xu,Mr)=>{var Rr=b("stream").Stream;Mr.exports=sa;function sa(t){return{ReadStream:e,WriteStream:r};function e(n,i){if(!(this instanceof e))return new e(n,i);Rr.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var s=Object.keys(i),a=0,u=s.length;a<u;a++){var y=s[a];this[y]=i[y]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=Infinity;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}t.open(this.path,this.flags,this.mode,function(c,l){if(c){o.emit("error",c),o.readable=!1;return}o.fd=l,o.emit("open",l),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Rr.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var u=o[s];this[u]=i[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Wr=w((zu,Ar)=>{"use strict";Ar.exports=ca;var aa=Object.getPrototypeOf||function(t){return t.__proto__};function ca(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:aa(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}});var B=w((Qu,Le)=>{var j=b("fs"),ua=Ir(),la=Lr(),fa=Wr(),fe=b("util"),L,me;typeof Symbol=="function"&&typeof Symbol.for=="function"?(L=Symbol.for("graceful-fs.queue"),me=Symbol.for("graceful-fs.previous")):(L="___graceful-fs.queue",me="___graceful-fs.previous");function ma(){}function Br(t,e){Object.defineProperty(t,L,{get:function(){return e}})}var pt=ma;fe.debuglog?pt=fe.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(pt=function(){var t=fe.format.apply(fe,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});j[L]||(Hr=global[L]||[],Br(j,Hr),j.close=function(t){function e(r,n){return t.call(j,r,function(i){i||Jr(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(e,me,{value:t}),e}(j.close),j.closeSync=function(t){function e(r){t.apply(j,arguments),Jr()}return Object.defineProperty(e,me,{value:t}),e}(j.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){pt(j[L]),b("assert").equal(j[L].length,0)}));var Hr;global[L]||Br(global,j[L]);Le.exports=Re(fa(j));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!j.__patched&&(Le.exports=Re(j),j.__patched=!0);function Re(t){ua(t),t.gracefulify=Re,t.createReadStream=rt,t.createWriteStream=Z;var e=t.readFile;t.readFile=r;function r(d,x,E){return typeof x=="function"&&(E=x,x=null),I(d,x,E);function I(R,M,F,W){return e(R,M,function(O){O&&(O.code==="EMFILE"||O.code==="ENFILE")?kt([I,[R,M,F],O,W||Date.now(),Date.now()]):typeof F=="function"&&F.apply(this,arguments)})}}var n=t.writeFile;t.writeFile=i;function i(d,x,E,I){return typeof E=="function"&&(I=E,E=null),R(d,x,E,I);function R(M,F,W,O,K){return n(M,F,W,function(T){T&&(T.code==="EMFILE"||T.code==="ENFILE")?kt([R,[M,F,W,O],T,K||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var o=t.appendFile;o&&(t.appendFile=s);function s(d,x,E,I){return typeof E=="function"&&(I=E,E=null),R(d,x,E,I);function R(M,F,W,O,K){return o(M,F,W,function(T){T&&(T.code==="EMFILE"||T.code==="ENFILE")?kt([R,[M,F,W,O],T,K||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=u);function u(d,x,E,I){return typeof E=="function"&&(I=E,E=0),R(d,x,E,I);function R(M,F,W,O,K){return a(M,F,W,function(T){T&&(T.code==="EMFILE"||T.code==="ENFILE")?kt([R,[M,F,W,O],T,K||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var y=t.readdir;t.readdir=c;function c(d,x,E){return typeof x=="function"&&(E=x,x=null),I(d,x,E);function I(R,M,F,W){return y(R,M,function(O,K){O&&(O.code==="EMFILE"||O.code==="ENFILE")?kt([I,[R,M,F],O,W||Date.now(),Date.now()]):(K&&K.sort&&K.sort(),typeof F=="function"&&F.call(this,O,K))})}}if(process.version.substr(0,4)==="v0.8"){var l=la(t);v=l.ReadStream,$=l.WriteStream}var m=t.ReadStream;m&&(v.prototype=Object.create(m.prototype),v.prototype.open=C);var f=t.WriteStream;f&&($.prototype=Object.create(f.prototype),$.prototype.open=tt),Object.defineProperty(t,"ReadStream",{get:function(){return v},set:function(d){v=d},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return $},set:function(d){$=d},enumerable:!0,configurable:!0});var h=v;Object.defineProperty(t,"FileReadStream",{get:function(){return h},set:function(d){h=d},enumerable:!0,configurable:!0});var S=$;Object.defineProperty(t,"FileWriteStream",{get:function(){return S},set:function(d){S=d},enumerable:!0,configurable:!0});function v(d,x){return this instanceof v?(m.apply(this,arguments),this):v.apply(Object.create(v.prototype),arguments)}function C(){var d=this;q(d.path,d.flags,d.mode,function(x,E){x?(d.autoClose&&d.destroy(),d.emit("error",x)):(d.fd=E,d.emit("open",E),d.read())})}function $(d,x){return this instanceof $?(f.apply(this,arguments),this):$.apply(Object.create($.prototype),arguments)}function tt(){var d=this;q(d.path,d.flags,d.mode,function(x,E){x?(d.destroy(),d.emit("error",x)):(d.fd=E,d.emit("open",E))})}function rt(d,x){return new t.ReadStream(d,x)}function Z(d,x){return new t.WriteStream(d,x)}var g=t.open;t.open=q;function q(d,x,E,I){return typeof E=="function"&&(I=E,E=null),R(d,x,E,I);function R(M,F,W,O,K){return g(M,F,W,function(T,bu){T&&(T.code==="EMFILE"||T.code==="ENFILE")?kt([R,[M,F,W,O],T,K||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}return t}function kt(t){pt("ENQUEUE",t[0].name,t[1]),j[L].push(t),Me()}var de;function Jr(){for(var t=Date.now(),e=0;e<j[L].length;++e)j[L][e].length>2&&(j[L][e][3]=t,j[L][e][4]=t);Me()}function Me(){if(clearTimeout(de),de=void 0,j[L].length!==0){var t=j[L].shift(),e=t[0],r=t[1],n=t[2],i=t[3],o=t[4];if(i===void 0)pt("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-i>=6e4){pt("TIMEOUT",e.name,r);var s=r.pop();typeof s=="function"&&s.call(null,n)}else{var a=Date.now()-o,u=Math.max(o-i,1),y=Math.min(u*1.2,100);a>=y?(pt("RETRY",e.name,r),e.apply(null,r.concat([i]))):j[L].push(t)}de===void 0&&(de=setTimeout(Me,0))}}});var yt=w(at=>{"use strict";var Vr=V().fromCallback,G=B(),da=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(t=>typeof G[t]=="function");Object.assign(at,G);da.forEach(t=>{at[t]=Vr(G[t])});at.exists=function(t,e){return typeof e=="function"?G.exists(t,e):new Promise(r=>G.exists(t,r))};at.read=function(t,e,r,n,i,o){return typeof o=="function"?G.read(t,e,r,n,i,o):new Promise((s,a)=>{G.read(t,e,r,n,i,(u,y,c)=>{if(u)return a(u);s({bytesRead:y,buffer:c})})})};at.write=function(t,e,...r){return typeof r[r.length-1]=="function"?G.write(t,e,...r):new Promise((n,i)=>{G.write(t,e,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffer:a})})})};typeof G.writev=="function"&&(at.writev=function(t,e,...r){return typeof r[r.length-1]=="function"?G.writev(t,e,...r):new Promise((n,i)=>{G.writev(t,e,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffers:a})})})});typeof G.realpath.native=="function"?at.realpath.native=Vr(G.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var Ur=w((tl,Gr)=>{"use strict";var pa=b("path");Gr.exports.checkPath=function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(pa.parse(e).root,""))){let n=new Error(`Path contains invalid characters: ${e}`);throw n.code="EINVAL",n}}});var zr=w((el,Ae)=>{"use strict";var Yr=yt(),{checkPath:Kr}=Ur(),Xr=t=>{let e={mode:511};return typeof t=="number"?t:J(J({},e),t).mode};Ae.exports.makeDir=async(t,e)=>(Kr(t),Yr.mkdir(t,{mode:Xr(e),recursive:!0}));Ae.exports.makeDirSync=(t,e)=>(Kr(t),Yr.mkdirSync(t,{mode:Xr(e),recursive:!0}))});var z=w((rl,Qr)=>{"use strict";var ya=V().fromPromise,{makeDir:ha,makeDirSync:We}=zr(),Be=ya(ha);Qr.exports={mkdirs:Be,mkdirsSync:We,mkdirp:Be,mkdirpSync:We,ensureDir:Be,ensureDirSync:We}});var ct=w((nl,tn)=>{"use strict";var ga=V().fromPromise,Zr=yt();function ba(t){return Zr.access(t).then(()=>!0).catch(()=>!1)}tn.exports={pathExists:ga(ba),pathExistsSync:Zr.existsSync}});var He=w((il,en)=>{"use strict";var _t=B();function wa(t,e,r,n){_t.open(t,"r+",(i,o)=>{if(i)return n(i);_t.futimes(o,e,r,s=>{_t.close(o,a=>{n&&n(s||a)})})})}function va(t,e,r){let n=_t.openSync(t,"r+");return _t.futimesSync(n,e,r),_t.closeSync(n)}en.exports={utimesMillis:wa,utimesMillisSync:va}});var ht=w((ol,on)=>{"use strict";var Ot=yt(),D=b("path"),xa=b("util");function Sa(t,e,r){let n=r.dereference?i=>Ot.stat(i,{bigint:!0}):i=>Ot.lstat(i,{bigint:!0});return Promise.all([n(t),n(e).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function Ea(t,e,r){let n,i=r.dereference?s=>Ot.statSync(s,{bigint:!0}):s=>Ot.lstatSync(s,{bigint:!0}),o=i(t);try{n=i(e)}catch(s){if(s.code==="ENOENT")return{srcStat:o,destStat:null};throw s}return{srcStat:o,destStat:n}}function Ca(t,e,r,n,i){xa.callbackify(Sa)(t,e,n,(o,s)=>{if(o)return i(o);let{srcStat:a,destStat:u}=s;if(u){if(Kt(a,u)){let y=D.basename(t),c=D.basename(e);return r==="move"&&y!==c&&y.toLowerCase()===c.toLowerCase()?i(null,{srcStat:a,destStat:u,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!u.isDirectory())return i(new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`));if(!a.isDirectory()&&u.isDirectory())return i(new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`))}return a.isDirectory()&&Je(t,e)?i(new Error(pe(t,e,r))):i(null,{srcStat:a,destStat:u})})}function ka(t,e,r,n){let{srcStat:i,destStat:o}=Ea(t,e,n);if(o){if(Kt(i,o)){let s=D.basename(t),a=D.basename(e);if(r==="move"&&s!==a&&s.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(i.isDirectory()&&Je(t,e))throw new Error(pe(t,e,r));return{srcStat:i,destStat:o}}function rn(t,e,r,n,i){let o=D.resolve(D.dirname(t)),s=D.resolve(D.dirname(r));if(s===o||s===D.parse(s).root)return i();Ot.stat(s,{bigint:!0},(a,u)=>a?a.code==="ENOENT"?i():i(a):Kt(e,u)?i(new Error(pe(t,r,n))):rn(t,e,s,n,i))}function nn(t,e,r,n){let i=D.resolve(D.dirname(t)),o=D.resolve(D.dirname(r));if(o===i||o===D.parse(o).root)return;let s;try{s=Ot.statSync(o,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Kt(e,s))throw new Error(pe(t,r,n));return nn(t,e,o,n)}function Kt(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function Je(t,e){let r=D.resolve(t).split(D.sep).filter(i=>i),n=D.resolve(e).split(D.sep).filter(i=>i);return r.reduce((i,o,s)=>i&&n[s]===o,!0)}function pe(t,e,r){return`Cannot ${r} '${t}' to a subdirectory of itself, '${e}'.`}on.exports={checkPaths:Ca,checkPathsSync:ka,checkParentPaths:rn,checkParentPathsSync:nn,isSrcSubdir:Je,areIdentical:Kt}});var dn=w((sl,mn)=>{"use strict";var U=B(),Xt=b("path"),_a=z().mkdirs,Oa=ct().pathExists,$a=He().utimesMillis,zt=ht();function ja(t,e,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),zt.checkPaths(t,e,"copy",r,(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:a}=o;zt.checkParentPaths(t,s,e,"copy",u=>u?n(u):r.filter?an(sn,a,t,e,r,n):sn(a,t,e,r,n))})}function sn(t,e,r,n,i){let o=Xt.dirname(r);Oa(o,(s,a)=>{if(s)return i(s);if(a)return ye(t,e,r,n,i);_a(o,u=>u?i(u):ye(t,e,r,n,i))})}function an(t,e,r,n,i,o){Promise.resolve(i.filter(r,n)).then(s=>s?t(e,r,n,i,o):o(),s=>o(s))}function Pa(t,e,r,n,i){return n.filter?an(ye,t,e,r,n,i):ye(t,e,r,n,i)}function ye(t,e,r,n,i){(n.dereference?U.stat:U.lstat)(e,(s,a)=>s?i(s):a.isDirectory()?Ra(a,t,e,r,n,i):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?qa(a,t,e,r,n,i):a.isSymbolicLink()?Aa(t,e,r,n,i):a.isSocket()?i(new Error(`Cannot copy a socket file: ${e}`)):a.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${e}`)):i(new Error(`Unknown file: ${e}`)))}function qa(t,e,r,n,i,o){return e?Fa(t,r,n,i,o):cn(t,r,n,i,o)}function Fa(t,e,r,n,i){if(n.overwrite)U.unlink(r,o=>o?i(o):cn(t,e,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function cn(t,e,r,n,i){U.copyFile(e,r,o=>o?i(o):n.preserveTimestamps?Ta(t.mode,e,r,i):he(r,t.mode,i))}function Ta(t,e,r,n){return Na(t)?Da(r,t,i=>i?n(i):un(t,e,r,n)):un(t,e,r,n)}function Na(t){return(t&128)==0}function Da(t,e,r){return he(t,e|128,r)}function un(t,e,r,n){Ia(e,r,i=>i?n(i):he(r,t,n))}function he(t,e,r){return U.chmod(t,e,r)}function Ia(t,e,r){U.stat(t,(n,i)=>n?r(n):$a(e,i.atime,i.mtime,r))}function Ra(t,e,r,n,i,o){return e?ln(r,n,i,o):Ma(t.mode,r,n,i,o)}function Ma(t,e,r,n,i){U.mkdir(r,o=>{if(o)return i(o);ln(e,r,n,s=>s?i(s):he(r,t,i))})}function ln(t,e,r,n){U.readdir(t,(i,o)=>i?n(i):fn(o,t,e,r,n))}function fn(t,e,r,n,i){let o=t.pop();return o?La(t,o,e,r,n,i):i()}function La(t,e,r,n,i,o){let s=Xt.join(r,e),a=Xt.join(n,e);zt.checkPaths(s,a,"copy",i,(u,y)=>{if(u)return o(u);let{destStat:c}=y;Pa(c,s,a,i,l=>l?o(l):fn(t,r,n,i,o))})}function Aa(t,e,r,n,i){U.readlink(e,(o,s)=>{if(o)return i(o);if(n.dereference&&(s=Xt.resolve(process.cwd(),s)),t)U.readlink(r,(a,u)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?U.symlink(s,r,i):i(a):(n.dereference&&(u=Xt.resolve(process.cwd(),u)),zt.isSrcSubdir(s,u)?i(new Error(`Cannot copy '${s}' to a subdirectory of itself, '${u}'.`)):t.isDirectory()&&zt.isSrcSubdir(u,s)?i(new Error(`Cannot overwrite '${u}' with '${s}'.`)):Wa(s,r,i)));else return U.symlink(s,r,i)})}function Wa(t,e,r){U.unlink(e,n=>n?r(n):U.symlink(t,e,r))}mn.exports=ja});var bn=w((al,gn)=>{"use strict";var A=B(),Qt=b("path"),Ba=z().mkdirsSync,Ha=He().utimesMillisSync,Zt=ht();function Ja(t,e,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=Zt.checkPathsSync(t,e,"copy",r);return Zt.checkParentPathsSync(t,n,e,"copy"),Va(i,t,e,r)}function Va(t,e,r,n){if(n.filter&&!n.filter(e,r))return;let i=Qt.dirname(r);return A.existsSync(i)||Ba(i),pn(t,e,r,n)}function Ga(t,e,r,n){if(!(n.filter&&!n.filter(e,r)))return pn(t,e,r,n)}function pn(t,e,r,n){let o=(n.dereference?A.statSync:A.lstatSync)(e);if(o.isDirectory())return Za(o,t,e,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return Ua(o,t,e,r,n);if(o.isSymbolicLink())return rc(t,e,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${e}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}function Ua(t,e,r,n,i){return e?Ya(t,r,n,i):yn(t,r,n,i)}function Ya(t,e,r,n){if(n.overwrite)return A.unlinkSync(r),yn(t,e,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function yn(t,e,r,n){return A.copyFileSync(e,r),n.preserveTimestamps&&Ka(t.mode,e,r),Ve(r,t.mode)}function Ka(t,e,r){return Xa(t)&&za(r,t),Qa(e,r)}function Xa(t){return(t&128)==0}function za(t,e){return Ve(t,e|128)}function Ve(t,e){return A.chmodSync(t,e)}function Qa(t,e){let r=A.statSync(t);return Ha(e,r.atime,r.mtime)}function Za(t,e,r,n,i){return e?hn(r,n,i):tc(t.mode,r,n,i)}function tc(t,e,r,n){return A.mkdirSync(r),hn(e,r,n),Ve(r,t)}function hn(t,e,r){A.readdirSync(t).forEach(n=>ec(n,t,e,r))}function ec(t,e,r,n){let i=Qt.join(e,t),o=Qt.join(r,t),{destStat:s}=Zt.checkPathsSync(i,o,"copy",n);return Ga(s,i,o,n)}function rc(t,e,r,n){let i=A.readlinkSync(e);if(n.dereference&&(i=Qt.resolve(process.cwd(),i)),t){let o;try{o=A.readlinkSync(r)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return A.symlinkSync(i,r);throw s}if(n.dereference&&(o=Qt.resolve(process.cwd(),o)),Zt.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(A.statSync(r).isDirectory()&&Zt.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return nc(i,r)}else return A.symlinkSync(i,r)}function nc(t,e){return A.unlinkSync(e),A.symlinkSync(t,e)}gn.exports=Ja});var ge=w((cl,wn)=>{"use strict";var ic=V().fromCallback;wn.exports={copy:ic(dn()),copySync:bn()}});var $n=w((ul,On)=>{"use strict";var vn=B(),xn=b("path"),_=b("assert"),te=process.platform==="win32";function Sn(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{t[r]=t[r]||vn[r],r=r+"Sync",t[r]=t[r]||vn[r]}),t.maxBusyTries=t.maxBusyTries||3}function Ge(t,e,r){let n=0;typeof e=="function"&&(r=e,e={}),_(t,"rimraf: missing path"),_.strictEqual(typeof t,"string","rimraf: path should be a string"),_.strictEqual(typeof r,"function","rimraf: callback function required"),_(e,"rimraf: invalid options argument provided"),_.strictEqual(typeof e,"object","rimraf: options should be object"),Sn(e),En(t,e,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&n<e.maxBusyTries){n++;let s=n*100;return setTimeout(()=>En(t,e,i),s)}o.code==="ENOENT"&&(o=null)}r(o)})}function En(t,e,r){_(t),_(e),_(typeof r=="function"),e.lstat(t,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&te)return Cn(t,e,n,r);if(i&&i.isDirectory())return be(t,e,n,r);e.unlink(t,o=>{if(o){if(o.code==="ENOENT")return r(null);if(o.code==="EPERM")return te?Cn(t,e,o,r):be(t,e,o,r);if(o.code==="EISDIR")return be(t,e,o,r)}return r(o)})})}function Cn(t,e,r,n){_(t),_(e),_(typeof n=="function"),e.chmod(t,438,i=>{i?n(i.code==="ENOENT"?null:r):e.stat(t,(o,s)=>{o?n(o.code==="ENOENT"?null:r):s.isDirectory()?be(t,e,r,n):e.unlink(t,n)})})}function kn(t,e,r){let n;_(t),_(e);try{e.chmodSync(t,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=e.statSync(t)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?we(t,e,r):e.unlinkSync(t)}function be(t,e,r,n){_(t),_(e),_(typeof n=="function"),e.rmdir(t,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?oc(t,e,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function oc(t,e,r){_(t),_(e),_(typeof r=="function"),e.readdir(t,(n,i)=>{if(n)return r(n);let o=i.length,s;if(o===0)return e.rmdir(t,r);i.forEach(a=>{Ge(xn.join(t,a),e,u=>{if(!s){if(u)return r(s=u);--o==0&&e.rmdir(t,r)}})})})}function _n(t,e){let r;e=e||{},Sn(e),_(t,"rimraf: missing path"),_.strictEqual(typeof t,"string","rimraf: path should be a string"),_(e,"rimraf: missing options"),_.strictEqual(typeof e,"object","rimraf: options should be object");try{r=e.lstatSync(t)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&te&&kn(t,e,n)}try{r&&r.isDirectory()?we(t,e,null):e.unlinkSync(t)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return te?kn(t,e,n):we(t,e,n);if(n.code!=="EISDIR")throw n;we(t,e,n)}}function we(t,e,r){_(t),_(e);try{e.rmdirSync(t)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")sc(t,e);else if(n.code!=="ENOENT")throw n}}function sc(t,e){if(_(t),_(e),e.readdirSync(t).forEach(r=>_n(xn.join(t,r),e)),te){let r=Date.now();do try{return e.rmdirSync(t,e)}catch{}while(Date.now()-r<500)}else return e.rmdirSync(t,e)}On.exports=Ge;Ge.sync=_n});var ee=w((ll,Pn)=>{"use strict";var ve=B(),ac=V().fromCallback,jn=$n();function cc(t,e){if(ve.rm)return ve.rm(t,{recursive:!0,force:!0},e);jn(t,e)}function uc(t){if(ve.rmSync)return ve.rmSync(t,{recursive:!0,force:!0});jn.sync(t)}Pn.exports={remove:ac(cc),removeSync:uc}});var Mn=w((fl,Rn)=>{"use strict";var lc=V().fromPromise,qn=yt(),Fn=b("path"),Tn=z(),Nn=ee(),Dn=lc(async function(e){let r;try{r=await qn.readdir(e)}catch{return Tn.mkdirs(e)}return Promise.all(r.map(n=>Nn.remove(Fn.join(e,n))))});function In(t){let e;try{e=qn.readdirSync(t)}catch{return Tn.mkdirsSync(t)}e.forEach(r=>{r=Fn.join(t,r),Nn.removeSync(r)})}Rn.exports={emptyDirSync:In,emptydirSync:In,emptyDir:Dn,emptydir:Dn}});var Bn=w((ml,Wn)=>{"use strict";var fc=V().fromCallback,Ln=b("path"),ut=B(),An=z();function mc(t,e){function r(){ut.writeFile(t,"",n=>{if(n)return e(n);e()})}ut.stat(t,(n,i)=>{if(!n&&i.isFile())return e();let o=Ln.dirname(t);ut.stat(o,(s,a)=>{if(s)return s.code==="ENOENT"?An.mkdirs(o,u=>{if(u)return e(u);r()}):e(s);a.isDirectory()?r():ut.readdir(o,u=>{if(u)return e(u)})})})}function dc(t){let e;try{e=ut.statSync(t)}catch{}if(e&&e.isFile())return;let r=Ln.dirname(t);try{ut.statSync(r).isDirectory()||ut.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")An.mkdirsSync(r);else throw n}ut.writeFileSync(t,"")}Wn.exports={createFile:fc(mc),createFileSync:dc}});var Un=w((dl,Gn)=>{"use strict";var pc=V().fromCallback,Hn=b("path"),lt=B(),Jn=z(),yc=ct().pathExists,{areIdentical:Vn}=ht();function hc(t,e,r){function n(i,o){lt.link(i,o,s=>{if(s)return r(s);r(null)})}lt.lstat(e,(i,o)=>{lt.lstat(t,(s,a)=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),r(s);if(o&&Vn(a,o))return r(null);let u=Hn.dirname(e);yc(u,(y,c)=>{if(y)return r(y);if(c)return n(t,e);Jn.mkdirs(u,l=>{if(l)return r(l);n(t,e)})})})})}function gc(t,e){let r;try{r=lt.lstatSync(e)}catch{}try{let o=lt.lstatSync(t);if(r&&Vn(o,r))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=Hn.dirname(e);return lt.existsSync(n)||Jn.mkdirsSync(n),lt.linkSync(t,e)}Gn.exports={createLink:pc(hc),createLinkSync:gc}});var Kn=w((pl,Yn)=>{"use strict";var ft=b("path"),re=B(),bc=ct().pathExists;function wc(t,e,r){if(ft.isAbsolute(t))return re.lstat(t,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:t,toDst:t}));{let n=ft.dirname(e),i=ft.join(n,t);return bc(i,(o,s)=>o?r(o):s?r(null,{toCwd:i,toDst:t}):re.lstat(t,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:t,toDst:ft.relative(n,t)})))}}function vc(t,e){let r;if(ft.isAbsolute(t)){if(r=re.existsSync(t),!r)throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}else{let n=ft.dirname(e),i=ft.join(n,t);if(r=re.existsSync(i),r)return{toCwd:i,toDst:t};if(r=re.existsSync(t),!r)throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:ft.relative(n,t)}}}Yn.exports={symlinkPaths:wc,symlinkPathsSync:vc}});var Qn=w((yl,zn)=>{"use strict";var Xn=B();function xc(t,e,r){if(r=typeof e=="function"?e:r,e=typeof e=="function"?!1:e,e)return r(null,e);Xn.lstat(t,(n,i)=>{if(n)return r(null,"file");e=i&&i.isDirectory()?"dir":"file",r(null,e)})}function Sc(t,e){let r;if(e)return e;try{r=Xn.lstatSync(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}zn.exports={symlinkType:xc,symlinkTypeSync:Sc}});var si=w((hl,oi)=>{"use strict";var Ec=V().fromCallback,Zn=b("path"),Q=yt(),ti=z(),Cc=ti.mkdirs,kc=ti.mkdirsSync,ei=Kn(),_c=ei.symlinkPaths,Oc=ei.symlinkPathsSync,ri=Qn(),$c=ri.symlinkType,jc=ri.symlinkTypeSync,Pc=ct().pathExists,{areIdentical:ni}=ht();function qc(t,e,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,Q.lstat(e,(i,o)=>{!i&&o.isSymbolicLink()?Promise.all([Q.stat(t),Q.stat(e)]).then(([s,a])=>{if(ni(s,a))return n(null);ii(t,e,r,n)}):ii(t,e,r,n)})}function ii(t,e,r,n){_c(t,e,(i,o)=>{if(i)return n(i);t=o.toDst,$c(o.toCwd,r,(s,a)=>{if(s)return n(s);let u=Zn.dirname(e);Pc(u,(y,c)=>{if(y)return n(y);if(c)return Q.symlink(t,e,a,n);Cc(u,l=>{if(l)return n(l);Q.symlink(t,e,a,n)})})})})}function Fc(t,e,r){let n;try{n=Q.lstatSync(e)}catch{}if(n&&n.isSymbolicLink()){let a=Q.statSync(t),u=Q.statSync(e);if(ni(a,u))return}let i=Oc(t,e);t=i.toDst,r=jc(i.toCwd,r);let o=Zn.dirname(e);return Q.existsSync(o)||kc(o),Q.symlinkSync(t,e,r)}oi.exports={createSymlink:Ec(qc),createSymlinkSync:Fc}});var pi=w((gl,di)=>{"use strict";var{createFile:ai,createFileSync:ci}=Bn(),{createLink:ui,createLinkSync:li}=Un(),{createSymlink:fi,createSymlinkSync:mi}=si();di.exports={createFile:ai,createFileSync:ci,ensureFile:ai,ensureFileSync:ci,createLink:ui,createLinkSync:li,ensureLink:ui,ensureLinkSync:li,createSymlink:fi,createSymlinkSync:mi,ensureSymlink:fi,ensureSymlinkSync:mi}});var xe=w((bl,yi)=>{function Tc(t,{EOL:e=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let o=r?e:"";return JSON.stringify(t,n,i).replace(/\n/g,e)+o}function Nc(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}yi.exports={stringify:Tc,stripBom:Nc}});var wi=w((wl,bi)=>{var $t;try{$t=B()}catch(t){$t=b("fs")}var Se=V(),{stringify:hi,stripBom:gi}=xe();async function Dc(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||$t,n="throws"in e?e.throws:!0,i=await Se.fromCallback(r.readFile)(t,e);i=gi(i);let o;try{o=JSON.parse(i,e?e.reviver:null)}catch(s){if(n)throw s.message=`${t}: ${s.message}`,s;return null}return o}var Ic=Se.fromPromise(Dc);function Rc(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||$t,n="throws"in e?e.throws:!0;try{let i=r.readFileSync(t,e);return i=gi(i),JSON.parse(i,e.reviver)}catch(i){if(n)throw i.message=`${t}: ${i.message}`,i;return null}}async function Mc(t,e,r={}){let n=r.fs||$t,i=hi(e,r);await Se.fromCallback(n.writeFile)(t,i,r)}var Lc=Se.fromPromise(Mc);function Ac(t,e,r={}){let n=r.fs||$t,i=hi(e,r);return n.writeFileSync(t,i,r)}var Wc={readFile:Ic,readFileSync:Rc,writeFile:Lc,writeFileSync:Ac};bi.exports=Wc});var xi=w((vl,vi)=>{"use strict";var Ee=wi();vi.exports={readJson:Ee.readFile,readJsonSync:Ee.readFileSync,writeJson:Ee.writeFile,writeJsonSync:Ee.writeFileSync}});var Ce=w((xl,Ci)=>{"use strict";var Bc=V().fromCallback,ne=B(),Si=b("path"),Ei=z(),Hc=ct().pathExists;function Jc(t,e,r,n){typeof r=="function"&&(n=r,r="utf8");let i=Si.dirname(t);Hc(i,(o,s)=>{if(o)return n(o);if(s)return ne.writeFile(t,e,r,n);Ei.mkdirs(i,a=>{if(a)return n(a);ne.writeFile(t,e,r,n)})})}function Vc(t,...e){let r=Si.dirname(t);if(ne.existsSync(r))return ne.writeFileSync(t,...e);Ei.mkdirsSync(r),ne.writeFileSync(t,...e)}Ci.exports={outputFile:Bc(Jc),outputFileSync:Vc}});var _i=w((Sl,ki)=>{"use strict";var{stringify:Gc}=xe(),{outputFile:Uc}=Ce();async function Yc(t,e,r={}){let n=Gc(e,r);await Uc(t,n,r)}ki.exports=Yc});var $i=w((El,Oi)=>{"use strict";var{stringify:Kc}=xe(),{outputFileSync:Xc}=Ce();function zc(t,e,r){let n=Kc(e,r);Xc(t,n,r)}Oi.exports=zc});var Pi=w((Cl,ji)=>{"use strict";var Qc=V().fromPromise,H=xi();H.outputJson=Qc(_i());H.outputJsonSync=$i();H.outputJSON=H.outputJson;H.outputJSONSync=H.outputJsonSync;H.writeJSON=H.writeJson;H.writeJSONSync=H.writeJsonSync;H.readJSON=H.readJson;H.readJSONSync=H.readJsonSync;ji.exports=H});var Di=w((kl,Ni)=>{"use strict";var Zc=B(),Ue=b("path"),tu=ge().copy,qi=ee().remove,eu=z().mkdirp,ru=ct().pathExists,Fi=ht();function nu(t,e,r,n){typeof r=="function"&&(n=r,r={}),r=r||{};let i=r.overwrite||r.clobber||!1;Fi.checkPaths(t,e,"move",r,(o,s)=>{if(o)return n(o);let{srcStat:a,isChangingCase:u=!1}=s;Fi.checkParentPaths(t,a,e,"move",y=>{if(y)return n(y);if(iu(e))return Ti(t,e,i,u,n);eu(Ue.dirname(e),c=>c?n(c):Ti(t,e,i,u,n))})})}function iu(t){let e=Ue.dirname(t);return Ue.parse(e).root===e}function Ti(t,e,r,n,i){if(n)return Ye(t,e,r,i);if(r)return qi(e,o=>o?i(o):Ye(t,e,r,i));ru(e,(o,s)=>o?i(o):s?i(new Error("dest already exists.")):Ye(t,e,r,i))}function Ye(t,e,r,n){Zc.rename(t,e,i=>i?i.code!=="EXDEV"?n(i):ou(t,e,r,n):n())}function ou(t,e,r,n){tu(t,e,{overwrite:r,errorOnExist:!0},o=>o?n(o):qi(t,n))}Ni.exports=nu});var Ai=w((_l,Li)=>{"use strict";var Ii=B(),Ke=b("path"),su=ge().copySync,Ri=ee().removeSync,au=z().mkdirpSync,Mi=ht();function cu(t,e,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=Mi.checkPathsSync(t,e,"move",r);return Mi.checkParentPathsSync(t,i,e,"move"),uu(e)||au(Ke.dirname(e)),lu(t,e,n,o)}function uu(t){let e=Ke.dirname(t);return Ke.parse(e).root===e}function lu(t,e,r,n){if(n)return Xe(t,e,r);if(r)return Ri(e),Xe(t,e,r);if(Ii.existsSync(e))throw new Error("dest already exists.");return Xe(t,e,r)}function Xe(t,e,r){try{Ii.renameSync(t,e)}catch(n){if(n.code!=="EXDEV")throw n;return fu(t,e,r)}}function fu(t,e,r){return su(t,e,{overwrite:r,errorOnExist:!0}),Ri(t)}Li.exports=cu});var Bi=w((Ol,Wi)=>{"use strict";var mu=V().fromCallback;Wi.exports={move:mu(Di()),moveSync:Ai()}});var gt=w(($l,Hi)=>{"use strict";Hi.exports=J(J(J(J(J(J(J(J(J(J({},yt()),ge()),Mn()),pi()),Pi()),z()),Bi()),Ce()),ct()),ee())});var gu={};so(gu,{default:()=>hu});var jr=k(b("@yarnpkg/cli")),vt=k(b("@yarnpkg/core")),Te=k(b("@yarnpkg/shell")),it=k($r()),p=class extends jr.BaseCommand{async getManifest(){return await vt.Manifest.tryFind(this.context.cwd)}async getConfiguration(){return await vt.Configuration.find(this.context.cwd,this.context.plugins)}async getProject(){let e=await this.getConfiguration(),{project:r}=await vt.Project.find(e,this.context.cwd);return r}withPassthrough(e){return this.passthrough.length?this.passthrough.reduce((r,n)=>n?`${r} ${n}`:`${r}`,e):e}log(e){var n;let r=(n=this.name)!=null?n:"@bud";process.stdout.write(`[${r}] ${e}
`)}err(e){var n;let r=(n=this.name)!=null?n:"@bud";process.stderr.write(`[${r}] ${typeof e=="string"?e:e.message}
`),process.exit(1)}async $(...e){let r=await this.getProject();await Promise.all(e.map(async n=>{if(!!n){this.log(n);try{let i=await(0,Te.execute)(n,[],{cwd:r.cwd});if(i!==0)throw new Error(`${n} failed with code ${i}`)}catch(i){this.err(i)}}}))}async tryExecuting(e,r,n={}){try{let i=await(0,Te.execute)(e,r,n);if(i!==0)throw new Error(`\u274C ${e} ${r.join(" ")} failed`);return i}catch(i){throw new Error(i)}}};nt([it.bind],p.prototype,"getManifest",1),nt([it.bind],p.prototype,"getConfiguration",1),nt([it.bind],p.prototype,"getProject",1),nt([it.bind],p.prototype,"withPassthrough",1),nt([it.bind],p.prototype,"log",1),nt([it.bind],p.prototype,"err",1),nt([it.bind],p.prototype,"$",1);var Yt=class extends p{async execute(){process.stdout.write(`    
 _               _
| |__  _   _  __| |
|  _ \\| | | |/ _  |
| |_) | |_| | (_| |
|_.__/ \\__._|\\__._|
`),Object.values(ue).filter(e=>e.usage).forEach(e=>{var r;(r=e.usage.examples)==null||r.forEach(([n,i])=>{process.stdout.write(`
[34m${i}[0m  ${n}
`)})})}};Yt.label="@bud",Yt.paths=[["@bud"]];var Fr=k(b("module")),ot=k(b("path")),et={},P=((et==null?void 0:et.url)&&typeof et.url!="undefined"?et.url.replace("file:/",""):__dirname).split("sources/").shift(),Pu=(0,ot.join)(P,"package.json"),qu=(0,ot.join)(P,"storage");var Fu=(0,ot.join)(P,"config","tsconfig.json");var N={root:P,config:(0,ot.join)(P,"config"),sources:(0,ot.join)(P,"sources"),tests:(0,ot.join)(P,"tests"),mocks:(0,ot.join)(P,"storage/mocks")},Tr;typeof(et==null?void 0:et.url)!="undefined"?Tr=(0,Fr.createRequire)(et.url)("../../../config/monorepo.config.cjs"):Tr=qr();var xt=class extends p{async execute(){try{await this.$("rm -rf **/.budfiles"),await this.$("rm -rf **/node_modules/*"),await this.$(`rm -rf ${N.sources}/@roots/*/lib/*`),await this.$(`rm -rf ${N.sources}/@roots/*/types/*`)}catch(e){}try{await this.$("rm -rf storage/packages/@roots/*"),await this.$("rm -rf storage/packages/npm/*"),await this.$("rm -rf storage/mocks/*")}catch(e){}}};xt.label="@bud clean",xt.paths=[["@bud","clean"]],xt.usage={category:"@bud",description:"clean project artifacts",examples:[["clean project artifacts","yarn @bud clean"]]};var Nr=k(b("clipanion")),Ne=k(b("path"));var ea=(0,Ne.join)(N.config,"tsconfig.json"),ra=(0,Ne.join)(N.sources,"@repo/compile-kit/src/cjs"),St=class extends p{constructor(){super(...arguments);this.package=Nr.Option.String("package to transpile","all")}async execute(){await this.$(`yarn ts-node --project ${ea} ${ra} ${this.package}`)}};St.label="@bud compile",St.paths=[["@bud","compile"]],St.usage={category:"@bud",description:"compile a package",details:"compiles package with vercel/ncc",examples:[["compile {package name}","yarn @bud compile @roots/bud-react"]]};var Ju=`${P}/sources/@repo/compile-kit/src/cjs @roots/bud-support`,Et=class extends p{async execute(){await this.$("yarn @bud tsc"),await this.$("yarn @bud tsc --watch","yarn @bud test unit --verbose --watch","yarn @bud docs dev")}};Et.label="@bud dev",Et.paths=[["@bud","dev"]],Et.usage={category:"@bud",description:"develop project code",examples:[["run tsc, docusaurus & jest in watch mode","yarn @bud dev"]]};var Ct=class extends p{async execute(){await this.$("yarn workspace @repo/docs docusaurus start")}};Ct.label="@bud docs dev",Ct.paths=[["@bud","docs","dev"]],Ct.usage={category:"@bud",description:"develop docs",examples:[["develop docs","yarn @bud docs dev"]]};var ke=k(b("clipanion")),Ji=k(gt());var jt=class extends p{constructor(){super(...arguments);this.api=ke.Option.Boolean("-a,--api",!1,{description:"build api docs"});this.site=ke.Option.Boolean("-s,--site",!1,{description:"build site files"});this.readme=ke.Option.Boolean("-r,--readme",!1,{description:"build readme files"})}async execute(){let e=!this.site&&!this.readme&&!this.api;(e||this.api)&&await this.$("typedoc           --out ./sources/@repo/docs/content/dev/api           --tsconfig ./config/tsconfig.json           --entryPoints             ./sources/@roots/bud-framework/src/index.ts             ./sources/@roots/bud-framework/src/extension/index.ts             ./sources/@roots/bud-framework/src/methods/index.ts             ./sources/@roots/bud-framework/src/services/index.ts             ./sources/@roots/bud/src/index.ts             ./sources/@roots/bud/src/cli/index.ts             ./sources/@roots/bud-api/src/index.ts             ./sources/@roots/bud-build/src/index.ts             ./sources/@roots/bud-compiler/src/index.ts             ./sources/@roots/bud-hooks/src/index.ts             ./sources/@roots/bud-server/src/index.ts             ./sources/@roots/bud/src/index.ts             ./sources/@roots/sage/src/index.ts             ./sources/@roots/container/src/index.ts"),(e||this.site)&&(await this.$(`yarn node ${N.sources}/@repo/markdown-kit/compiled/cli-examples/index.js`),await this.$("yarn workspace @repo/docs run build"),await(0,Ji.copy)(`${N.sources}/@repo/docs/content/dev/api`,`${N.sources}/@repo/docs/build/dev/api`,{overwrite:!0})),(e||this.readme)&&await this.$(`yarn node ${N.sources}/@repo/markdown-kit/compiled/readme/index.js`)}};jt.label="@bud docs",jt.paths=[["@bud","docs"]],jt.usage={category:"@bud",description:"build docs and readme.",examples:[["build all","yarn @bud docs"],["build api documentation","yarn @bud docs --api"],["build api documentation and site files","yarn @bud docs --site"],["build readme files","yarn @bud docs --readme"]]};var Y=k(b("child_process")),ze=k(gt());var ie=class extends p{get hasPm2(){try{return(0,Y.execSync)("yarn pm2 -v"),!0}catch(e){return!1}}get hasVolta(){try{return(0,Y.execSync)("volta -v"),!0}catch(e){return!1}}get voltaList(){return(0,Y.execSync)("volta list").toString().trim().split(`
`).filter(e=>e.startsWith("runtime")||e.startsWith("package-manager")).map(e=>"- ".concat(e.split(" / ").shift().split(" (current").shift().replace("runtime ",""))).join(`
`)}get hasVerdaccio(){try{return(0,Y.execSync)("verdaccio -v"),!0}catch(e){return!1}}get head(){return(0,Y.execSync)("git rev-parse HEAD").toString().trim()}get branch(){return(0,Y.execSync)("git rev-parse --abbrev-ref HEAD").toString().trim()}get pm2(){return(0,Y.execSync)("yarn pm2 ls").toString().trim()}get verdaccio(){return(0,Y.execSync)("yarn verdaccio --version").toString().trim()}get logs(){return(0,Y.execSync)("yarn pm2 logs --out --lines 5 --nostream").toString().trim().split(`
`).splice(2).join(`
`)}get requiredNode(){return(0,ze.readJsonSync)(`${N.root}/package.json`).volta.node}get requiredNpm(){return(0,ze.readJsonSync)(`${N.root}/package.json`).volta.npm}get pm2Version(){return(0,Y.execSync)("yarn pm2 --version").toString().trim().replace("v","")}get nodeVersion(){return process.version.replace("v","")}get yarn(){return(0,Y.execSync)("yarn -v").toString().trim().replace("v","")}get npm(){return(0,Y.execSync)("npm -v").toString().trim().replace("v","")}get gitLog(){return(0,Y.execSync)(`git log --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)' origin..${this.branch}`).toString().trim()}async execute(){this.log(`    
 _               _
| |__  _   _  __| |
|  _ \\| | | |/ _  |
| |_) | |_| | (_| |
|_.__/ \\__._|\\__._|
`),this.hasVolta?process.stdout.write(`
\u26A1 toolchain:

${this.voltaList}
`):(process.stdout.write(`
installed:

- node@${this.nodeVersion} (required: ${this.requiredNode})
- yarn@${this.yarn} 
- npm@${this.npm} (required: ${this.requiredNpm})
${this.hasPm2?`- pm2@v${this.pm2Version}`:""}
${this.hasVerdaccio?`- verdaccio@${this.verdaccio}`:""}`),process.stdout.write("It is recommended to use volta when working with bud. See: https://volta.sh.\n        Easy install: `curl https://get.volta.sh | bash`\n")),this.nodeVersion!==this.requiredNode&&process.stdout.write(`
[31m\u2718[0m node version mismatch

Your node version is ${process.version} but ${this.requiredNode} is required.
Consider using volta to guarantee you are using the correct version of node.`),this.npm!==this.requiredNpm&&process.stdout.write(`
[31m\u2718[0m npm version mismatch

Your npm version is ${this.npm} but ${this.requiredNode} is required.`),this.hasPm2||process.stdout.write(`
[31m\u2718[0m pm2 missing

pm2 is required to be installed globally but was not found.

To install pm2, run any of the following:
  $ yarn @bud registry install
  $ volta install pm2
  $ npm install -g pm2
  $ cd $HOME && yarn global add pm2
`),this.hasVerdaccio||process.stdout.write(`
[31m\u2718[0m verdaccio missing

verdaccio is required to be installed globally but was not found.

To install verdaccio, run any of the following:
  $ yarn @bud registry install
  $ volta install verdaccio
  $ npm install -g verdaccio
  $ cd $HOME && yarn global add verdaccio
`),process.stdout.write(`
On branch \`${this.branch}\`:

${this.gitLog}
`),this.hasPm2&&this.hasVerdaccio&&process.stdout.write(`
pm2:

${this.pm2}

logs:

${this.logs}`)}};ie.label="@bud info",ie.paths=[["@bud","info"]];var Vi=k(b("clipanion"));var Pt=class extends p{constructor(){super(...arguments);this.passthrough=Vi.Option.Proxy({name:"eslint options"})}async execute(){await this.$(this.withPassthrough('yarn eslint "./sources/@roots/*/src/**/*" --config ./config/eslint.config.cjs --ignore-path config/.eslintignore --no-error-on-unmatched-pattern'))}};Pt.label="@bud lint",Pt.paths=[["@bud","lint"]],Pt.usage={category:"@bud",description:"run eslint",examples:[["run eslint","yarn @bud lint"]]};var qt=class extends p{async execute(){await this.$("yarn syncpack list-mismatches --config ./config/syncpack.config.cjs")}};qt.label="@bud lint dependencies",qt.paths=[["@bud","lint","dependencies"]],qt.usage={category:"@bud",description:"ensure packages are synced",examples:[["lint dependency versions","yarn @bud lint dependencies"]]};var Ft=class extends p{async execute(){await this.$("yarn workspaces foreach --no-private exec yarn run package-check")}};Ft.label="@bud lint exports",Ft.paths=[["@bud","lint","exports"]],Ft.usage={category:"@bud",description:"lint published package module exports",examples:[["lint package.json module exports","yarn @bud lint exports"]]};var Gi=k(b("clipanion"));var Tt=class extends p{constructor(){super(...arguments);this.fix=Gi.Option.Boolean("-f,--fix",!0,{description:"fix"})}async execute(){await this.$(`yarn prettier ./sources/@roots/*/src/**/* ${this.fix?"--write":"--check"} --config ./config/prettier.config.cjs --ignore-unknown --no-error-on-unmatched-pattern`)}};Tt.label="@bud lint format",Tt.paths=[["@bud","format"]],Tt.usage={category:"@bud",description:"Run coding style linters",examples:[["run prettier","yarn @bud format"],["run prettier (no fix)","yarn @bud format --no-fix"]]};var Nt=k(gt());var Dt=class extends p{async execute(){try{await(0,Nt.ensureFile)(`${P}/storage/yarn.lock`),await(0,Nt.ensureDir)(`${P}/storage/mocks`),await(0,Nt.remove)(`${P}/storage/mocks`),this.log("integration tests directory cleaned")}catch(e){}await this.tryExecuting("npm",["install","pm2","verdaccio"],{cwd:`${P}/storage`})}};Dt.label="@bud registry install",Dt.paths=[["@bud","registry","install"]],Dt.usage={category:"@bud",description:"install pm2 & verdaccio",examples:[["install pm2 and verdaccio","yarn @bud registry install"]]};var Ui=k(b("clipanion")),Yi=k(gt());var It=class extends p{constructor(){super(...arguments);this.passthrough=Ui.Option.Proxy({name:"pm2 options"})}async execute(){await(0,Yi.realpath)(`${P}/storage/node_modules/pm2/bin/pm2`)||await this.tryExecuting("yarn",["@bud","registry","install"]),await this.tryExecuting("node",[`${P}/storage/node_modules/pm2/bin/pm2`,...this.passthrough])}};It.label="@bud pm2",It.paths=[["@bud","pm2"]],It.usage={category:"@bud",description:"registry access",examples:[["work with pm2","yarn @bud pm2"]]};var Rt=class extends p{async execute(){await this.tryExecuting("yarn",["@bud","pm2","start","verdaccio","--","--config=./config/verdaccio/config.yaml"]),this.log("started verdaccio"),await this.tryExecuting("yarn",["config","set","unsafeHttpWhitelist","--json",'["0.0.0.0","localhost"]']),await this.tryExecuting("yarn",["config","set","npmPublishRegistry","http://0.0.0.0:4873"]),await this.tryExecuting("yarn",["config","set","npmRegistryServer","http://0.0.0.0:4873"]),await this.tryExecuting("yarn",["install"]),this.log("installed via registry"),await this.tryExecuting("yarn",["@bud","tsc","--force"]),await this.tryExecuting("yarn",["@bud","release","--tag","latest"]),this.log("released to registry")}};Rt.label="@bud registry start",Rt.paths=[["@bud","registry","start"]],Rt.usage={category:"@bud",description:"start verdaccio registry",examples:[["start verdaccio server","yarn @bud registry start"]]};var _e=k(b("@yarnpkg/shell")),oe=k(gt());var Mt=class extends p{async execute(){try{await this.tryExecuting("yarn",["@bud","pm2","stop","verdaccio"]),await this.tryExecuting("yarn",["@bud","pm2","delete","verdaccio"])}catch(e){}try{await(0,_e.execute)("yarn",["config","unset","unsafeHttpWhitelist"]),await(0,_e.execute)("yarn",["config","set","npmPublishRegistry","https://registry.npmjs.org"]),await(0,_e.execute)("yarn",["config","set","npmRegistryServer","https://registry.npmjs.org"])}catch(e){}try{await(0,oe.ensureDir)(`${process.cwd()}/storage/mocks`),await(0,oe.remove)(`${process.cwd()}/storage/mocks`),await(0,oe.remove)(`${process.cwd()}/storage/yarn.lock`),this.log("filesystem cleaned")}catch(e){}}};Mt.label="@bud registry stop",Mt.paths=[["@bud","registry","stop"]],Mt.usage={category:"@bud",description:"stop verdaccio registry",examples:[["stop verdaccio server","yarn @bud registry stop"]]};var Qe=k(b("clipanion")),Lt=k(gt()),Ki=k(b("semver"));var At=class extends p{constructor(){super(...arguments);this.version=Qe.Option.String("-v,--version",null,{description:"version"});this.tag=Qe.Option.String("-t,--tag",null,{description:"tag"})}isTaggedLatest(){return this.tag==="latest"}async execute(){await this.executeStep("preflight"),await this.executeStep("bump"),await this.executeStep("make"),await this.executeStep("publish")}async executeStep(e){try{if(!this[e])throw new Error(`${e} is not implemented`);await this[`${e}`]()}catch(r){this.err(`${e} failed: ${r.message}
`),this.err(r.stack),process.exit(1)}}async checkTagIsValid(){if(!this.tag){let[e]=(0,Ki.parse)(this.version).prerelease;this.tag=`${e!=null?e:"latest"}`}if(this.tag!=="latest"&&this.tag!=="next")throw new Error(`--tag [${this.tag}] must be 'latest' or 'next'`)}async wipeProxyDb(){try{this.log("Wiping previously published packages");let e=await(0,Lt.readJson)(`${P}/storage/.verdaccio-db.json`);e.list=[],await(0,Lt.writeJson)(`${P}/storage/.verdaccio-db.json`,e),await(0,Lt.emptyDir)(`${P}/storage/packages/@roots`)}catch(e){this.log("db/previously published packages could not be wiped.")}}async preflight(){await this.wipeProxyDb(),this.log("Installing"),await this.$("yarn install --immutable"),await this.checkTagIsValid()}async bump(){this.version&&await this.$(`yarn @bud version ${this.version}`)}async make(){await this.$("yarn @bud build")}async publish(){await this.$(`yarn workspaces foreach --no-private npm publish --access public --tag ${this.tag}`)}};At.label="@bud release",At.paths=[["@bud","release"]],At.usage={category:"@bud",description:"Do a release.",examples:[["Bump packages to x.y.z and publish","yarn @bud release --version x.y.z --tag latest"]]};var Xi=k(b("clipanion"));var Wt=class extends p{constructor(){super(...arguments);this.passthrough=Xi.Option.Proxy({name:"jest params"})}async execute(){var e;await this.tryExecuting("yarn",["node","--experimental-vm-modules","./node_modules/.bin/jest","--config","./config/jest.config.js",...(e=this.passthrough)!=null?e:[]])}};Wt.label="@bud test",Wt.paths=[["@bud","test","run"],["@bud","test"]],Wt.usage={category:"@bud",description:"run tests",examples:[["run e2e tests","yarn @bud test e2e"],["run unit tests","yarn @bud test unit"],["run integration tests","yarn @bud test integration"]]};var Bt=class extends p{async execute(){await this.tryExecuting("yarn",["@bud","registry","start"])}};Bt.label="@bud test setup",Bt.paths=[["@bud","test","setup"]],Bt.usage={category:"@bud",description:"setup integration/e2e tests",examples:[["run setup","yarn @bud test setup"]]};var Ht=class extends p{async execute(){await this.tryExecuting("yarn",["@bud","registry","stop"])}};Ht.label="@bud test teardown",Ht.paths=[["@bud","test","teardown"]],Ht.usage={category:"@bud",description:"teardown integration/e2e tests",examples:[["run teardown","yarn @bud test teardown"]]};var zi=k(b("clipanion")),Qi=k(b("path"));var Jt=class extends p{constructor(){super(...arguments);this.tsconfig=(0,Qi.join)(N.config,"tsconfig.json");this.passthrough=zi.Option.Proxy({name:"tsc options"})}async execute(){await this.$(this.withPassthrough(`yarn tsc -b ${this.tsconfig}`))}};Jt.label="@bud tsc",Jt.paths=[["@bud","tsc"],["@bud","build"]],Jt.usage={category:"@bud",description:"Run the typescript compiler",examples:[["run the typescript compiler","yarn @bud tsc"],["run the typescript compiler in watch mode","yarn @bud tsc --watch"],["run the typescript compiler with forced rebuild (no incremental compilation)","yarn @bud tsc --force"]]};var Zi=k(b("clipanion")),Ze=k(b("path"));var du=(0,Ze.join)(N.config,"tsconfig.json"),pu=(0,Ze.join)(N.sources,"@repo/compile-kit/src/vendor/index.ts"),Vt=class extends p{constructor(){super(...arguments);this.request=Zi.Option.Rest()}async execute(){await this.$(`yarn ts-node-esm --project ${du} ${pu} ${this.request}`)}};Vt.label="@bud vendor",Vt.paths=[["@bud","vendor"]],Vt.usage={category:"@bud",description:"vendor a package"};var to=k(b("clipanion"));var Gt=class extends p{constructor(){super(...arguments);this.version=to.Option.String()}async execute(){if(!this.version){let{version:e}=await this.getManifest();this.version=e}await this.$(`yarn workspaces foreach --no-private package set version ${this.version}`)}};Gt.label="@bud version",Gt.paths=[["@bud","version"]],Gt.usage={category:"@bud",description:"bump version of public packages",examples:[["Bump packages to x.y.z","yarn @bud version x.y.z"]]};var ue={Bud:Yt,Clean:xt,Compile:St,Dev:Et,Docs:jt,DocsDev:Ct,Format:Tt,Info:ie,Lint:Pt,LintDependencies:qt,LintExports:Ft,Pm2:It,RegistryInstall:Dt,RegistryStart:Rt,RegistryStop:Mt,Release:At,TestRun:Wt,TestSetup:Bt,TestTeardown:Ht,Tsc:Jt,Vendor:Vt,Version:Gt};var yu={hooks:{afterAllInstalled:()=>{process.stdout.write(`
What a great install, am I right?
`)}},commands:Object.values(ue)},hu=yu;return gu;})();
return plugin;
}
};
