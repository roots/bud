/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-bud",
factory: function (require) {
var plugin=(()=>{var wo=Object.create;var ee=Object.defineProperty;var ur=Object.getOwnPropertyDescriptor;var vo=Object.getOwnPropertyNames;var xo=Object.getPrototypeOf,So=Object.prototype.hasOwnProperty;var y=(t=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(t,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):t)(function(t){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+t+'" is not supported')});var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Co=(t,e)=>{for(var r in e)ee(t,r,{get:e[r],enumerable:!0})},lr=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of vo(e))!So.call(t,i)&&i!==r&&ee(t,i,{get:()=>e[i],enumerable:!(n=ur(e,i))||n.enumerable});return t};var ct=(t,e,r)=>(r=t!=null?wo(xo(t)):{},lr(e||!t||!t.__esModule?ee(r,"default",{value:t,enumerable:!0}):r,t)),Eo=t=>lr(ee({},"__esModule",{value:!0}),t),ut=(t,e,r,n)=>{for(var i=n>1?void 0:n?ur(e,r):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(n?s(e,r,i):s(i))||i);return n&&i&&ee(e,r,i),i};var pr=v((Mu,dr)=>{var _o="Expected a function",fr=NaN,ko="[object Symbol]",jo=/^\s+|\s+$/g,$o=/^[-+]0x[0-9a-f]+$/i,Oo=/^0b[01]+$/i,Po=/^0o[0-7]+$/i,qo=parseInt,Fo=typeof global=="object"&&global&&global.Object===Object&&global,To=typeof self=="object"&&self&&self.Object===Object&&self,No=Fo||To||Function("return this")(),Do=Object.prototype,Io=Do.toString,Mo=Math.max,Lo=Math.min,Ne=function(){return No.Date.now()};function Ao(t,e,r){var n,i,o,s,a,u,g=0,c=!1,l=!1,p=!0;if(typeof t!="function")throw new TypeError(_o);e=mr(e)||0,De(r)&&(c=!!r.leading,l="maxWait"in r,o=l?Mo(mr(r.maxWait)||0,e):o,p="trailing"in r?!!r.trailing:p);function f(w){var N=n,B=i;return n=i=void 0,g=w,s=t.apply(B,N),s}function b(w){return g=w,a=setTimeout(S,e),c?f(w):s}function E(w){var N=w-u,B=w-g,h=e-N;return l?Lo(h,o-B):h}function x(w){var N=w-u,B=w-g;return u===void 0||N>=e||N<0||l&&B>=o}function S(){var w=Ne();if(x(w))return F(w);a=setTimeout(S,E(w))}function F(w){return a=void 0,p&&n?f(w):(n=i=void 0,s)}function T(){a!==void 0&&clearTimeout(a),g=0,n=u=i=a=void 0}function rt(){return a===void 0?s:F(Ne())}function tt(){var w=Ne(),N=x(w);if(n=arguments,i=this,u=w,N){if(a===void 0)return b(u);if(l)return a=setTimeout(S,e),f(u)}return a===void 0&&(a=setTimeout(S,e)),s}return tt.cancel=T,tt.flush=rt,tt}function De(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Ro(t){return!!t&&typeof t=="object"}function Wo(t){return typeof t=="symbol"||Ro(t)&&Io.call(t)==ko}function mr(t){if(typeof t=="number")return t;if(Wo(t))return fr;if(De(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=De(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(jo,"");var r=Oo.test(t);return r||Po.test(t)?qo(t.slice(2),r?2:8):$o.test(t)?fr:+t}dr.exports=Ao});var wr=v((Lu,br)=>{var gr="Expected a function",yr=NaN,Bo="[object Symbol]",Jo=/^\s+|\s+$/g,Ho=/^[-+]0x[0-9a-f]+$/i,Go=/^0b[01]+$/i,Yo=/^0o[0-7]+$/i,Uo=parseInt,Ko=typeof global=="object"&&global&&global.Object===Object&&global,Vo=typeof self=="object"&&self&&self.Object===Object&&self,Xo=Ko||Vo||Function("return this")(),zo=Object.prototype,Qo=zo.toString,Zo=Math.max,ts=Math.min,Ie=function(){return Xo.Date.now()};function es(t,e,r){var n,i,o,s,a,u,g=0,c=!1,l=!1,p=!0;if(typeof t!="function")throw new TypeError(gr);e=hr(e)||0,de(r)&&(c=!!r.leading,l="maxWait"in r,o=l?Zo(hr(r.maxWait)||0,e):o,p="trailing"in r?!!r.trailing:p);function f(w){var N=n,B=i;return n=i=void 0,g=w,s=t.apply(B,N),s}function b(w){return g=w,a=setTimeout(S,e),c?f(w):s}function E(w){var N=w-u,B=w-g,h=e-N;return l?ts(h,o-B):h}function x(w){var N=w-u,B=w-g;return u===void 0||N>=e||N<0||l&&B>=o}function S(){var w=Ie();if(x(w))return F(w);a=setTimeout(S,E(w))}function F(w){return a=void 0,p&&n?f(w):(n=i=void 0,s)}function T(){a!==void 0&&clearTimeout(a),g=0,n=u=i=a=void 0}function rt(){return a===void 0?s:F(Ie())}function tt(){var w=Ie(),N=x(w);if(n=arguments,i=this,u=w,N){if(a===void 0)return b(u);if(l)return a=setTimeout(S,e),f(u)}return a===void 0&&(a=setTimeout(S,e)),s}return tt.cancel=T,tt.flush=rt,tt}function rs(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(gr);return de(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),es(t,e,{leading:n,maxWait:e,trailing:i})}function de(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function ns(t){return!!t&&typeof t=="object"}function is(t){return typeof t=="symbol"||ns(t)&&Qo.call(t)==Bo}function hr(t){if(typeof t=="number")return t;if(is(t))return yr;if(de(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=de(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Jo,"");var r=Go.test(t);return r||Yo.test(t)?Uo(t.slice(2),r?2:8):Ho.test(t)?yr:+t}br.exports=rs});var Er=v((Au,Cr)=>{var os="Expected a function",vr=1/0,ss=17976931348623157e292,xr=0/0,as="[object Symbol]",cs=/^\s+|\s+$/g,us=/^[-+]0x[0-9a-f]+$/i,ls=/^0b[01]+$/i,fs=/^0o[0-7]+$/i,ms=parseInt,ds=Object.prototype,ps=ds.toString;function ys(t,e){var r;if(typeof e!="function")throw new TypeError(os);return t=vs(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}function hs(t){return ys(2,t)}function Sr(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function gs(t){return!!t&&typeof t=="object"}function bs(t){return typeof t=="symbol"||gs(t)&&ps.call(t)==as}function ws(t){if(!t)return t===0?t:0;if(t=xs(t),t===vr||t===-vr){var e=t<0?-1:1;return e*ss}return t===t?t:0}function vs(t){var e=ws(t),r=e%1;return e===e?r?e-r:e:0}function xs(t){if(typeof t=="number")return t;if(bs(t))return xr;if(Sr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Sr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(cs,"");var r=ls.test(t);return r||fs.test(t)?ms(t.slice(2),r?2:8):us.test(t)?xr:+t}Cr.exports=hs});var Tr=v((Ru,Fr)=>{var Ss="Expected a function",kr="__lodash_hash_undefined__",Cs="[object Function]",Es="[object GeneratorFunction]",_s=/[\\^$.*+?()[\]{}|]/g,ks=/^\[object .+?Constructor\]$/,js=typeof global=="object"&&global&&global.Object===Object&&global,$s=typeof self=="object"&&self&&self.Object===Object&&self,jr=js||$s||Function("return this")();function Os(t,e){return t==null?void 0:t[e]}function Ps(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var qs=Array.prototype,Fs=Function.prototype,$r=Object.prototype,Me=jr["__core-js_shared__"],_r=function(){var t=/[^.]+$/.exec(Me&&Me.keys&&Me.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Or=Fs.toString,Le=$r.hasOwnProperty,Ts=$r.toString,Ns=RegExp("^"+Or.call(Le).replace(_s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ds=qs.splice,Is=Pr(jr,"Map"),re=Pr(Object,"create");function bt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ms(){this.__data__=re?re(null):{}}function Ls(t){return this.has(t)&&delete this.__data__[t]}function As(t){var e=this.__data__;if(re){var r=e[t];return r===kr?void 0:r}return Le.call(e,t)?e[t]:void 0}function Rs(t){var e=this.__data__;return re?e[t]!==void 0:Le.call(e,t)}function Ws(t,e){var r=this.__data__;return r[t]=re&&e===void 0?kr:e,this}bt.prototype.clear=Ms;bt.prototype.delete=Ls;bt.prototype.get=As;bt.prototype.has=Rs;bt.prototype.set=Ws;function Gt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Bs(){this.__data__=[]}function Js(t){var e=this.__data__,r=pe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Ds.call(e,r,1),!0}function Hs(t){var e=this.__data__,r=pe(e,t);return r<0?void 0:e[r][1]}function Gs(t){return pe(this.__data__,t)>-1}function Ys(t,e){var r=this.__data__,n=pe(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}Gt.prototype.clear=Bs;Gt.prototype.delete=Js;Gt.prototype.get=Hs;Gt.prototype.has=Gs;Gt.prototype.set=Ys;function wt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Us(){this.__data__={hash:new bt,map:new(Is||Gt),string:new bt}}function Ks(t){return ye(this,t).delete(t)}function Vs(t){return ye(this,t).get(t)}function Xs(t){return ye(this,t).has(t)}function zs(t,e){return ye(this,t).set(t,e),this}wt.prototype.clear=Us;wt.prototype.delete=Ks;wt.prototype.get=Vs;wt.prototype.has=Xs;wt.prototype.set=zs;function pe(t,e){for(var r=t.length;r--;)if(ra(t[r][0],e))return r;return-1}function Qs(t){if(!qr(t)||ta(t))return!1;var e=na(t)||Ps(t)?Ns:ks;return e.test(ea(t))}function ye(t,e){var r=t.__data__;return Zs(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Pr(t,e){var r=Os(t,e);return Qs(r)?r:void 0}function Zs(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function ta(t){return!!_r&&_r in t}function ea(t){if(t!=null){try{return Or.call(t)}catch{}try{return t+""}catch{}}return""}function Ae(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(Ss);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(Ae.Cache||wt),r}Ae.Cache=wt;function ra(t,e){return t===e||t!==t&&e!==e}function na(t){var e=qr(t)?Ts.call(t):"";return e==Cs||e==Es}function qr(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}Fr.exports=Ae});var Dr=v(V=>{"use strict";Object.defineProperty(V,"__esModule",{value:!0});function ia(t,e,r){let n=r.value;return r.value=function(...i){let o=performance.now(),s=n.apply(this,i),a=performance.now();return console.log(`Call to ${e} took ${(a-o).toFixed(2)} milliseconds.`),s},r}function oa(t=0){return function(e,r,n){let i=n.value;return n.value=function(...o){setTimeout(()=>{i.apply(this,o)},t)},n}}var sa=pr();function aa(t=0,e={}){return function(r,n,i){let o=new WeakMap,s=i.value;return i.value=function(...a){let u=o.get(this);u||(u=sa(s,t,e).bind(this),o.set(this,u)),u(...a)},i}}var ca=wr();function ua(t=0,e={}){return function(r,n,i){let o=i.value;return i.value=ca(o,t,e),i}}var la=Er();function fa(t,e,r){let n=r.value;return r.value=la(n),r}function ma(t){return function(e){t.forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(n=>{e.prototype[n]=r.prototype[n]})})}}var da=Tr();function pa(t){return function(e,r,n){return n.value=da(n.value,t),n}}function ya(t,e,r){let n=r.value;if(typeof n!="function")throw new Error(`@autobind decorator can only be applied to methods not: ${typeof n}`);let i=!1;return{configurable:!0,get(){if(i||this===t.prototype||this.hasOwnProperty(e)||typeof n!="function")return n;let o=n.bind(this);return i=!0,Object.defineProperty(this,e,{configurable:!0,get(){return o},set(s){n=s,delete this[e]}}),i=!1,o},set(o){n=o}}}var Nr=(t,e)=>t<e?-1:t>e?1:0;function ha(t,e={isDescending:!0,type:"string"}){let r=Symbol();return function(n,i,o){Object.defineProperty(n,i,{set:function(a){if(!a||!Array.isArray(a))throw`Value of property ${i} is not a valid array!`;let u=e.type==="date";t?this[r]=a.sort(function(g,c){let l=u?new Date(g[t]):g[t],p=u?new Date(c[t]):c[t],f=Nr(l,p);return e.isDescending?f*-1:f}):this[r]=a.sort(function(g,c){let l=u?new Date(g):g,p=u?new Date(c):c,f=Nr(l,p);return e.isDescending?f*-1:f})},get:function(){return this[r]}})}}V.Mixin=ma;V.SortBy=ha;V.bind=ya;V.debounce=aa;V.delay=oa;V.measure=ia;V.memo=pa;V.once=fa;V.throttle=ua});var Lr=v((Vu,Mr)=>{Mr.exports={name:"bud.js",description:"\u26A1\uFE0F Lightning fast frontend build tools combining the best parts of Symfony Encore and Laravel Mix",logo:"https://cdn.roots.io/app/uploads/logo-bud.svg",card:"https://bud.js.org/img/bud.js.png",url:{discourse:"https://discourse.roots.io/c/bud/24",docs:"https://bud.js.org",git:"git@github.com:roots/bud",web:"https://github.com/roots/bud"},organization:{name:"Roots Software Foundation LLC",site:"https://roots.io",twitter:"https://twitter.com/rootswp",favicon:"https://roots.io/favicon.ico"},contributors:{kellymears:{type:["\u{1F680} steward","\u{1F4BB} dev","\u{1F4D5} docs"]},qwp6t:{type:["\u{1F680} steward","\u{1F4BB} dev","\u{1F4D5} docs"]},retlehs:{type:["\u{1F680} steward","\u{1F4D5} docs"]},swalkinshaw:{type:["\u{1F680} steward","\u{1F4BB} dev","\u{1F4D5} docs"]},joshuafredrickson:{type:["\u{1F4BB} dev","\u{1F4D5} docs"]},alwaysblank:{type:["\u{1F680} steward","\u{1F4D5} docs"]},alexdanylyschyn:{type:["\u{1F4BB} dev"]},clayrisser:{type:["\u{1F4D5} docs"]},catgofire:{type:["\u{1F4D5} docs"]},unlocdavid:{type:["\u{1F4D5} docs"]},robrecord:{type:["\u{1F4D5} docs"]}},sponsors:[{image:"https://cdn.roots.io/app/uploads/km-digital.svg",title:"KM Digital",url:"https://k-m.com/"},{image:"https://cdn.roots.io/app/uploads/carrot.svg",title:"Carrot",url:"https://carrot.com/"},{image:"https://cdn.roots.io/app/uploads/wordpress.svg",title:"WordPress.com",url:"https://wordpress.com/"},{image:"https://cdn.roots.io/app/uploads/pantheon.svg",title:"Pantheon",url:"https://pantheon.io/"}],packages:{core:["@roots/bud","@roots/bud-api","@roots/bud-build","@roots/bud-cache","@roots/bud-compiler","@roots/bud-dashboard","@roots/bud-extensions","@roots/bud-framework","@roots/bud-hooks","@roots/bud-server"],extension:["@roots/bud-babel","@roots/bud-compress","@roots/bud-criticalcss","@roots/bud-emotion","@roots/bud-entrypoints","@roots/bud-esbuild","@roots/bud-eslint","@roots/bud-imagemin","@roots/bud-mdx","@roots/bud-postcss","@roots/bud-preset-recommend","@roots/bud-preset-wordpress","@roots/bud-prettier","@roots/bud-purgecss","@roots/bud-react","@roots/bud-sass","@roots/bud-solid","@roots/bud-stylelint","@roots/bud-swc","@roots/bud-tailwindcss","@roots/bud-terser","@roots/bud-typescript","@roots/bud-vue","@roots/bud-wordpress-dependencies","@roots/bud-wordpress-externals","@roots/bud-wordpress-manifests","@roots/sage"],library:["@roots/browserslist-config","@roots/bud-client","@roots/container","@roots/critical-css-webpack-plugin","@roots/dependencies","@roots/entrypoints-webpack-plugin","@roots/eslint-config","@roots/filesystem","@roots/merged-manifest-webpack-plugin","@roots/wordpress-dependencies-webpack-plugin","@roots/wordpress-externals-webpack-plugin","@roots/wordpress-hmr"]}}});var G=v(Be=>{"use strict";Be.fromCallback=function(t){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")t.apply(this,e);else return new Promise((r,n)=>{t.call(this,...e,(i,o)=>i!=null?n(i):r(o))})},"name",{value:t.name})};Be.fromPromise=function(t){return Object.defineProperty(function(...e){let r=e[e.length-1];if(typeof r!="function")return t.apply(this,e);t.apply(this,e.slice(0,-1)).then(n=>r(null,n),r)},"name",{value:t.name})}});var Gr=v((dl,Hr)=>{var ft=y("constants"),wa=process.cwd,ge=null,va=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return ge||(ge=wa.call(process)),ge};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Je=process.chdir,process.chdir=function(t){ge=null,Je.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Je));var Je;Hr.exports=xa;function xa(t){ft.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=o(t.chown),t.fchown=o(t.fchown),t.lchown=o(t.lchown),t.chmod=n(t.chmod),t.fchmod=n(t.fchmod),t.lchmod=n(t.lchmod),t.chownSync=s(t.chownSync),t.fchownSync=s(t.fchownSync),t.lchownSync=s(t.lchownSync),t.chmodSync=i(t.chmodSync),t.fchmodSync=i(t.fchmodSync),t.lchmodSync=i(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=u(t.statSync),t.fstatSync=u(t.fstatSync),t.lstatSync=u(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(c,l,p){p&&process.nextTick(p)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(c,l,p,f){f&&process.nextTick(f)},t.lchownSync=function(){}),va==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:function(c){function l(p,f,b){var E=Date.now(),x=0;c(p,f,function S(F){if(F&&(F.code==="EACCES"||F.code==="EPERM")&&Date.now()-E<6e4){setTimeout(function(){t.stat(f,function(T,rt){T&&T.code==="ENOENT"?c(p,f,S):b(F)})},x),x<100&&(x+=10);return}b&&b(F)})}return Object.setPrototypeOf&&Object.setPrototypeOf(l,c),l}(t.rename)),t.read=typeof t.read!="function"?t.read:function(c){function l(p,f,b,E,x,S){var F;if(S&&typeof S=="function"){var T=0;F=function(rt,tt,w){if(rt&&rt.code==="EAGAIN"&&T<10)return T++,c.call(t,p,f,b,E,x,F);S.apply(this,arguments)}}return c.call(t,p,f,b,E,x,F)}return Object.setPrototypeOf&&Object.setPrototypeOf(l,c),l}(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:function(c){return function(l,p,f,b,E){for(var x=0;;)try{return c.call(t,l,p,f,b,E)}catch(S){if(S.code==="EAGAIN"&&x<10){x++;continue}throw S}}}(t.readSync);function e(c){c.lchmod=function(l,p,f){c.open(l,ft.O_WRONLY|ft.O_SYMLINK,p,function(b,E){if(b){f&&f(b);return}c.fchmod(E,p,function(x){c.close(E,function(S){f&&f(x||S)})})})},c.lchmodSync=function(l,p){var f=c.openSync(l,ft.O_WRONLY|ft.O_SYMLINK,p),b=!0,E;try{E=c.fchmodSync(f,p),b=!1}finally{if(b)try{c.closeSync(f)}catch{}else c.closeSync(f)}return E}}function r(c){ft.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(l,p,f,b){c.open(l,ft.O_SYMLINK,function(E,x){if(E){b&&b(E);return}c.futimes(x,p,f,function(S){c.close(x,function(F){b&&b(S||F)})})})},c.lutimesSync=function(l,p,f){var b=c.openSync(l,ft.O_SYMLINK),E,x=!0;try{E=c.futimesSync(b,p,f),x=!1}finally{if(x)try{c.closeSync(b)}catch{}else c.closeSync(b)}return E}):c.futimes&&(c.lutimes=function(l,p,f,b){b&&process.nextTick(b)},c.lutimesSync=function(){})}function n(c){return c&&function(l,p,f){return c.call(t,l,p,function(b){g(b)&&(b=null),f&&f.apply(this,arguments)})}}function i(c){return c&&function(l,p){try{return c.call(t,l,p)}catch(f){if(!g(f))throw f}}}function o(c){return c&&function(l,p,f,b){return c.call(t,l,p,f,function(E){g(E)&&(E=null),b&&b.apply(this,arguments)})}}function s(c){return c&&function(l,p,f){try{return c.call(t,l,p,f)}catch(b){if(!g(b))throw b}}}function a(c){return c&&function(l,p,f){typeof p=="function"&&(f=p,p=null);function b(E,x){x&&(x.uid<0&&(x.uid+=4294967296),x.gid<0&&(x.gid+=4294967296)),f&&f.apply(this,arguments)}return p?c.call(t,l,p,b):c.call(t,l,b)}}function u(c){return c&&function(l,p){var f=p?c.call(t,l,p):c.call(t,l);return f&&(f.uid<0&&(f.uid+=4294967296),f.gid<0&&(f.gid+=4294967296)),f}}function g(c){if(!c||c.code==="ENOSYS")return!0;var l=!process.getuid||process.getuid()!==0;return!!(l&&(c.code==="EINVAL"||c.code==="EPERM"))}}});var Kr=v((pl,Ur)=>{var Yr=y("stream").Stream;Ur.exports=Sa;function Sa(t){return{ReadStream:e,WriteStream:r};function e(n,i){if(!(this instanceof e))return new e(n,i);Yr.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var s=Object.keys(i),a=0,u=s.length;a<u;a++){var g=s[a];this[g]=i[g]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}t.open(this.path,this.flags,this.mode,function(c,l){if(c){o.emit("error",c),o.readable=!1;return}o.fd=l,o.emit("open",l),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Yr.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var u=o[s];this[u]=i[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Xr=v((yl,Vr)=>{"use strict";Vr.exports=Ea;var Ca=Object.getPrototypeOf||function(t){return t.__proto__};function Ea(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:Ca(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}});var J=v((hl,Ye)=>{var P=y("fs"),_a=Gr(),ka=Kr(),ja=Xr(),be=y("util"),R,ve;typeof Symbol=="function"&&typeof Symbol.for=="function"?(R=Symbol.for("graceful-fs.queue"),ve=Symbol.for("graceful-fs.previous")):(R="___graceful-fs.queue",ve="___graceful-fs.previous");function $a(){}function Zr(t,e){Object.defineProperty(t,R,{get:function(){return e}})}var _t=$a;be.debuglog?_t=be.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(_t=function(){var t=be.format.apply(be,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});P[R]||(zr=global[R]||[],Zr(P,zr),P.close=function(t){function e(r,n){return t.call(P,r,function(i){i||Qr(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(e,ve,{value:t}),e}(P.close),P.closeSync=function(t){function e(r){t.apply(P,arguments),Qr()}return Object.defineProperty(e,ve,{value:t}),e}(P.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){_t(P[R]),y("assert").equal(P[R].length,0)}));var zr;global[R]||Zr(global,P[R]);Ye.exports=He(ja(P));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!P.__patched&&(Ye.exports=He(P),P.__patched=!0);function He(t){_a(t),t.gracefulify=He,t.createReadStream=tt,t.createWriteStream=w;var e=t.readFile;t.readFile=r;function r(h,_,C){return typeof _=="function"&&(C=_,_=null),M(h,_,C);function M(L,D,O,q){return e(L,D,function(j){j&&(j.code==="EMFILE"||j.code==="ENFILE")?Kt([M,[L,D,O],j,q||Date.now(),Date.now()]):typeof O=="function"&&O.apply(this,arguments)})}}var n=t.writeFile;t.writeFile=i;function i(h,_,C,M){return typeof C=="function"&&(M=C,C=null),L(h,_,C,M);function L(D,O,q,j,A){return n(D,O,q,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?Kt([L,[D,O,q,j],$,A||Date.now(),Date.now()]):typeof j=="function"&&j.apply(this,arguments)})}}var o=t.appendFile;o&&(t.appendFile=s);function s(h,_,C,M){return typeof C=="function"&&(M=C,C=null),L(h,_,C,M);function L(D,O,q,j,A){return o(D,O,q,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?Kt([L,[D,O,q,j],$,A||Date.now(),Date.now()]):typeof j=="function"&&j.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=u);function u(h,_,C,M){return typeof C=="function"&&(M=C,C=0),L(h,_,C,M);function L(D,O,q,j,A){return a(D,O,q,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?Kt([L,[D,O,q,j],$,A||Date.now(),Date.now()]):typeof j=="function"&&j.apply(this,arguments)})}}var g=t.readdir;t.readdir=l;var c=/^v[0-5]\./;function l(h,_,C){typeof _=="function"&&(C=_,_=null);var M=c.test(process.version)?function(O,q,j,A){return g(O,L(O,q,j,A))}:function(O,q,j,A){return g(O,q,L(O,q,j,A))};return M(h,_,C);function L(D,O,q,j){return function(A,$){A&&(A.code==="EMFILE"||A.code==="ENFILE")?Kt([M,[D,O,q],A,j||Date.now(),Date.now()]):($&&$.sort&&$.sort(),typeof q=="function"&&q.call(this,A,$))}}}if(process.version.substr(0,4)==="v0.8"){var p=ka(t);S=p.ReadStream,T=p.WriteStream}var f=t.ReadStream;f&&(S.prototype=Object.create(f.prototype),S.prototype.open=F);var b=t.WriteStream;b&&(T.prototype=Object.create(b.prototype),T.prototype.open=rt),Object.defineProperty(t,"ReadStream",{get:function(){return S},set:function(h){S=h},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return T},set:function(h){T=h},enumerable:!0,configurable:!0});var E=S;Object.defineProperty(t,"FileReadStream",{get:function(){return E},set:function(h){E=h},enumerable:!0,configurable:!0});var x=T;Object.defineProperty(t,"FileWriteStream",{get:function(){return x},set:function(h){x=h},enumerable:!0,configurable:!0});function S(h,_){return this instanceof S?(f.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function F(){var h=this;B(h.path,h.flags,h.mode,function(_,C){_?(h.autoClose&&h.destroy(),h.emit("error",_)):(h.fd=C,h.emit("open",C),h.read())})}function T(h,_){return this instanceof T?(b.apply(this,arguments),this):T.apply(Object.create(T.prototype),arguments)}function rt(){var h=this;B(h.path,h.flags,h.mode,function(_,C){_?(h.destroy(),h.emit("error",_)):(h.fd=C,h.emit("open",C))})}function tt(h,_){return new t.ReadStream(h,_)}function w(h,_){return new t.WriteStream(h,_)}var N=t.open;t.open=B;function B(h,_,C,M){return typeof C=="function"&&(M=C,C=null),L(h,_,C,M);function L(D,O,q,j,A){return N(D,O,q,function($,Du){$&&($.code==="EMFILE"||$.code==="ENFILE")?Kt([L,[D,O,q,j],$,A||Date.now(),Date.now()]):typeof j=="function"&&j.apply(this,arguments)})}}return t}function Kt(t){_t("ENQUEUE",t[0].name,t[1]),P[R].push(t),Ge()}var we;function Qr(){for(var t=Date.now(),e=0;e<P[R].length;++e)P[R][e].length>2&&(P[R][e][3]=t,P[R][e][4]=t);Ge()}function Ge(){if(clearTimeout(we),we=void 0,P[R].length!==0){var t=P[R].shift(),e=t[0],r=t[1],n=t[2],i=t[3],o=t[4];if(i===void 0)_t("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-i>=6e4){_t("TIMEOUT",e.name,r);var s=r.pop();typeof s=="function"&&s.call(null,n)}else{var a=Date.now()-o,u=Math.max(o-i,1),g=Math.min(u*1.2,100);a>=g?(_t("RETRY",e.name,r),e.apply(null,r.concat([i]))):P[R].push(t)}we===void 0&&(we=setTimeout(Ge,0))}}});var kt=v(mt=>{"use strict";var tn=G().fromCallback,Y=J(),Oa=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(t=>typeof Y[t]=="function");Object.assign(mt,Y);Oa.forEach(t=>{mt[t]=tn(Y[t])});mt.exists=function(t,e){return typeof e=="function"?Y.exists(t,e):new Promise(r=>Y.exists(t,r))};mt.read=function(t,e,r,n,i,o){return typeof o=="function"?Y.read(t,e,r,n,i,o):new Promise((s,a)=>{Y.read(t,e,r,n,i,(u,g,c)=>{if(u)return a(u);s({bytesRead:g,buffer:c})})})};mt.write=function(t,e,...r){return typeof r[r.length-1]=="function"?Y.write(t,e,...r):new Promise((n,i)=>{Y.write(t,e,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffer:a})})})};typeof Y.writev=="function"&&(mt.writev=function(t,e,...r){return typeof r[r.length-1]=="function"?Y.writev(t,e,...r):new Promise((n,i)=>{Y.writev(t,e,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffers:a})})})});typeof Y.realpath.native=="function"?mt.realpath.native=tn(Y.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var rn=v((bl,en)=>{"use strict";var Pa=y("path");en.exports.checkPath=function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(Pa.parse(e).root,""))){let n=new Error(`Path contains invalid characters: ${e}`);throw n.code="EINVAL",n}}});var an=v((wl,Ue)=>{"use strict";var nn=kt(),{checkPath:on}=rn(),sn=t=>{let e={mode:511};return typeof t=="number"?t:{...e,...t}.mode};Ue.exports.makeDir=async(t,e)=>(on(t),nn.mkdir(t,{mode:sn(e),recursive:!0}));Ue.exports.makeDirSync=(t,e)=>(on(t),nn.mkdirSync(t,{mode:sn(e),recursive:!0}))});var Q=v((vl,cn)=>{"use strict";var qa=G().fromPromise,{makeDir:Fa,makeDirSync:Ke}=an(),Ve=qa(Fa);cn.exports={mkdirs:Ve,mkdirsSync:Ke,mkdirp:Ve,mkdirpSync:Ke,ensureDir:Ve,ensureDirSync:Ke}});var dt=v((xl,ln)=>{"use strict";var Ta=G().fromPromise,un=kt();function Na(t){return un.access(t).then(()=>!0).catch(()=>!1)}ln.exports={pathExists:Ta(Na),pathExistsSync:un.existsSync}});var Xe=v((Sl,fn)=>{"use strict";var Vt=J();function Da(t,e,r,n){Vt.open(t,"r+",(i,o)=>{if(i)return n(i);Vt.futimes(o,e,r,s=>{Vt.close(o,a=>{n&&n(s||a)})})})}function Ia(t,e,r){let n=Vt.openSync(t,"r+");return Vt.futimesSync(n,e,r),Vt.closeSync(n)}fn.exports={utimesMillis:Da,utimesMillisSync:Ia}});var jt=v((Cl,pn)=>{"use strict";var Xt=kt(),I=y("path"),Ma=y("util");function La(t,e,r){let n=r.dereference?i=>Xt.stat(i,{bigint:!0}):i=>Xt.lstat(i,{bigint:!0});return Promise.all([n(t),n(e).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function Aa(t,e,r){let n,i=r.dereference?s=>Xt.statSync(s,{bigint:!0}):s=>Xt.lstatSync(s,{bigint:!0}),o=i(t);try{n=i(e)}catch(s){if(s.code==="ENOENT")return{srcStat:o,destStat:null};throw s}return{srcStat:o,destStat:n}}function Ra(t,e,r,n,i){Ma.callbackify(La)(t,e,n,(o,s)=>{if(o)return i(o);let{srcStat:a,destStat:u}=s;if(u){if(ne(a,u)){let g=I.basename(t),c=I.basename(e);return r==="move"&&g!==c&&g.toLowerCase()===c.toLowerCase()?i(null,{srcStat:a,destStat:u,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!u.isDirectory())return i(new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`));if(!a.isDirectory()&&u.isDirectory())return i(new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`))}return a.isDirectory()&&ze(t,e)?i(new Error(xe(t,e,r))):i(null,{srcStat:a,destStat:u})})}function Wa(t,e,r,n){let{srcStat:i,destStat:o}=Aa(t,e,n);if(o){if(ne(i,o)){let s=I.basename(t),a=I.basename(e);if(r==="move"&&s!==a&&s.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(i.isDirectory()&&ze(t,e))throw new Error(xe(t,e,r));return{srcStat:i,destStat:o}}function mn(t,e,r,n,i){let o=I.resolve(I.dirname(t)),s=I.resolve(I.dirname(r));if(s===o||s===I.parse(s).root)return i();Xt.stat(s,{bigint:!0},(a,u)=>a?a.code==="ENOENT"?i():i(a):ne(e,u)?i(new Error(xe(t,r,n))):mn(t,e,s,n,i))}function dn(t,e,r,n){let i=I.resolve(I.dirname(t)),o=I.resolve(I.dirname(r));if(o===i||o===I.parse(o).root)return;let s;try{s=Xt.statSync(o,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(ne(e,s))throw new Error(xe(t,r,n));return dn(t,e,o,n)}function ne(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function ze(t,e){let r=I.resolve(t).split(I.sep).filter(i=>i),n=I.resolve(e).split(I.sep).filter(i=>i);return r.reduce((i,o,s)=>i&&n[s]===o,!0)}function xe(t,e,r){return`Cannot ${r} '${t}' to a subdirectory of itself, '${e}'.`}pn.exports={checkPaths:Ra,checkPathsSync:Wa,checkParentPaths:mn,checkParentPathsSync:dn,isSrcSubdir:ze,areIdentical:ne}});var Sn=v((El,xn)=>{"use strict";var U=J(),ie=y("path"),Ba=Q().mkdirs,Ja=dt().pathExists,Ha=Xe().utimesMillis,oe=jt();function Ga(t,e,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),oe.checkPaths(t,e,"copy",r,(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:a}=o;oe.checkParentPaths(t,s,e,"copy",u=>u?n(u):r.filter?gn(yn,a,t,e,r,n):yn(a,t,e,r,n))})}function yn(t,e,r,n,i){let o=ie.dirname(r);Ja(o,(s,a)=>{if(s)return i(s);if(a)return Se(t,e,r,n,i);Ba(o,u=>u?i(u):Se(t,e,r,n,i))})}function gn(t,e,r,n,i,o){Promise.resolve(i.filter(r,n)).then(s=>s?t(e,r,n,i,o):o(),s=>o(s))}function Ya(t,e,r,n,i){return n.filter?gn(Se,t,e,r,n,i):Se(t,e,r,n,i)}function Se(t,e,r,n,i){(n.dereference?U.stat:U.lstat)(e,(s,a)=>s?i(s):a.isDirectory()?Za(a,t,e,r,n,i):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?Ua(a,t,e,r,n,i):a.isSymbolicLink()?rc(t,e,r,n,i):a.isSocket()?i(new Error(`Cannot copy a socket file: ${e}`)):a.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${e}`)):i(new Error(`Unknown file: ${e}`)))}function Ua(t,e,r,n,i,o){return e?Ka(t,r,n,i,o):bn(t,r,n,i,o)}function Ka(t,e,r,n,i){if(n.overwrite)U.unlink(r,o=>o?i(o):bn(t,e,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function bn(t,e,r,n,i){U.copyFile(e,r,o=>o?i(o):n.preserveTimestamps?Va(t.mode,e,r,i):Ce(r,t.mode,i))}function Va(t,e,r,n){return Xa(t)?za(r,t,i=>i?n(i):hn(t,e,r,n)):hn(t,e,r,n)}function Xa(t){return(t&128)===0}function za(t,e,r){return Ce(t,e|128,r)}function hn(t,e,r,n){Qa(e,r,i=>i?n(i):Ce(r,t,n))}function Ce(t,e,r){return U.chmod(t,e,r)}function Qa(t,e,r){U.stat(t,(n,i)=>n?r(n):Ha(e,i.atime,i.mtime,r))}function Za(t,e,r,n,i,o){return e?wn(r,n,i,o):tc(t.mode,r,n,i,o)}function tc(t,e,r,n,i){U.mkdir(r,o=>{if(o)return i(o);wn(e,r,n,s=>s?i(s):Ce(r,t,i))})}function wn(t,e,r,n){U.readdir(t,(i,o)=>i?n(i):vn(o,t,e,r,n))}function vn(t,e,r,n,i){let o=t.pop();return o?ec(t,o,e,r,n,i):i()}function ec(t,e,r,n,i,o){let s=ie.join(r,e),a=ie.join(n,e);oe.checkPaths(s,a,"copy",i,(u,g)=>{if(u)return o(u);let{destStat:c}=g;Ya(c,s,a,i,l=>l?o(l):vn(t,r,n,i,o))})}function rc(t,e,r,n,i){U.readlink(e,(o,s)=>{if(o)return i(o);if(n.dereference&&(s=ie.resolve(process.cwd(),s)),t)U.readlink(r,(a,u)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?U.symlink(s,r,i):i(a):(n.dereference&&(u=ie.resolve(process.cwd(),u)),oe.isSrcSubdir(s,u)?i(new Error(`Cannot copy '${s}' to a subdirectory of itself, '${u}'.`)):t.isDirectory()&&oe.isSrcSubdir(u,s)?i(new Error(`Cannot overwrite '${u}' with '${s}'.`)):nc(s,r,i)));else return U.symlink(s,r,i)})}function nc(t,e,r){U.unlink(e,n=>n?r(n):U.symlink(t,e,r))}xn.exports=Ga});var jn=v((_l,kn)=>{"use strict";var W=J(),se=y("path"),ic=Q().mkdirsSync,oc=Xe().utimesMillisSync,ae=jt();function sc(t,e,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=ae.checkPathsSync(t,e,"copy",r);return ae.checkParentPathsSync(t,n,e,"copy"),ac(i,t,e,r)}function ac(t,e,r,n){if(n.filter&&!n.filter(e,r))return;let i=se.dirname(r);return W.existsSync(i)||ic(i),Cn(t,e,r,n)}function cc(t,e,r,n){if(!(n.filter&&!n.filter(e,r)))return Cn(t,e,r,n)}function Cn(t,e,r,n){let o=(n.dereference?W.statSync:W.lstatSync)(e);if(o.isDirectory())return yc(o,t,e,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return uc(o,t,e,r,n);if(o.isSymbolicLink())return bc(t,e,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${e}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}function uc(t,e,r,n,i){return e?lc(t,r,n,i):En(t,r,n,i)}function lc(t,e,r,n){if(n.overwrite)return W.unlinkSync(r),En(t,e,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function En(t,e,r,n){return W.copyFileSync(e,r),n.preserveTimestamps&&fc(t.mode,e,r),Qe(r,t.mode)}function fc(t,e,r){return mc(t)&&dc(r,t),pc(e,r)}function mc(t){return(t&128)===0}function dc(t,e){return Qe(t,e|128)}function Qe(t,e){return W.chmodSync(t,e)}function pc(t,e){let r=W.statSync(t);return oc(e,r.atime,r.mtime)}function yc(t,e,r,n,i){return e?_n(r,n,i):hc(t.mode,r,n,i)}function hc(t,e,r,n){return W.mkdirSync(r),_n(e,r,n),Qe(r,t)}function _n(t,e,r){W.readdirSync(t).forEach(n=>gc(n,t,e,r))}function gc(t,e,r,n){let i=se.join(e,t),o=se.join(r,t),{destStat:s}=ae.checkPathsSync(i,o,"copy",n);return cc(s,i,o,n)}function bc(t,e,r,n){let i=W.readlinkSync(e);if(n.dereference&&(i=se.resolve(process.cwd(),i)),t){let o;try{o=W.readlinkSync(r)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return W.symlinkSync(i,r);throw s}if(n.dereference&&(o=se.resolve(process.cwd(),o)),ae.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(W.statSync(r).isDirectory()&&ae.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return wc(i,r)}else return W.symlinkSync(i,r)}function wc(t,e){return W.unlinkSync(e),W.symlinkSync(t,e)}kn.exports=sc});var Ee=v((kl,$n)=>{"use strict";var vc=G().fromCallback;$n.exports={copy:vc(Sn()),copySync:jn()}});var Mn=v((jl,In)=>{"use strict";var On=J(),Tn=y("path"),k=y("assert"),ce=process.platform==="win32";function Nn(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{t[r]=t[r]||On[r],r=r+"Sync",t[r]=t[r]||On[r]}),t.maxBusyTries=t.maxBusyTries||3}function Ze(t,e,r){let n=0;typeof e=="function"&&(r=e,e={}),k(t,"rimraf: missing path"),k.strictEqual(typeof t,"string","rimraf: path should be a string"),k.strictEqual(typeof r,"function","rimraf: callback function required"),k(e,"rimraf: invalid options argument provided"),k.strictEqual(typeof e,"object","rimraf: options should be object"),Nn(e),Pn(t,e,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&n<e.maxBusyTries){n++;let s=n*100;return setTimeout(()=>Pn(t,e,i),s)}o.code==="ENOENT"&&(o=null)}r(o)})}function Pn(t,e,r){k(t),k(e),k(typeof r=="function"),e.lstat(t,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&ce)return qn(t,e,n,r);if(i&&i.isDirectory())return _e(t,e,n,r);e.unlink(t,o=>{if(o){if(o.code==="ENOENT")return r(null);if(o.code==="EPERM")return ce?qn(t,e,o,r):_e(t,e,o,r);if(o.code==="EISDIR")return _e(t,e,o,r)}return r(o)})})}function qn(t,e,r,n){k(t),k(e),k(typeof n=="function"),e.chmod(t,438,i=>{i?n(i.code==="ENOENT"?null:r):e.stat(t,(o,s)=>{o?n(o.code==="ENOENT"?null:r):s.isDirectory()?_e(t,e,r,n):e.unlink(t,n)})})}function Fn(t,e,r){let n;k(t),k(e);try{e.chmodSync(t,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=e.statSync(t)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?ke(t,e,r):e.unlinkSync(t)}function _e(t,e,r,n){k(t),k(e),k(typeof n=="function"),e.rmdir(t,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?xc(t,e,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function xc(t,e,r){k(t),k(e),k(typeof r=="function"),e.readdir(t,(n,i)=>{if(n)return r(n);let o=i.length,s;if(o===0)return e.rmdir(t,r);i.forEach(a=>{Ze(Tn.join(t,a),e,u=>{if(!s){if(u)return r(s=u);--o===0&&e.rmdir(t,r)}})})})}function Dn(t,e){let r;e=e||{},Nn(e),k(t,"rimraf: missing path"),k.strictEqual(typeof t,"string","rimraf: path should be a string"),k(e,"rimraf: missing options"),k.strictEqual(typeof e,"object","rimraf: options should be object");try{r=e.lstatSync(t)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&ce&&Fn(t,e,n)}try{r&&r.isDirectory()?ke(t,e,null):e.unlinkSync(t)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return ce?Fn(t,e,n):ke(t,e,n);if(n.code!=="EISDIR")throw n;ke(t,e,n)}}function ke(t,e,r){k(t),k(e);try{e.rmdirSync(t)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")Sc(t,e);else if(n.code!=="ENOENT")throw n}}function Sc(t,e){if(k(t),k(e),e.readdirSync(t).forEach(r=>Dn(Tn.join(t,r),e)),ce){let r=Date.now();do try{return e.rmdirSync(t,e)}catch{}while(Date.now()-r<500)}else return e.rmdirSync(t,e)}In.exports=Ze;Ze.sync=Dn});var ue=v(($l,An)=>{"use strict";var je=J(),Cc=G().fromCallback,Ln=Mn();function Ec(t,e){if(je.rm)return je.rm(t,{recursive:!0,force:!0},e);Ln(t,e)}function _c(t){if(je.rmSync)return je.rmSync(t,{recursive:!0,force:!0});Ln.sync(t)}An.exports={remove:Cc(Ec),removeSync:_c}});var Un=v((Ol,Yn)=>{"use strict";var kc=G().fromPromise,Bn=kt(),Jn=y("path"),Hn=Q(),Gn=ue(),Rn=kc(async function(e){let r;try{r=await Bn.readdir(e)}catch{return Hn.mkdirs(e)}return Promise.all(r.map(n=>Gn.remove(Jn.join(e,n))))});function Wn(t){let e;try{e=Bn.readdirSync(t)}catch{return Hn.mkdirsSync(t)}e.forEach(r=>{r=Jn.join(t,r),Gn.removeSync(r)})}Yn.exports={emptyDirSync:Wn,emptydirSync:Wn,emptyDir:Rn,emptydir:Rn}});var zn=v((Pl,Xn)=>{"use strict";var jc=G().fromCallback,Kn=y("path"),pt=J(),Vn=Q();function $c(t,e){function r(){pt.writeFile(t,"",n=>{if(n)return e(n);e()})}pt.stat(t,(n,i)=>{if(!n&&i.isFile())return e();let o=Kn.dirname(t);pt.stat(o,(s,a)=>{if(s)return s.code==="ENOENT"?Vn.mkdirs(o,u=>{if(u)return e(u);r()}):e(s);a.isDirectory()?r():pt.readdir(o,u=>{if(u)return e(u)})})})}function Oc(t){let e;try{e=pt.statSync(t)}catch{}if(e&&e.isFile())return;let r=Kn.dirname(t);try{pt.statSync(r).isDirectory()||pt.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")Vn.mkdirsSync(r);else throw n}pt.writeFileSync(t,"")}Xn.exports={createFile:jc($c),createFileSync:Oc}});var ri=v((ql,ei)=>{"use strict";var Pc=G().fromCallback,Qn=y("path"),yt=J(),Zn=Q(),qc=dt().pathExists,{areIdentical:ti}=jt();function Fc(t,e,r){function n(i,o){yt.link(i,o,s=>{if(s)return r(s);r(null)})}yt.lstat(e,(i,o)=>{yt.lstat(t,(s,a)=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),r(s);if(o&&ti(a,o))return r(null);let u=Qn.dirname(e);qc(u,(g,c)=>{if(g)return r(g);if(c)return n(t,e);Zn.mkdirs(u,l=>{if(l)return r(l);n(t,e)})})})})}function Tc(t,e){let r;try{r=yt.lstatSync(e)}catch{}try{let o=yt.lstatSync(t);if(r&&ti(o,r))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=Qn.dirname(e);return yt.existsSync(n)||Zn.mkdirsSync(n),yt.linkSync(t,e)}ei.exports={createLink:Pc(Fc),createLinkSync:Tc}});var ii=v((Fl,ni)=>{"use strict";var ht=y("path"),le=J(),Nc=dt().pathExists;function Dc(t,e,r){if(ht.isAbsolute(t))return le.lstat(t,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:t,toDst:t}));{let n=ht.dirname(e),i=ht.join(n,t);return Nc(i,(o,s)=>o?r(o):s?r(null,{toCwd:i,toDst:t}):le.lstat(t,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:t,toDst:ht.relative(n,t)})))}}function Ic(t,e){let r;if(ht.isAbsolute(t)){if(r=le.existsSync(t),!r)throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}else{let n=ht.dirname(e),i=ht.join(n,t);if(r=le.existsSync(i),r)return{toCwd:i,toDst:t};if(r=le.existsSync(t),!r)throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:ht.relative(n,t)}}}ni.exports={symlinkPaths:Dc,symlinkPathsSync:Ic}});var ai=v((Tl,si)=>{"use strict";var oi=J();function Mc(t,e,r){if(r=typeof e=="function"?e:r,e=typeof e=="function"?!1:e,e)return r(null,e);oi.lstat(t,(n,i)=>{if(n)return r(null,"file");e=i&&i.isDirectory()?"dir":"file",r(null,e)})}function Lc(t,e){let r;if(e)return e;try{r=oi.lstatSync(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}si.exports={symlinkType:Mc,symlinkTypeSync:Lc}});var yi=v((Nl,pi)=>{"use strict";var Ac=G().fromCallback,ui=y("path"),Z=kt(),li=Q(),Rc=li.mkdirs,Wc=li.mkdirsSync,fi=ii(),Bc=fi.symlinkPaths,Jc=fi.symlinkPathsSync,mi=ai(),Hc=mi.symlinkType,Gc=mi.symlinkTypeSync,Yc=dt().pathExists,{areIdentical:di}=jt();function Uc(t,e,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,Z.lstat(e,(i,o)=>{!i&&o.isSymbolicLink()?Promise.all([Z.stat(t),Z.stat(e)]).then(([s,a])=>{if(di(s,a))return n(null);ci(t,e,r,n)}):ci(t,e,r,n)})}function ci(t,e,r,n){Bc(t,e,(i,o)=>{if(i)return n(i);t=o.toDst,Hc(o.toCwd,r,(s,a)=>{if(s)return n(s);let u=ui.dirname(e);Yc(u,(g,c)=>{if(g)return n(g);if(c)return Z.symlink(t,e,a,n);Rc(u,l=>{if(l)return n(l);Z.symlink(t,e,a,n)})})})})}function Kc(t,e,r){let n;try{n=Z.lstatSync(e)}catch{}if(n&&n.isSymbolicLink()){let a=Z.statSync(t),u=Z.statSync(e);if(di(a,u))return}let i=Jc(t,e);t=i.toDst,r=Gc(i.toCwd,r);let o=ui.dirname(e);return Z.existsSync(o)||Wc(o),Z.symlinkSync(t,e,r)}pi.exports={createSymlink:Ac(Uc),createSymlinkSync:Kc}});var Ci=v((Dl,Si)=>{"use strict";var{createFile:hi,createFileSync:gi}=zn(),{createLink:bi,createLinkSync:wi}=ri(),{createSymlink:vi,createSymlinkSync:xi}=yi();Si.exports={createFile:hi,createFileSync:gi,ensureFile:hi,ensureFileSync:gi,createLink:bi,createLinkSync:wi,ensureLink:bi,ensureLinkSync:wi,createSymlink:vi,createSymlinkSync:xi,ensureSymlink:vi,ensureSymlinkSync:xi}});var $e=v((Il,Ei)=>{function Vc(t,{EOL:e=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let o=r?e:"";return JSON.stringify(t,n,i).replace(/\n/g,e)+o}function Xc(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}Ei.exports={stringify:Vc,stripBom:Xc}});var $i=v((Ml,ji)=>{var zt;try{zt=J()}catch{zt=y("fs")}var Oe=G(),{stringify:_i,stripBom:ki}=$e();async function zc(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||zt,n="throws"in e?e.throws:!0,i=await Oe.fromCallback(r.readFile)(t,e);i=ki(i);let o;try{o=JSON.parse(i,e?e.reviver:null)}catch(s){if(n)throw s.message=`${t}: ${s.message}`,s;return null}return o}var Qc=Oe.fromPromise(zc);function Zc(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||zt,n="throws"in e?e.throws:!0;try{let i=r.readFileSync(t,e);return i=ki(i),JSON.parse(i,e.reviver)}catch(i){if(n)throw i.message=`${t}: ${i.message}`,i;return null}}async function tu(t,e,r={}){let n=r.fs||zt,i=_i(e,r);await Oe.fromCallback(n.writeFile)(t,i,r)}var eu=Oe.fromPromise(tu);function ru(t,e,r={}){let n=r.fs||zt,i=_i(e,r);return n.writeFileSync(t,i,r)}var nu={readFile:Qc,readFileSync:Zc,writeFile:eu,writeFileSync:ru};ji.exports=nu});var Pi=v((Ll,Oi)=>{"use strict";var Pe=$i();Oi.exports={readJson:Pe.readFile,readJsonSync:Pe.readFileSync,writeJson:Pe.writeFile,writeJsonSync:Pe.writeFileSync}});var qe=v((Al,Ti)=>{"use strict";var iu=G().fromCallback,fe=J(),qi=y("path"),Fi=Q(),ou=dt().pathExists;function su(t,e,r,n){typeof r=="function"&&(n=r,r="utf8");let i=qi.dirname(t);ou(i,(o,s)=>{if(o)return n(o);if(s)return fe.writeFile(t,e,r,n);Fi.mkdirs(i,a=>{if(a)return n(a);fe.writeFile(t,e,r,n)})})}function au(t,...e){let r=qi.dirname(t);if(fe.existsSync(r))return fe.writeFileSync(t,...e);Fi.mkdirsSync(r),fe.writeFileSync(t,...e)}Ti.exports={outputFile:iu(su),outputFileSync:au}});var Di=v((Rl,Ni)=>{"use strict";var{stringify:cu}=$e(),{outputFile:uu}=qe();async function lu(t,e,r={}){let n=cu(e,r);await uu(t,n,r)}Ni.exports=lu});var Mi=v((Wl,Ii)=>{"use strict";var{stringify:fu}=$e(),{outputFileSync:mu}=qe();function du(t,e,r){let n=fu(e,r);mu(t,n,r)}Ii.exports=du});var Ai=v((Bl,Li)=>{"use strict";var pu=G().fromPromise,H=Pi();H.outputJson=pu(Di());H.outputJsonSync=Mi();H.outputJSON=H.outputJson;H.outputJSONSync=H.outputJsonSync;H.writeJSON=H.writeJson;H.writeJSONSync=H.writeJsonSync;H.readJSON=H.readJson;H.readJSONSync=H.readJsonSync;Li.exports=H});var Hi=v((Jl,Ji)=>{"use strict";var yu=J(),er=y("path"),hu=Ee().copy,Bi=ue().remove,gu=Q().mkdirp,bu=dt().pathExists,Ri=jt();function wu(t,e,r,n){typeof r=="function"&&(n=r,r={}),r=r||{};let i=r.overwrite||r.clobber||!1;Ri.checkPaths(t,e,"move",r,(o,s)=>{if(o)return n(o);let{srcStat:a,isChangingCase:u=!1}=s;Ri.checkParentPaths(t,a,e,"move",g=>{if(g)return n(g);if(vu(e))return Wi(t,e,i,u,n);gu(er.dirname(e),c=>c?n(c):Wi(t,e,i,u,n))})})}function vu(t){let e=er.dirname(t);return er.parse(e).root===e}function Wi(t,e,r,n,i){if(n)return tr(t,e,r,i);if(r)return Bi(e,o=>o?i(o):tr(t,e,r,i));bu(e,(o,s)=>o?i(o):s?i(new Error("dest already exists.")):tr(t,e,r,i))}function tr(t,e,r,n){yu.rename(t,e,i=>i?i.code!=="EXDEV"?n(i):xu(t,e,r,n):n())}function xu(t,e,r,n){hu(t,e,{overwrite:r,errorOnExist:!0},o=>o?n(o):Bi(t,n))}Ji.exports=wu});var Vi=v((Hl,Ki)=>{"use strict";var Yi=J(),nr=y("path"),Su=Ee().copySync,Ui=ue().removeSync,Cu=Q().mkdirpSync,Gi=jt();function Eu(t,e,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=Gi.checkPathsSync(t,e,"move",r);return Gi.checkParentPathsSync(t,i,e,"move"),_u(e)||Cu(nr.dirname(e)),ku(t,e,n,o)}function _u(t){let e=nr.dirname(t);return nr.parse(e).root===e}function ku(t,e,r,n){if(n)return rr(t,e,r);if(r)return Ui(e),rr(t,e,r);if(Yi.existsSync(e))throw new Error("dest already exists.");return rr(t,e,r)}function rr(t,e,r){try{Yi.renameSync(t,e)}catch(n){if(n.code!=="EXDEV")throw n;return ju(t,e,r)}}function ju(t,e,r){return Su(t,e,{overwrite:r,errorOnExist:!0}),Ui(t)}Ki.exports=Eu});var zi=v((Gl,Xi)=>{"use strict";var $u=G().fromCallback;Xi.exports={move:$u(Hi()),moveSync:Vi()}});var gt=v((Yl,Qi)=>{"use strict";Qi.exports={...kt(),...Ee(),...Un(),...Ci(),...Ai(),...Q(),...zi(),...qe(),...dt(),...ue()}});var Nu={};Co(Nu,{default:()=>Tu});var Ir=y("@yarnpkg/cli"),Yt=y("@yarnpkg/core"),Re=y("@yarnpkg/shell"),lt=ct(Dr());var m=class extends Ir.BaseCommand{async getManifest(){return await Yt.Manifest.tryFind(this.context.cwd)}async getConfiguration(){return await Yt.Configuration.find(this.context.cwd,this.context.plugins)}async getProject(){let r=await this.getConfiguration(),{project:n}=await Yt.Project.find(r,this.context.cwd);return n}withPassthrough(r){return this.passthrough.length?this.passthrough.reduce((n,i)=>i?`${n} ${i}`:`${n}`,r):r}log(r){var i;let n=(i=this.name)!=null?i:"@bud";process.stdout.write(`[${n}] ${r}
`)}err(r){var i;let n=(i=this.name)!=null?i:"@bud";throw Error(`[${n}] ${typeof r=="string"?r:r.message}
`)}async $(...r){let n=await this.getProject();await Promise.all(r.map(async i=>{if(!!i){this.log(i);try{let o=await(0,Re.execute)(i,[],{cwd:n.cwd});if(o!==0)throw new Error(`${i} failed with code ${o}`)}catch(o){this.err(o)}}}))}async tryExecuting(r,n,i={}){try{let o=await(0,Re.execute)(r,n,i);if(o!==0)throw new Error(`\u274C ${r} ${n.join(" ")} failed`);return o}catch(o){throw new Error(o)}}};ut([lt.bind],m.prototype,"getManifest",1),ut([lt.bind],m.prototype,"getConfiguration",1),ut([lt.bind],m.prototype,"getProject",1),ut([lt.bind],m.prototype,"withPassthrough",1),ut([lt.bind],m.prototype,"log",1),ut([lt.bind],m.prototype,"err",1),ut([lt.bind],m.prototype,"$",1);var Ut=class extends m{async execute(){process.stdout.write(`    
 _               _
| |__  _   _  __| |
|  _ \\| | | |/ _  |
| |_) | |_| | (_| |
|_.__/ \\__._|\\__._|
`),Object.values(he).filter(e=>e.usage).forEach(e=>{var r;(r=e.usage.examples)==null||r.forEach(([n,i])=>{process.stdout.write(`
\x1B[34m${i}\x1B[0m  ${n}
`)})})}};Ut.label="@bud",Ut.paths=[["@bud"]];var vt=class extends m{async execute(){await this.$("yarn @bud clean"),await this.$("yarn install"),await this.$("yarn @bud build"),await this.$("yarn @bud lint dependencies","yarn @bud lint format --no-fix","yarn @bud lint exports","yarn @bud test unit"),await this.$("yarn @bud registry start"),await this.$("yarn @bud release --tag latest"),await this.$("yarn @bud test integration"),await this.$("yarn @bud test e2e")}async err(e){this.log(e.message)}};vt.label="@bud ci",vt.paths=[["@bud","ci"]],vt.usage={category:"@bud",description:"Emulate CI workflow",examples:[["Emulate CI workflow","yarn @bud ci"]]};var Rr=y("module"),Wr=y("url"),nt=y("path"),it={},X=((it==null?void 0:it.url)&&typeof it.url<"u"?(0,Wr.fileURLToPath)(it.url):__dirname).split("sources/").shift(),Xu=(0,nt.join)(X,"package.json"),zu=(0,nt.join)(X,"storage"),Qu=(0,nt.join)(X,"config","tsconfig.json");var d={root:X,config:(0,nt.join)(X,"config"),sources:(0,nt.join)(X,"sources"),tests:(0,nt.join)(X,"tests"),storage:(0,nt.join)(X,"storage"),mocks:(0,nt.join)(X,"storage","mocks")},Ar;typeof(it==null?void 0:it.url)<"u"?Ar=(0,Rr.createRequire)(it.url)("../../../config/monorepo.config.cjs"):Ar=Lr();var z=y("path");var xt=class extends m{err(e){this.log(e)}async execute(){await this.$("rm -rf **/.budfiles",`rm -rf ${(0,z.join)(d.root,"node_modules")}`,`rm -rf ${(0,z.join)(d.sources,"@roots/*/lib")}`,`rm -rf ${(0,z.join)(d.sources,"@roots/*/node_modules")}`,`rm -rf ${(0,z.join)(d.sources,"@roots/*/types")}`,`rm -rf ${(0,z.join)(d.sources,"**/.tsbuildinfo")}`,`rm -rf ${(0,z.join)(d.storage,"packages")}`,`rm -rf ${(0,z.join)(d.storage,"mocks")}`,`rm -rf ${(0,z.join)(d.storage,"node_modules")}`,`rm -rf ${(0,z.join)(d.storage,"yarn")}`,`rm -rf ${(0,z.join)(d.storage,".verdaccio-db.json")}`)}};xt.label="@bud clean",xt.paths=[["@bud","clean"]],xt.usage={category:"@bud",description:"clean project artifacts",examples:[["clean project artifacts","yarn @bud clean"]]};var Jr=y("clipanion"),We=y("path");var ga=(0,We.join)(d.config,"tsconfig.json"),ba=(0,We.join)(d.sources,"@repo/compile-kit/src/cjs"),St=class extends m{constructor(){super(...arguments);this.package=Jr.Option.String("package to transpile","all")}async execute(){await this.$(`yarn ts-node --project ${ga} ${ba} ${this.package}`)}};St.label="@bud compile",St.paths=[["@bud","compile"]],St.usage={category:"@bud",description:"compile a package",details:"compiles package with vercel/ncc",examples:[["compile {package name}","yarn @bud compile @roots/bud-react"]]};var cl=`${X}/sources/@repo/compile-kit/src/cjs @roots/bud-support`,Ct=class extends m{async execute(){await this.$("yarn @bud tsc"),await this.$("yarn @bud tsc --watch","yarn @bud test unit --verbose --watch","yarn @bud docs dev")}};Ct.label="@bud dev",Ct.paths=[["@bud","dev"]],Ct.usage={category:"@bud",description:"develop project code",examples:[["run tsc, docusaurus & jest in watch mode","yarn @bud dev"]]};var Et=class extends m{async execute(){await this.$("yarn workspace @repo/docs docusaurus start")}};Et.label="@bud docs dev",Et.paths=[["@bud","docs","dev"]],Et.usage={category:"@bud",description:"develop docs",examples:[["develop docs","yarn @bud docs dev"]]};var Fe=y("clipanion"),Zi=ct(gt());var $t=class extends m{constructor(){super(...arguments);this.api=Fe.Option.Boolean("-a,--api",!1,{description:"build api docs"});this.site=Fe.Option.Boolean("-s,--site",!1,{description:"build site files"});this.readme=Fe.Option.Boolean("-r,--readme",!1,{description:"build readme files"})}async execute(){let r=!this.site&&!this.readme&&!this.api;(r||this.api)&&await this.$("typedoc  --out ./sources/@repo/docs/content/dev/api  --tsconfig ./config/tsconfig.json  --entryPoints  ./sources/@roots/bud-framework/src/index.ts  ./sources/@roots/bud-framework/src/extension/index.ts  ./sources/@roots/bud-framework/src/methods/index.ts  ./sources/@roots/bud-framework/src/services/index.ts  ./sources/@roots/bud/src/index.ts  ./sources/@roots/bud/src/cli/index.ts  ./sources/@roots/bud-api/src/index.ts  ./sources/@roots/bud-build/src/index.ts  ./sources/@roots/bud-compiler/src/index.ts  ./sources/@roots/bud-hooks/src/index.ts  ./sources/@roots/bud-server/src/index.ts  ./sources/@roots/bud/src/index.ts  ./sources/@roots/container/src/index.ts  ./sources/@roots/sage/src/index.ts"),(r||this.site)&&(await this.$(`yarn node ${d.sources}/@repo/markdown-kit/compiled/cli-examples/index.js`),await this.$("yarn workspace @repo/docs run build"),await(0,Zi.copy)(`${d.sources}/@repo/docs/content/dev/api`,`${d.sources}/@repo/docs/build/dev/api`,{overwrite:!0})),(r||this.readme)&&await this.$(`yarn node ${d.sources}/@repo/markdown-kit/compiled/readme/index.js`)}};$t.label="@bud docs",$t.paths=[["@bud","docs"]],$t.usage={category:"@bud",description:"build docs and readme.",examples:[["build all","yarn @bud docs"],["build api documentation","yarn @bud docs --api"],["build api documentation and site files","yarn @bud docs --site"],["build readme files","yarn @bud docs --readme"]]};var to=y("clipanion");var Ot=class extends m{constructor(){super(...arguments);this.passthrough=to.Option.Proxy({name:"netlify options"})}async execute(){await this.$(this.withPassthrough("yarn workspace @repo/docs netlify"))}};Ot.label="@bud netlify",Ot.paths=[["@bud","netlify"],["@bud","docs","netlify"]],Ot.usage={category:"@bud",description:"netlify alias",examples:[["run commands on netlify-cli","yarn @bud netlify"]]};var K=y("child_process"),ir=ct(gt());var Qt=class extends m{get hasPm2(){try{return(0,K.execSync)("yarn @bud pm2 --version"),!0}catch{return!1}}get hasVolta(){try{return(0,K.execSync)("volta -v"),!0}catch{return!1}}get voltaList(){return(0,K.execSync)("volta list").toString().trim().split(`
`).filter(e=>e.startsWith("runtime")||e.startsWith("package-manager")).map(e=>"- ".concat(e.split(" / ").shift().split(" (current").shift().replace("runtime ",""))).join(`
`)}get hasVerdaccio(){try{return(0,K.execSync)("yarn @bud pm2 verdaccio --version"),!0}catch{return!1}}get head(){return(0,K.execSync)("git rev-parse HEAD").toString().trim()}get branch(){return(0,K.execSync)("git rev-parse --abbrev-ref HEAD").toString().trim()}get pm2(){return(0,K.execSync)("yarn @bud pm2 ls").toString().trim()}get verdaccio(){return(0,K.execSync)("yarn @bud pm2 verdaccio --version").toString().trim()}get logs(){return(0,K.execSync)("yarn @bud pm2 logs --out --lines 5 --nostream").toString().trim().split(`
`).splice(2).join(`
`)}get requiredNode(){return(0,ir.readJsonSync)(`${d.root}/package.json`).volta.node}get requiredNpm(){return(0,ir.readJsonSync)(`${d.root}/package.json`).volta.npm}get pm2Version(){return(0,K.execSync)("yarn @bud pm2 --version").toString().trim().replace("v","")}get nodeVersion(){return process.version.replace("v","")}get yarn(){return(0,K.execSync)("yarn -v").toString().trim().replace("v","")}get npm(){return(0,K.execSync)("npm -v").toString().trim().replace("v","")}get gitLog(){return(0,K.execSync)(`git log --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)' origin..${this.branch}`).toString().trim()}async execute(){this.log(`    
 _               _
| |__  _   _  __| |
|  _ \\| | | |/ _  |
| |_) | |_| | (_| |
|_.__/ \\__._|\\__._|
`),this.hasVolta?process.stdout.write(`
${this.voltaList}
`):process.stdout.write(`
- node@${this.nodeVersion} (required: ${this.requiredNode})
- yarn@${this.yarn} 
- npm@${this.npm} (required: ${this.requiredNpm})
`),this.nodeVersion!==this.requiredNode&&process.stdout.write(`
\x1B[31m\u2718\x1B[0m node version mismatch

Your node version is ${process.version} but ${this.requiredNode} is required.
Consider using volta to guarantee you are using the correct version of node.`),this.npm!==this.requiredNpm&&process.stdout.write(`
\x1B[31m\u2718\x1B[0m npm version mismatch

Your npm version is ${this.npm} but ${this.requiredNode} is required.`),process.stdout.write(`
On branch \`${this.branch}\`:

${this.gitLog}
`),this.hasPm2&&this.hasVerdaccio&&process.stdout.write(`
${this.pm2}
${this.logs}`),this.context.stdout.write(`

`)}};Qt.label="@bud info",Qt.paths=[["@bud","info"]];var Pt=class extends m{async execute(){await this.$("yarn syncpack list-mismatches --config ./config/syncpack.config.cjs")}};Pt.label="@bud lint dependencies",Pt.paths=[["@bud","lint","dependencies"]],Pt.usage={category:"@bud",description:"ensure packages are synced",examples:[["lint dependency versions","yarn @bud lint dependencies"]]};var qt=class extends m{async execute(){await this.$("yarn workspaces foreach --no-private exec yarn run package-check")}};qt.label="@bud lint exports",qt.paths=[["@bud","lint","exports"]],qt.usage={category:"@bud",description:"lint published package module exports",examples:[["lint package.json module exports","yarn @bud lint exports"]]};var eo=y("clipanion");var Ft=class extends m{constructor(){super(...arguments);this.fix=eo.Option.Boolean("-f,--fix",!0,{description:"fix"})}async execute(){await this.$(`yarn prettier ./sources/@roots/*/src/**/* ${this.fix?"--write":"--check"} --config ./config/prettier.config.cjs --ignore-unknown --no-error-on-unmatched-pattern`)}};Ft.label="@bud lint format",Ft.paths=[["@bud","format"]],Ft.usage={category:"@bud",description:"Run coding style linters",examples:[["run prettier","yarn @bud format"],["run prettier (no fix)","yarn @bud format --no-fix"]]};var ro=y("clipanion");var Tt=class extends m{constructor(){super(...arguments);this.passthrough=ro.Option.Proxy({name:"eslint options"})}async execute(){await this.$(this.withPassthrough('yarn eslint  "./sources/*/*/src/**/*.{ts,tsx,js,jsx}"  "./sources/*/*/sources/**/*.{ts,tsx,js,jsx}"  "./tests/**/*.{ts,tsx,js,jsx}"  "./config/**/*.{ts,tsx,js,jsx}"  --config ./config/eslint.config.cjs  --no-error-on-unmatched-pattern'))}};Tt.label="@bud lint",Tt.paths=[["@bud","lint"]],Tt.usage={category:"@bud",description:"run eslint",examples:[["run eslint","yarn @bud lint"]]};var et=ct(gt()),me=y("path");var Nt=class extends m{async execute(){try{if(await(0,et.ensureDir)((0,me.join)(d.root,"storage","packages")),await(0,et.remove)((0,me.join)(d.root,"storage","packages")),await(0,et.pathExists)((0,me.join)(d.root,"storage",".verdaccio-db.json"))){let r=await(0,et.readJson)((0,me.join)(d.root,"storage",".verdaccio-db.json"));r.list=[],await(0,et.writeJson)(`${d.root}/storage/.verdaccio-db.json`,r)}}catch(e){throw new Error(e)}}};Nt.label="@bud registry clean",Nt.paths=[["@bud","registry","clean"]],Nt.usage={category:"@bud",description:"clean previously published packages",examples:[["clean previously published packages","yarn @bud registry clean"]]};var Dt=class extends m{async execute(){await this.tryExecuting("npm",["install","pm2","verdaccio"],{cwd:`${d.root}/storage`})}};Dt.label="@bud registry install",Dt.paths=[["@bud","registry","install"]],Dt.usage={category:"@bud",description:"install pm2 & verdaccio",examples:[["install pm2 and verdaccio","yarn @bud registry install"]]};var no=y("clipanion"),io=ct(gt());var It=class extends m{constructor(){super(...arguments);this.passthrough=no.Option.Proxy({name:"pm2 options"})}async execute(){var n;await(0,io.realpath)(`${d.root}/storage/node_modules/pm2/bin/pm2`)||await this.tryExecuting("yarn",["@bud","registry","install"]),await this.tryExecuting("node",[`${d.root}/storage/node_modules/pm2/bin/pm2`,...(n=this.passthrough)!=null?n:[]].filter(Boolean))}};It.label="@bud pm2",It.paths=[["@bud","pm2"]],It.usage={category:"@bud",description:"registry access",examples:[["work with pm2","yarn @bud pm2"]]};var oo=ct(gt());var Mt=class extends m{async execute(){await(0,oo.realpath)(`${d.root}/storage/node_modules/pm2/bin/pm2`)||await this.tryExecuting("yarn",["@bud","registry","install"]),await this.tryExecuting("yarn",["@bud","pm2","start",`${d.root}/storage/node_modules/.bin/verdaccio`,"--",`--config=${d.root}/config/verdaccio/config.yaml`]),await this.tryExecuting("yarn",["config","set","unsafeHttpWhitelist","--json",'["0.0.0.0","localhost"]']),await this.tryExecuting("yarn",["config","set","npmPublishRegistry","http://0.0.0.0:4873"]),await this.tryExecuting("yarn",["config","set","npmRegistryServer","http://0.0.0.0:4873"])}};Mt.label="@bud registry start",Mt.paths=[["@bud","registry","start"]],Mt.usage={category:"@bud",description:"start verdaccio registry",examples:[["start verdaccio server","yarn @bud registry start"]]};var Te=y("@yarnpkg/shell"),so=ct(gt());var Lt=class extends m{async execute(){try{if(!await(0,so.realpath)(`${d.root}/storage/node_modules/pm2/bin/pm2`))return;await this.tryExecuting("yarn",["@bud","pm2","stop","verdaccio"]),await this.tryExecuting("yarn",["@bud","pm2","delete","verdaccio"])}catch{}try{await(0,Te.execute)("yarn",["config","unset","unsafeHttpWhitelist"]),await(0,Te.execute)("yarn",["config","set","npmPublishRegistry","https://registry.npmjs.org"]),await(0,Te.execute)("yarn",["config","set","npmRegistryServer","https://registry.npmjs.org"])}catch{}}};Lt.label="@bud registry stop",Lt.paths=[["@bud","registry","stop"]],Lt.usage={category:"@bud",description:"stop verdaccio registry",examples:[["stop verdaccio server","yarn @bud registry stop"]]};var or=y("clipanion"),ao=y("semver");var At=class extends m{constructor(){super(...arguments);this.version=or.Option.String("-v,--version",null,{description:"version"});this.tag=or.Option.String("-t,--tag",null,{description:"tag"})}async execute(){if(await this.$("yarn install --immutable"),!this.tag){let[r]=(0,ao.parse)(this.version).prerelease;this.tag=`${r!=null?r:"latest"}`}this.version&&await this.$(`yarn @bud version ${this.version}`),await this.$("yarn @bud build"),await this.$(`yarn workspaces foreach --no-private npm publish --access public --tag ${this.tag}`)}};At.label="@bud release",At.paths=[["@bud","release"]],At.usage={category:"@bud",description:"Do a release.",examples:[["Bump packages to x.y.z and publish","yarn @bud release --version x.y.z --tag latest"]]};var co=y("clipanion");var Rt=class extends m{constructor(){super(...arguments);this.tasks=co.Option.Array("--",{description:"task to run"})}async execute(){await this.tasks.reduce(async(r,n)=>(await r,await this.$(`yarn @bud ${n}`),Promise.resolve()),Promise.resolve())}};Rt.label="@bud run",Rt.paths=[["@bud","run"]],Rt.usage={category:"@bud",description:"run a series of bud commands",examples:[["","yarn @bud run"]]};var uo=y("clipanion"),sr=y("path/posix");var ot=class extends m{constructor(){super(...arguments);this.passthrough=uo.Option.Proxy({name:"jest passthrough options"})}async execute(){await this.$(this.withPassthrough(`yarn node --experimental-vm-modules ${(0,sr.join)(d.root,"node_modules/.bin/jest")} --config ${(0,sr.join)(d.root,"config/jest.config.js")} --selectProjects e2e --verbose --runInBand --testTimeout ${60*1e3}`))}};ot.label="@bud test",ot.paths=[["@bud","test","e2e"]],ot.usage={category:"@bud",description:"run e2e tests",examples:[["run e2e tests","yarn @bud test e2e"]]};var lo=y("clipanion"),te=ct(gt()),Zt=y("path/posix");var st=class extends m{constructor(){super(...arguments);this.passthrough=lo.Option.Proxy({name:"jest passthrough options"})}async execute(){await(0,te.ensureFile)((0,Zt.join)(d.root,"storage/yarn.lock")),await(0,te.ensureDir)((0,Zt.join)(d.root,"storage/mocks")),await(0,te.remove)((0,Zt.join)(d.root,"storage/mocks")),this.log("integration tests directory cleaned"),await this.$(this.withPassthrough(`yarn node --experimental-vm-modules ${(0,Zt.join)(d.root,"node_modules/.bin/jest")} --config ${(0,Zt.join)(d.root,"config/jest.config.js")} --selectProjects integration --verbose --testTimeout ${120*1e3}`))}};st.label="@bud test integration",st.paths=[["@bud","test","integration"]],st.usage={category:"@bud",description:"run integration tests",examples:[["run integration tests","yarn @bud test integration"]]};var fo=y("clipanion"),ar=y("path/posix");var at=class extends m{constructor(){super(...arguments);this.passthrough=fo.Option.Proxy({name:"jest passthrough options"})}async execute(){await this.$(this.withPassthrough(`yarn node --experimental-vm-modules ${(0,ar.join)(d.root,"node_modules/.bin/jest")} ${this.passthrough.reduce((r,n)=>`${r} ${n}`,"")} --config ${(0,ar.join)(d.root,"config/jest.config.js")} --selectProjects unit:node unit:dom --verbose --coverage`))}};at.label="@bud test unit",at.paths=[["@bud","test","unit"]],at.usage={category:"@bud",description:"run unit tests",examples:[["run unit tests","yarn @bud test unit"]]};var Ou=[ot,st,at],Wt=class extends m{async execute(){process.stdout.write(`    
 _               _
| |__  _   _  __| |
|  _ \\| | | |/ _  |
| |_) | |_| | (_| |
|_.__/ \\__._|\\__._|
`),Object.values(Ou).filter(e=>e.usage).forEach(e=>{var r;(r=e.usage.examples)==null||r.forEach(([n,i])=>{process.stdout.write(`
\x1B[34m${i}\x1B[0m  ${n}
`)})})}};Wt.label="@bud test",Wt.paths=[["@bud","test"]],Wt.usage={category:"@bud",description:"run tests",examples:[["run e2e tests","yarn @bud test e2e"],["run unit tests","yarn @bud test unit"],["run integration tests","yarn @bud test integration"]]};var mo=y("clipanion"),po=y("path");var Bt=class extends m{constructor(){super(...arguments);this.tsconfig=(0,po.join)(d.config,"tsconfig.json");this.passthrough=mo.Option.Proxy({name:"tsc options"})}async execute(){await this.$(this.withPassthrough(`yarn tsc -b ${this.tsconfig}`))}};Bt.label="@bud tsc",Bt.paths=[["@bud","tsc"],["@bud","build"]],Bt.usage={category:"@bud",description:"Run the typescript compiler",examples:[["run the typescript compiler","yarn @bud tsc"],["run the typescript compiler in watch mode","yarn @bud tsc --watch"],["run the typescript compiler with forced rebuild (no incremental compilation)","yarn @bud tsc --force"]]};var yo=y("clipanion"),cr=y("path");var Pu=(0,cr.join)(d.config,"tsconfig.json"),qu=(0,cr.join)(d.sources,"@repo/compile-kit/src/vendor/index.ts"),Jt=class extends m{constructor(){super(...arguments);this.request=yo.Option.Rest()}async execute(){await this.$(`yarn ts-node-esm --project ${Pu} ${qu} ${this.request}`)}};Jt.label="@bud vendor",Jt.paths=[["@bud","vendor"]],Jt.usage={category:"@bud",description:"vendor a package"};var ho=y("clipanion");var Ht=class extends m{constructor(){super(...arguments);this.version=ho.Option.String()}async execute(){if(!this.version){let{version:r}=await this.getManifest();this.version=r}await this.$(`yarn workspaces foreach --no-private package set version ${this.version}`)}};Ht.label="@bud version",Ht.paths=[["@bud","version"]],Ht.usage={category:"@bud",description:"bump version of public packages",examples:[["Bump packages to x.y.z","yarn @bud version x.y.z"]]};var he={Bud:Ut,Clean:xt,CI:vt,Compile:St,Dev:Ct,Docs:$t,DocsDev:Et,DocsNetlify:Ot,Format:Ft,Info:Qt,Lint:Tt,LintDependencies:Pt,LintExports:qt,Pm2:It,RegistryClean:Nt,RegistryInstall:Dt,RegistryStart:Mt,RegistryStop:Lt,Release:At,RunCommand:Rt,TestE2E:ot,TestIntegration:st,TestUnit:at,TestRun:Wt,Tsc:Bt,Vendor:Jt,Version:Ht};var go=y("@yarnpkg/shell"),bo=async()=>{await(0,go.execute)("yarn",["@bud","run","--","registry install","--","build"],{stdin:process.stdin,stdout:process.stdout})};var Fu={hooks:{afterAllInstalled:bo},commands:Object.values(he)},Tu=Fu;return Eo(Nu);})();
return plugin;
}
};
