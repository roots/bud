/* eslint-disable */
//prettier-ignore
module.exports = {
name: "@yarnpkg/plugin-bud",
factory: function (require) {
var plugin=(()=>{var lo=Object.create,vt=Object.defineProperty;var sr=Object.getOwnPropertyDescriptor;var fo=Object.getOwnPropertyNames,ar=Object.getOwnPropertySymbols,mo=Object.getPrototypeOf,cr=Object.prototype.hasOwnProperty,po=Object.prototype.propertyIsEnumerable;var ur=(t,e,r)=>e in t?vt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,U=(t,e)=>{for(var r in e||(e={}))cr.call(e,r)&&ur(t,r,e[r]);if(ar)for(var r of ar(e))po.call(e,r)&&ur(t,r,e[r]);return t};var yo=t=>vt(t,"__esModule",{value:!0});var g=t=>{if(typeof require!="undefined")return require(t);throw new Error('Dynamic require of "'+t+'" is not supported')};var v=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),ho=(t,e)=>{for(var r in e)vt(t,r,{get:e[r],enumerable:!0})},go=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of fo(e))!cr.call(t,n)&&n!=="default"&&vt(t,n,{get:()=>e[n],enumerable:!(r=sr(e,n))||r.enumerable});return t},C=t=>go(yo(vt(t!=null?lo(mo(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t),ot=(t,e,r,n)=>{for(var i=n>1?void 0:n?sr(e,r):e,o=t.length-1,s;o>=0;o--)(s=t[o])&&(i=(n?s(e,r,i):s(i))||i);return n&&i&&vt(e,r,i),i};var pr=v((Pu,dr)=>{var bo="Expected a function",fr=0/0,wo="[object Symbol]",vo=/^\s+|\s+$/g,xo=/^[-+]0x[0-9a-f]+$/i,So=/^0b[01]+$/i,Co=/^0o[0-7]+$/i,Eo=parseInt,ko=typeof global=="object"&&global&&global.Object===Object&&global,_o=typeof self=="object"&&self&&self.Object===Object&&self,Oo=ko||_o||Function("return this")(),jo=Object.prototype,$o=jo.toString,Po=Math.max,qo=Math.min,Fe=function(){return Oo.Date.now()};function Fo(t,e,r){var n,i,o,s,a,u,y=0,c=!1,l=!1,d=!0;if(typeof t!="function")throw new TypeError(bo);e=mr(e)||0,Te(r)&&(c=!!r.leading,l="maxWait"in r,o=l?Po(mr(r.maxWait)||0,e):o,d="trailing"in r?!!r.trailing:d);function f(b){var D=n,J=i;return n=i=void 0,y=b,s=t.apply(J,D),s}function h(b){return y=b,a=setTimeout(S,e),c?f(b):s}function k(b){var D=b-u,J=b-y,p=e-D;return l?qo(p,o-J):p}function x(b){var D=b-u,J=b-y;return u===void 0||D>=e||D<0||l&&J>=o}function S(){var b=Fe();if(x(b))return T(b);a=setTimeout(S,k(b))}function T(b){return a=void 0,d&&n?f(b):(n=i=void 0,s)}function N(){a!==void 0&&clearTimeout(a),y=0,n=u=i=a=void 0}function nt(){return a===void 0?s:T(Fe())}function tt(){var b=Fe(),D=x(b);if(n=arguments,i=this,u=b,D){if(a===void 0)return h(u);if(l)return a=setTimeout(S,e),f(u)}return a===void 0&&(a=setTimeout(S,e)),s}return tt.cancel=N,tt.flush=nt,tt}function Te(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function To(t){return!!t&&typeof t=="object"}function No(t){return typeof t=="symbol"||To(t)&&$o.call(t)==wo}function mr(t){if(typeof t=="number")return t;if(No(t))return fr;if(Te(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Te(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(vo,"");var r=So.test(t);return r||Co.test(t)?Eo(t.slice(2),r?2:8):xo.test(t)?fr:+t}dr.exports=Fo});var wr=v((qu,br)=>{var yr="Expected a function",hr=0/0,Do="[object Symbol]",Io=/^\s+|\s+$/g,Ro=/^[-+]0x[0-9a-f]+$/i,Mo=/^0b[01]+$/i,Lo=/^0o[0-7]+$/i,Ao=parseInt,Wo=typeof global=="object"&&global&&global.Object===Object&&global,Bo=typeof self=="object"&&self&&self.Object===Object&&self,Jo=Wo||Bo||Function("return this")(),Ho=Object.prototype,Go=Ho.toString,Uo=Math.max,Yo=Math.min,Ne=function(){return Jo.Date.now()};function Vo(t,e,r){var n,i,o,s,a,u,y=0,c=!1,l=!1,d=!0;if(typeof t!="function")throw new TypeError(yr);e=gr(e)||0,le(r)&&(c=!!r.leading,l="maxWait"in r,o=l?Uo(gr(r.maxWait)||0,e):o,d="trailing"in r?!!r.trailing:d);function f(b){var D=n,J=i;return n=i=void 0,y=b,s=t.apply(J,D),s}function h(b){return y=b,a=setTimeout(S,e),c?f(b):s}function k(b){var D=b-u,J=b-y,p=e-D;return l?Yo(p,o-J):p}function x(b){var D=b-u,J=b-y;return u===void 0||D>=e||D<0||l&&J>=o}function S(){var b=Ne();if(x(b))return T(b);a=setTimeout(S,k(b))}function T(b){return a=void 0,d&&n?f(b):(n=i=void 0,s)}function N(){a!==void 0&&clearTimeout(a),y=0,n=u=i=a=void 0}function nt(){return a===void 0?s:T(Ne())}function tt(){var b=Ne(),D=x(b);if(n=arguments,i=this,u=b,D){if(a===void 0)return h(u);if(l)return a=setTimeout(S,e),f(u)}return a===void 0&&(a=setTimeout(S,e)),s}return tt.cancel=N,tt.flush=nt,tt}function Ko(t,e,r){var n=!0,i=!0;if(typeof t!="function")throw new TypeError(yr);return le(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),Vo(t,e,{leading:n,maxWait:e,trailing:i})}function le(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function zo(t){return!!t&&typeof t=="object"}function Xo(t){return typeof t=="symbol"||zo(t)&&Go.call(t)==Do}function gr(t){if(typeof t=="number")return t;if(Xo(t))return hr;if(le(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=le(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Io,"");var r=Mo.test(t);return r||Lo.test(t)?Ao(t.slice(2),r?2:8):Ro.test(t)?hr:+t}br.exports=Ko});var Er=v((Fu,Cr)=>{var Qo="Expected a function",vr=1/0,Zo=17976931348623157e292,xr=0/0,ts="[object Symbol]",es=/^\s+|\s+$/g,rs=/^[-+]0x[0-9a-f]+$/i,ns=/^0b[01]+$/i,is=/^0o[0-7]+$/i,os=parseInt,ss=Object.prototype,as=ss.toString;function cs(t,e){var r;if(typeof e!="function")throw new TypeError(Qo);return t=ds(t),function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=void 0),r}}function us(t){return cs(2,t)}function Sr(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function ls(t){return!!t&&typeof t=="object"}function fs(t){return typeof t=="symbol"||ls(t)&&as.call(t)==ts}function ms(t){if(!t)return t===0?t:0;if(t=ps(t),t===vr||t===-vr){var e=t<0?-1:1;return e*Zo}return t===t?t:0}function ds(t){var e=ms(t),r=e%1;return e===e?r?e-r:e:0}function ps(t){if(typeof t=="number")return t;if(fs(t))return xr;if(Sr(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Sr(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(es,"");var r=ns.test(t);return r||is.test(t)?os(t.slice(2),r?2:8):rs.test(t)?xr:+t}Cr.exports=us});var Tr=v((Tu,Fr)=>{var ys="Expected a function",kr="__lodash_hash_undefined__",hs="[object Function]",gs="[object GeneratorFunction]",bs=/[\\^$.*+?()[\]{}|]/g,ws=/^\[object .+?Constructor\]$/,vs=typeof global=="object"&&global&&global.Object===Object&&global,xs=typeof self=="object"&&self&&self.Object===Object&&self,_r=vs||xs||Function("return this")();function Ss(t,e){return t==null?void 0:t[e]}function Cs(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch(r){}return e}var Es=Array.prototype,ks=Function.prototype,Or=Object.prototype,De=_r["__core-js_shared__"],jr=function(){var t=/[^.]+$/.exec(De&&De.keys&&De.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),$r=ks.toString,Ie=Or.hasOwnProperty,_s=Or.toString,Os=RegExp("^"+$r.call(Ie).replace(bs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),js=Es.splice,$s=Pr(_r,"Map"),Xt=Pr(Object,"create");function yt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ps(){this.__data__=Xt?Xt(null):{}}function qs(t){return this.has(t)&&delete this.__data__[t]}function Fs(t){var e=this.__data__;if(Xt){var r=e[t];return r===kr?void 0:r}return Ie.call(e,t)?e[t]:void 0}function Ts(t){var e=this.__data__;return Xt?e[t]!==void 0:Ie.call(e,t)}function Ns(t,e){var r=this.__data__;return r[t]=Xt&&e===void 0?kr:e,this}yt.prototype.clear=Ps;yt.prototype.delete=qs;yt.prototype.get=Fs;yt.prototype.has=Ts;yt.prototype.set=Ns;function xt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ds(){this.__data__=[]}function Is(t){var e=this.__data__,r=fe(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():js.call(e,r,1),!0}function Rs(t){var e=this.__data__,r=fe(e,t);return r<0?void 0:e[r][1]}function Ms(t){return fe(this.__data__,t)>-1}function Ls(t,e){var r=this.__data__,n=fe(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}xt.prototype.clear=Ds;xt.prototype.delete=Is;xt.prototype.get=Rs;xt.prototype.has=Ms;xt.prototype.set=Ls;function ht(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function As(){this.__data__={hash:new yt,map:new($s||xt),string:new yt}}function Ws(t){return me(this,t).delete(t)}function Bs(t){return me(this,t).get(t)}function Js(t){return me(this,t).has(t)}function Hs(t,e){return me(this,t).set(t,e),this}ht.prototype.clear=As;ht.prototype.delete=Ws;ht.prototype.get=Bs;ht.prototype.has=Js;ht.prototype.set=Hs;function fe(t,e){for(var r=t.length;r--;)if(Ks(t[r][0],e))return r;return-1}function Gs(t){if(!qr(t)||Ys(t))return!1;var e=zs(t)||Cs(t)?Os:ws;return e.test(Vs(t))}function me(t,e){var r=t.__data__;return Us(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Pr(t,e){var r=Ss(t,e);return Gs(r)?r:void 0}function Us(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Ys(t){return!!jr&&jr in t}function Vs(t){if(t!=null){try{return $r.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function Re(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(ys);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=t.apply(this,n);return r.cache=o.set(i,s),s};return r.cache=new(Re.Cache||ht),r}Re.Cache=ht;function Ks(t,e){return t===e||t!==t&&e!==e}function zs(t){var e=qr(t)?_s.call(t):"";return e==hs||e==gs}function qr(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}Fr.exports=Re});var Dr=v(X=>{"use strict";Object.defineProperty(X,"__esModule",{value:!0});function Xs(t,e,r){let n=r.value;return r.value=function(...i){let o=performance.now(),s=n.apply(this,i),a=performance.now();return console.log(`Call to ${e} took ${(a-o).toFixed(2)} milliseconds.`),s},r}function Qs(t=0){return function(e,r,n){let i=n.value;return n.value=function(...o){setTimeout(()=>{i.apply(this,o)},t)},n}}var Zs=pr();function ta(t=0,e={}){return function(r,n,i){let o=new WeakMap,s=i.value;return i.value=function(...a){let u=o.get(this);u||(u=Zs(s,t,e).bind(this),o.set(this,u)),u(...a)},i}}var ea=wr();function ra(t=0,e={}){return function(r,n,i){let o=i.value;return i.value=ea(o,t,e),i}}var na=Er();function ia(t,e,r){let n=r.value;return r.value=na(n),r}function oa(t){return function(e){t.forEach(r=>{Object.getOwnPropertyNames(r.prototype).forEach(n=>{e.prototype[n]=r.prototype[n]})})}}var sa=Tr();function aa(t){return function(e,r,n){return n.value=sa(n.value,t),n}}function ca(t,e,r){let n=r.value;if(typeof n!="function")throw new Error(`@autobind decorator can only be applied to methods not: ${typeof n}`);let i=!1;return{configurable:!0,get(){if(i||this===t.prototype||this.hasOwnProperty(e)||typeof n!="function")return n;let o=n.bind(this);return i=!0,Object.defineProperty(this,e,{configurable:!0,get(){return o},set(s){n=s,delete this[e]}}),i=!1,o},set(o){n=o}}}var Nr=(t,e)=>t<e?-1:t>e?1:0;function ua(t,e={isDescending:!0,type:"string"}){let r=Symbol();return function(n,i,o){Object.defineProperty(n,i,{set:function(a){if(!a||!Array.isArray(a))throw`Value of property ${i} is not a valid array!`;let u=e.type==="date";t?this[r]=a.sort(function(y,c){let l=u?new Date(y[t]):y[t],d=u?new Date(c[t]):c[t],f=Nr(l,d);return e.isDescending?f*-1:f}):this[r]=a.sort(function(y,c){let l=u?new Date(y):y,d=u?new Date(c):c,f=Nr(l,d);return e.isDescending?f*-1:f})},get:function(){return this[r]}})}}X.Mixin=oa;X.SortBy=ua;X.bind=ca;X.debounce=ta;X.delay=Qs;X.measure=Xs;X.memo=aa;X.once=ia;X.throttle=ra});var Mr=v((Lu,Rr)=>{Rr.exports={name:"bud.js",description:"\u26A1\uFE0F Lightning fast frontend build tools combining the best parts of Symfony Encore and Laravel Mix",logo:"https://cdn.roots.io/app/uploads/logo-bud.svg",card:"https://bud.js.org/img/bud.js.png",url:{discourse:"https://discourse.roots.io/c/bud/24",docs:"https://bud.js.org",git:"git@github.com:roots/bud",web:"https://github.com/roots/bud"},organization:{name:"Roots Software Foundation LLC",site:"https://roots.io",twitter:"https://twitter.com/rootswp",favicon:"https://roots.io/favicon.ico"},contributors:{kellymears:{type:["\u{1F680} steward","\u{1F4BB} dev","\u{1F4D5} docs"]},qwp6t:{type:["\u{1F680} steward","\u{1F4BB} dev","\u{1F4D5} docs"]},retlehs:{type:["\u{1F680} steward","\u{1F4D5} docs"]},swalkinshaw:{type:["\u{1F680} steward","\u{1F4BB} dev","\u{1F4D5} docs"]},joshuafredrickson:{type:["\u{1F4BB} dev","\u{1F4D5} docs"]},alwaysblank:{type:["\u{1F680} steward","\u{1F4D5} docs"]},alexdanylyschyn:{type:["\u{1F4BB} dev"]},clayrisser:{type:["\u{1F4D5} docs"]},catgofire:{type:["\u{1F4D5} docs"]},unlocdavid:{type:["\u{1F4D5} docs"]},robrecord:{type:["\u{1F4D5} docs"]}},sponsors:[{image:"https://cdn.roots.io/app/uploads/km-digital.svg",title:"KM Digital",url:"https://k-m.com/"},{image:"https://cdn.roots.io/app/uploads/carrot.svg",title:"Carrot",url:"https://carrot.com/"},{image:"https://cdn.roots.io/app/uploads/c21redwood.svg",title:"C21 Redwood Realty",url:"https://www.c21redwood.com/"},{image:"https://cdn.roots.io/app/uploads/wordpress.svg",title:"WordPress.com",url:"https://wordpress.com/"},{image:"https://cdn.roots.io/app/uploads/pantheon.svg",title:"Pantheon",url:"https://pantheon.io/"}],packages:{core:["@roots/bud","@roots/bud-api","@roots/bud-build","@roots/bud-cache","@roots/bud-compiler","@roots/bud-dashboard","@roots/bud-extensions","@roots/bud-framework","@roots/bud-hooks","@roots/bud-server"],extension:["@roots/bud-babel","@roots/bud-compress","@roots/bud-criticalcss","@roots/bud-emotion","@roots/bud-entrypoints","@roots/bud-esbuild","@roots/bud-eslint","@roots/bud-imagemin","@roots/bud-mdx","@roots/bud-postcss","@roots/bud-preset-recommend","@roots/bud-preset-wordpress","@roots/bud-prettier","@roots/bud-purgecss","@roots/bud-react","@roots/bud-sass","@roots/bud-solid","@roots/bud-stylelint","@roots/bud-swc","@roots/bud-tailwindcss","@roots/bud-terser","@roots/bud-typescript","@roots/bud-vue","@roots/bud-wordpress-dependencies","@roots/bud-wordpress-externals","@roots/bud-wordpress-manifests","@roots/sage"],library:["@roots/browserslist-config","@roots/bud-client","@roots/container","@roots/critical-css-webpack-plugin","@roots/dependencies","@roots/entrypoints-webpack-plugin","@roots/eslint-config","@roots/filesystem","@roots/merged-manifest-webpack-plugin","@roots/wordpress-dependencies-webpack-plugin","@roots/wordpress-externals-webpack-plugin","@roots/wordpress-hmr"]}}});var Y=v(Ae=>{"use strict";Ae.fromCallback=function(t){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")t.apply(this,e);else return new Promise((r,n)=>{t.call(this,...e,(i,o)=>i!=null?n(i):r(o))})},"name",{value:t.name})};Ae.fromPromise=function(t){return Object.defineProperty(function(...e){let r=e[e.length-1];if(typeof r!="function")return t.apply(this,e);t.apply(this,e.slice(0,-1)).then(n=>r(null,n),r)},"name",{value:t.name})}});var Jr=v((ol,Br)=>{var ct=g("constants"),ma=process.cwd,pe=null,da=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return pe||(pe=ma.call(process)),pe};try{process.cwd()}catch(t){}typeof process.chdir=="function"&&(We=process.chdir,process.chdir=function(t){pe=null,We.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,We));var We;Br.exports=pa;function pa(t){ct.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(t),t.lutimes||r(t),t.chown=o(t.chown),t.fchown=o(t.fchown),t.lchown=o(t.lchown),t.chmod=n(t.chmod),t.fchmod=n(t.fchmod),t.lchmod=n(t.lchmod),t.chownSync=s(t.chownSync),t.fchownSync=s(t.fchownSync),t.lchownSync=s(t.lchownSync),t.chmodSync=i(t.chmodSync),t.fchmodSync=i(t.fchmodSync),t.lchmodSync=i(t.lchmodSync),t.stat=a(t.stat),t.fstat=a(t.fstat),t.lstat=a(t.lstat),t.statSync=u(t.statSync),t.fstatSync=u(t.fstatSync),t.lstatSync=u(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(c,l,d){d&&process.nextTick(d)},t.lchmodSync=function(){}),t.chown&&!t.lchown&&(t.lchown=function(c,l,d,f){f&&process.nextTick(f)},t.lchownSync=function(){}),da==="win32"&&(t.rename=typeof t.rename!="function"?t.rename:function(c){function l(d,f,h){var k=Date.now(),x=0;c(d,f,function S(T){if(T&&(T.code==="EACCES"||T.code==="EPERM")&&Date.now()-k<6e4){setTimeout(function(){t.stat(f,function(N,nt){N&&N.code==="ENOENT"?c(d,f,S):h(T)})},x),x<100&&(x+=10);return}h&&h(T)})}return Object.setPrototypeOf&&Object.setPrototypeOf(l,c),l}(t.rename)),t.read=typeof t.read!="function"?t.read:function(c){function l(d,f,h,k,x,S){var T;if(S&&typeof S=="function"){var N=0;T=function(nt,tt,b){if(nt&&nt.code==="EAGAIN"&&N<10)return N++,c.call(t,d,f,h,k,x,T);S.apply(this,arguments)}}return c.call(t,d,f,h,k,x,T)}return Object.setPrototypeOf&&Object.setPrototypeOf(l,c),l}(t.read),t.readSync=typeof t.readSync!="function"?t.readSync:function(c){return function(l,d,f,h,k){for(var x=0;;)try{return c.call(t,l,d,f,h,k)}catch(S){if(S.code==="EAGAIN"&&x<10){x++;continue}throw S}}}(t.readSync);function e(c){c.lchmod=function(l,d,f){c.open(l,ct.O_WRONLY|ct.O_SYMLINK,d,function(h,k){if(h){f&&f(h);return}c.fchmod(k,d,function(x){c.close(k,function(S){f&&f(x||S)})})})},c.lchmodSync=function(l,d){var f=c.openSync(l,ct.O_WRONLY|ct.O_SYMLINK,d),h=!0,k;try{k=c.fchmodSync(f,d),h=!1}finally{if(h)try{c.closeSync(f)}catch(x){}else c.closeSync(f)}return k}}function r(c){ct.hasOwnProperty("O_SYMLINK")&&c.futimes?(c.lutimes=function(l,d,f,h){c.open(l,ct.O_SYMLINK,function(k,x){if(k){h&&h(k);return}c.futimes(x,d,f,function(S){c.close(x,function(T){h&&h(S||T)})})})},c.lutimesSync=function(l,d,f){var h=c.openSync(l,ct.O_SYMLINK),k,x=!0;try{k=c.futimesSync(h,d,f),x=!1}finally{if(x)try{c.closeSync(h)}catch(S){}else c.closeSync(h)}return k}):c.futimes&&(c.lutimes=function(l,d,f,h){h&&process.nextTick(h)},c.lutimesSync=function(){})}function n(c){return c&&function(l,d,f){return c.call(t,l,d,function(h){y(h)&&(h=null),f&&f.apply(this,arguments)})}}function i(c){return c&&function(l,d){try{return c.call(t,l,d)}catch(f){if(!y(f))throw f}}}function o(c){return c&&function(l,d,f,h){return c.call(t,l,d,f,function(k){y(k)&&(k=null),h&&h.apply(this,arguments)})}}function s(c){return c&&function(l,d,f){try{return c.call(t,l,d,f)}catch(h){if(!y(h))throw h}}}function a(c){return c&&function(l,d,f){typeof d=="function"&&(f=d,d=null);function h(k,x){x&&(x.uid<0&&(x.uid+=4294967296),x.gid<0&&(x.gid+=4294967296)),f&&f.apply(this,arguments)}return d?c.call(t,l,d,h):c.call(t,l,h)}}function u(c){return c&&function(l,d){var f=d?c.call(t,l,d):c.call(t,l);return f&&(f.uid<0&&(f.uid+=4294967296),f.gid<0&&(f.gid+=4294967296)),f}}function y(c){if(!c||c.code==="ENOSYS")return!0;var l=!process.getuid||process.getuid()!==0;return!!(l&&(c.code==="EINVAL"||c.code==="EPERM"))}}});var Ur=v((sl,Gr)=>{var Hr=g("stream").Stream;Gr.exports=ya;function ya(t){return{ReadStream:e,WriteStream:r};function e(n,i){if(!(this instanceof e))return new e(n,i);Hr.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var s=Object.keys(i),a=0,u=s.length;a<u;a++){var y=s[a];this[y]=i[y]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=Infinity;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}t.open(this.path,this.flags,this.mode,function(c,l){if(c){o.emit("error",c),o.readable=!1;return}o.fd=l,o.emit("open",l),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);Hr.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),s=0,a=o.length;s<a;s++){var u=o[s];this[u]=i[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var Vr=v((al,Yr)=>{"use strict";Yr.exports=ga;var ha=Object.getPrototypeOf||function(t){return t.__proto__};function ga(t){if(t===null||typeof t!="object")return t;if(t instanceof Object)var e={__proto__:ha(t)};else var e=Object.create(null);return Object.getOwnPropertyNames(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}});var H=v((cl,He)=>{var q=g("fs"),ba=Jr(),wa=Ur(),va=Vr(),ye=g("util"),W,he;typeof Symbol=="function"&&typeof Symbol.for=="function"?(W=Symbol.for("graceful-fs.queue"),he=Symbol.for("graceful-fs.previous")):(W="___graceful-fs.queue",he="___graceful-fs.previous");function xa(){}function Kr(t,e){Object.defineProperty(t,W,{get:function(){return e}})}var gt=xa;ye.debuglog?gt=ye.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(gt=function(){var t=ye.format.apply(ye,arguments);t="GFS4: "+t.split(/\n/).join(`
GFS4: `),console.error(t)});q[W]||(zr=global[W]||[],Kr(q,zr),q.close=function(t){function e(r,n){return t.call(q,r,function(i){i||Xr(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(e,he,{value:t}),e}(q.close),q.closeSync=function(t){function e(r){t.apply(q,arguments),Xr()}return Object.defineProperty(e,he,{value:t}),e}(q.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){gt(q[W]),g("assert").equal(q[W].length,0)}));var zr;global[W]||Kr(global,q[W]);He.exports=Be(va(q));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!q.__patched&&(He.exports=Be(q),q.__patched=!0);function Be(t){ba(t),t.gracefulify=Be,t.createReadStream=tt,t.createWriteStream=b;var e=t.readFile;t.readFile=r;function r(p,_,E){return typeof _=="function"&&(E=_,_=null),M(p,_,E);function M(L,I,P,F){return e(L,I,function(j){j&&(j.code==="EMFILE"||j.code==="ENFILE")?Ot([M,[L,I,P],j,F||Date.now(),Date.now()]):typeof P=="function"&&P.apply(this,arguments)})}}var n=t.writeFile;t.writeFile=i;function i(p,_,E,M){return typeof E=="function"&&(M=E,E=null),L(p,_,E,M);function L(I,P,F,j,A){return n(I,P,F,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?Ot([L,[I,P,F,j],$,A||Date.now(),Date.now()]):typeof j=="function"&&j.apply(this,arguments)})}}var o=t.appendFile;o&&(t.appendFile=s);function s(p,_,E,M){return typeof E=="function"&&(M=E,E=null),L(p,_,E,M);function L(I,P,F,j,A){return o(I,P,F,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?Ot([L,[I,P,F,j],$,A||Date.now(),Date.now()]):typeof j=="function"&&j.apply(this,arguments)})}}var a=t.copyFile;a&&(t.copyFile=u);function u(p,_,E,M){return typeof E=="function"&&(M=E,E=0),L(p,_,E,M);function L(I,P,F,j,A){return a(I,P,F,function($){$&&($.code==="EMFILE"||$.code==="ENFILE")?Ot([L,[I,P,F,j],$,A||Date.now(),Date.now()]):typeof j=="function"&&j.apply(this,arguments)})}}var y=t.readdir;t.readdir=l;var c=/^v[0-5]\./;function l(p,_,E){typeof _=="function"&&(E=_,_=null);var M=c.test(process.version)?function(P,F,j,A){return y(P,L(P,F,j,A))}:function(P,F,j,A){return y(P,F,L(P,F,j,A))};return M(p,_,E);function L(I,P,F,j){return function(A,$){A&&(A.code==="EMFILE"||A.code==="ENFILE")?Ot([M,[I,P,F],A,j||Date.now(),Date.now()]):($&&$.sort&&$.sort(),typeof F=="function"&&F.call(this,A,$))}}}if(process.version.substr(0,4)==="v0.8"){var d=wa(t);S=d.ReadStream,N=d.WriteStream}var f=t.ReadStream;f&&(S.prototype=Object.create(f.prototype),S.prototype.open=T);var h=t.WriteStream;h&&(N.prototype=Object.create(h.prototype),N.prototype.open=nt),Object.defineProperty(t,"ReadStream",{get:function(){return S},set:function(p){S=p},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return N},set:function(p){N=p},enumerable:!0,configurable:!0});var k=S;Object.defineProperty(t,"FileReadStream",{get:function(){return k},set:function(p){k=p},enumerable:!0,configurable:!0});var x=N;Object.defineProperty(t,"FileWriteStream",{get:function(){return x},set:function(p){x=p},enumerable:!0,configurable:!0});function S(p,_){return this instanceof S?(f.apply(this,arguments),this):S.apply(Object.create(S.prototype),arguments)}function T(){var p=this;J(p.path,p.flags,p.mode,function(_,E){_?(p.autoClose&&p.destroy(),p.emit("error",_)):(p.fd=E,p.emit("open",E),p.read())})}function N(p,_){return this instanceof N?(h.apply(this,arguments),this):N.apply(Object.create(N.prototype),arguments)}function nt(){var p=this;J(p.path,p.flags,p.mode,function(_,E){_?(p.destroy(),p.emit("error",_)):(p.fd=E,p.emit("open",E))})}function tt(p,_){return new t.ReadStream(p,_)}function b(p,_){return new t.WriteStream(p,_)}var D=t.open;t.open=J;function J(p,_,E,M){return typeof E=="function"&&(M=E,E=null),L(p,_,E,M);function L(I,P,F,j,A){return D(I,P,F,function($,Ou){$&&($.code==="EMFILE"||$.code==="ENFILE")?Ot([L,[I,P,F,j],$,A||Date.now(),Date.now()]):typeof j=="function"&&j.apply(this,arguments)})}}return t}function Ot(t){gt("ENQUEUE",t[0].name,t[1]),q[W].push(t),Je()}var ge;function Xr(){for(var t=Date.now(),e=0;e<q[W].length;++e)q[W][e].length>2&&(q[W][e][3]=t,q[W][e][4]=t);Je()}function Je(){if(clearTimeout(ge),ge=void 0,q[W].length!==0){var t=q[W].shift(),e=t[0],r=t[1],n=t[2],i=t[3],o=t[4];if(i===void 0)gt("RETRY",e.name,r),e.apply(null,r);else if(Date.now()-i>=6e4){gt("TIMEOUT",e.name,r);var s=r.pop();typeof s=="function"&&s.call(null,n)}else{var a=Date.now()-o,u=Math.max(o-i,1),y=Math.min(u*1.2,100);a>=y?(gt("RETRY",e.name,r),e.apply(null,r.concat([i]))):q[W].push(t)}ge===void 0&&(ge=setTimeout(Je,0))}}});var bt=v(ut=>{"use strict";var Qr=Y().fromCallback,V=H(),Sa=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(t=>typeof V[t]=="function");Object.assign(ut,V);Sa.forEach(t=>{ut[t]=Qr(V[t])});ut.exists=function(t,e){return typeof e=="function"?V.exists(t,e):new Promise(r=>V.exists(t,r))};ut.read=function(t,e,r,n,i,o){return typeof o=="function"?V.read(t,e,r,n,i,o):new Promise((s,a)=>{V.read(t,e,r,n,i,(u,y,c)=>{if(u)return a(u);s({bytesRead:y,buffer:c})})})};ut.write=function(t,e,...r){return typeof r[r.length-1]=="function"?V.write(t,e,...r):new Promise((n,i)=>{V.write(t,e,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffer:a})})})};typeof V.writev=="function"&&(ut.writev=function(t,e,...r){return typeof r[r.length-1]=="function"?V.writev(t,e,...r):new Promise((n,i)=>{V.writev(t,e,...r,(o,s,a)=>{if(o)return i(o);n({bytesWritten:s,buffers:a})})})});typeof V.realpath.native=="function"?ut.realpath.native=Qr(V.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var tn=v((ll,Zr)=>{"use strict";var Ca=g("path");Zr.exports.checkPath=function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(Ca.parse(e).root,""))){let n=new Error(`Path contains invalid characters: ${e}`);throw n.code="EINVAL",n}}});var on=v((fl,Ge)=>{"use strict";var en=bt(),{checkPath:rn}=tn(),nn=t=>{let e={mode:511};return typeof t=="number"?t:U(U({},e),t).mode};Ge.exports.makeDir=async(t,e)=>(rn(t),en.mkdir(t,{mode:nn(e),recursive:!0}));Ge.exports.makeDirSync=(t,e)=>(rn(t),en.mkdirSync(t,{mode:nn(e),recursive:!0}))});var Q=v((ml,sn)=>{"use strict";var Ea=Y().fromPromise,{makeDir:ka,makeDirSync:Ue}=on(),Ye=Ea(ka);sn.exports={mkdirs:Ye,mkdirsSync:Ue,mkdirp:Ye,mkdirpSync:Ue,ensureDir:Ye,ensureDirSync:Ue}});var lt=v((dl,cn)=>{"use strict";var _a=Y().fromPromise,an=bt();function Oa(t){return an.access(t).then(()=>!0).catch(()=>!1)}cn.exports={pathExists:_a(Oa),pathExistsSync:an.existsSync}});var Ve=v((pl,un)=>{"use strict";var jt=H();function ja(t,e,r,n){jt.open(t,"r+",(i,o)=>{if(i)return n(i);jt.futimes(o,e,r,s=>{jt.close(o,a=>{n&&n(s||a)})})})}function $a(t,e,r){let n=jt.openSync(t,"r+");return jt.futimesSync(n,e,r),jt.closeSync(n)}un.exports={utimesMillis:ja,utimesMillisSync:$a}});var wt=v((yl,mn)=>{"use strict";var $t=bt(),R=g("path"),Pa=g("util");function qa(t,e,r){let n=r.dereference?i=>$t.stat(i,{bigint:!0}):i=>$t.lstat(i,{bigint:!0});return Promise.all([n(t),n(e).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function Fa(t,e,r){let n,i=r.dereference?s=>$t.statSync(s,{bigint:!0}):s=>$t.lstatSync(s,{bigint:!0}),o=i(t);try{n=i(e)}catch(s){if(s.code==="ENOENT")return{srcStat:o,destStat:null};throw s}return{srcStat:o,destStat:n}}function Ta(t,e,r,n,i){Pa.callbackify(qa)(t,e,n,(o,s)=>{if(o)return i(o);let{srcStat:a,destStat:u}=s;if(u){if(Zt(a,u)){let y=R.basename(t),c=R.basename(e);return r==="move"&&y!==c&&y.toLowerCase()===c.toLowerCase()?i(null,{srcStat:a,destStat:u,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(a.isDirectory()&&!u.isDirectory())return i(new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`));if(!a.isDirectory()&&u.isDirectory())return i(new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`))}return a.isDirectory()&&Ke(t,e)?i(new Error(be(t,e,r))):i(null,{srcStat:a,destStat:u})})}function Na(t,e,r,n){let{srcStat:i,destStat:o}=Fa(t,e,n);if(o){if(Zt(i,o)){let s=R.basename(t),a=R.basename(e);if(r==="move"&&s!==a&&s.toLowerCase()===a.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(i.isDirectory()&&Ke(t,e))throw new Error(be(t,e,r));return{srcStat:i,destStat:o}}function ln(t,e,r,n,i){let o=R.resolve(R.dirname(t)),s=R.resolve(R.dirname(r));if(s===o||s===R.parse(s).root)return i();$t.stat(s,{bigint:!0},(a,u)=>a?a.code==="ENOENT"?i():i(a):Zt(e,u)?i(new Error(be(t,r,n))):ln(t,e,s,n,i))}function fn(t,e,r,n){let i=R.resolve(R.dirname(t)),o=R.resolve(R.dirname(r));if(o===i||o===R.parse(o).root)return;let s;try{s=$t.statSync(o,{bigint:!0})}catch(a){if(a.code==="ENOENT")return;throw a}if(Zt(e,s))throw new Error(be(t,r,n));return fn(t,e,o,n)}function Zt(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function Ke(t,e){let r=R.resolve(t).split(R.sep).filter(i=>i),n=R.resolve(e).split(R.sep).filter(i=>i);return r.reduce((i,o,s)=>i&&n[s]===o,!0)}function be(t,e,r){return`Cannot ${r} '${t}' to a subdirectory of itself, '${e}'.`}mn.exports={checkPaths:Ta,checkPathsSync:Na,checkParentPaths:ln,checkParentPathsSync:fn,isSrcSubdir:Ke,areIdentical:Zt}});var vn=v((hl,wn)=>{"use strict";var K=H(),te=g("path"),Da=Q().mkdirs,Ia=lt().pathExists,Ra=Ve().utimesMillis,ee=wt();function Ma(t,e,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),ee.checkPaths(t,e,"copy",r,(i,o)=>{if(i)return n(i);let{srcStat:s,destStat:a}=o;ee.checkParentPaths(t,s,e,"copy",u=>u?n(u):r.filter?pn(dn,a,t,e,r,n):dn(a,t,e,r,n))})}function dn(t,e,r,n,i){let o=te.dirname(r);Ia(o,(s,a)=>{if(s)return i(s);if(a)return we(t,e,r,n,i);Da(o,u=>u?i(u):we(t,e,r,n,i))})}function pn(t,e,r,n,i,o){Promise.resolve(i.filter(r,n)).then(s=>s?t(e,r,n,i,o):o(),s=>o(s))}function La(t,e,r,n,i){return n.filter?pn(we,t,e,r,n,i):we(t,e,r,n,i)}function we(t,e,r,n,i){(n.dereference?K.stat:K.lstat)(e,(s,a)=>s?i(s):a.isDirectory()?Ua(a,t,e,r,n,i):a.isFile()||a.isCharacterDevice()||a.isBlockDevice()?Aa(a,t,e,r,n,i):a.isSymbolicLink()?Ka(t,e,r,n,i):a.isSocket()?i(new Error(`Cannot copy a socket file: ${e}`)):a.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${e}`)):i(new Error(`Unknown file: ${e}`)))}function Aa(t,e,r,n,i,o){return e?Wa(t,r,n,i,o):yn(t,r,n,i,o)}function Wa(t,e,r,n,i){if(n.overwrite)K.unlink(r,o=>o?i(o):yn(t,e,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function yn(t,e,r,n,i){K.copyFile(e,r,o=>o?i(o):n.preserveTimestamps?Ba(t.mode,e,r,i):ve(r,t.mode,i))}function Ba(t,e,r,n){return Ja(t)?Ha(r,t,i=>i?n(i):hn(t,e,r,n)):hn(t,e,r,n)}function Ja(t){return(t&128)==0}function Ha(t,e,r){return ve(t,e|128,r)}function hn(t,e,r,n){Ga(e,r,i=>i?n(i):ve(r,t,n))}function ve(t,e,r){return K.chmod(t,e,r)}function Ga(t,e,r){K.stat(t,(n,i)=>n?r(n):Ra(e,i.atime,i.mtime,r))}function Ua(t,e,r,n,i,o){return e?gn(r,n,i,o):Ya(t.mode,r,n,i,o)}function Ya(t,e,r,n,i){K.mkdir(r,o=>{if(o)return i(o);gn(e,r,n,s=>s?i(s):ve(r,t,i))})}function gn(t,e,r,n){K.readdir(t,(i,o)=>i?n(i):bn(o,t,e,r,n))}function bn(t,e,r,n,i){let o=t.pop();return o?Va(t,o,e,r,n,i):i()}function Va(t,e,r,n,i,o){let s=te.join(r,e),a=te.join(n,e);ee.checkPaths(s,a,"copy",i,(u,y)=>{if(u)return o(u);let{destStat:c}=y;La(c,s,a,i,l=>l?o(l):bn(t,r,n,i,o))})}function Ka(t,e,r,n,i){K.readlink(e,(o,s)=>{if(o)return i(o);if(n.dereference&&(s=te.resolve(process.cwd(),s)),t)K.readlink(r,(a,u)=>a?a.code==="EINVAL"||a.code==="UNKNOWN"?K.symlink(s,r,i):i(a):(n.dereference&&(u=te.resolve(process.cwd(),u)),ee.isSrcSubdir(s,u)?i(new Error(`Cannot copy '${s}' to a subdirectory of itself, '${u}'.`)):t.isDirectory()&&ee.isSrcSubdir(u,s)?i(new Error(`Cannot overwrite '${u}' with '${s}'.`)):za(s,r,i)));else return K.symlink(s,r,i)})}function za(t,e,r){K.unlink(e,n=>n?r(n):K.symlink(t,e,r))}wn.exports=Ma});var kn=v((gl,En)=>{"use strict";var B=H(),re=g("path"),Xa=Q().mkdirsSync,Qa=Ve().utimesMillisSync,ne=wt();function Za(t,e,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=ne.checkPathsSync(t,e,"copy",r);return ne.checkParentPathsSync(t,n,e,"copy"),tc(i,t,e,r)}function tc(t,e,r,n){if(n.filter&&!n.filter(e,r))return;let i=re.dirname(r);return B.existsSync(i)||Xa(i),xn(t,e,r,n)}function ec(t,e,r,n){if(!(n.filter&&!n.filter(e,r)))return xn(t,e,r,n)}function xn(t,e,r,n){let o=(n.dereference?B.statSync:B.lstatSync)(e);if(o.isDirectory())return cc(o,t,e,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return rc(o,t,e,r,n);if(o.isSymbolicLink())return fc(t,e,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${e}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}function rc(t,e,r,n,i){return e?nc(t,r,n,i):Sn(t,r,n,i)}function nc(t,e,r,n){if(n.overwrite)return B.unlinkSync(r),Sn(t,e,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function Sn(t,e,r,n){return B.copyFileSync(e,r),n.preserveTimestamps&&ic(t.mode,e,r),ze(r,t.mode)}function ic(t,e,r){return oc(t)&&sc(r,t),ac(e,r)}function oc(t){return(t&128)==0}function sc(t,e){return ze(t,e|128)}function ze(t,e){return B.chmodSync(t,e)}function ac(t,e){let r=B.statSync(t);return Qa(e,r.atime,r.mtime)}function cc(t,e,r,n,i){return e?Cn(r,n,i):uc(t.mode,r,n,i)}function uc(t,e,r,n){return B.mkdirSync(r),Cn(e,r,n),ze(r,t)}function Cn(t,e,r){B.readdirSync(t).forEach(n=>lc(n,t,e,r))}function lc(t,e,r,n){let i=re.join(e,t),o=re.join(r,t),{destStat:s}=ne.checkPathsSync(i,o,"copy",n);return ec(s,i,o,n)}function fc(t,e,r,n){let i=B.readlinkSync(e);if(n.dereference&&(i=re.resolve(process.cwd(),i)),t){let o;try{o=B.readlinkSync(r)}catch(s){if(s.code==="EINVAL"||s.code==="UNKNOWN")return B.symlinkSync(i,r);throw s}if(n.dereference&&(o=re.resolve(process.cwd(),o)),ne.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(B.statSync(r).isDirectory()&&ne.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return mc(i,r)}else return B.symlinkSync(i,r)}function mc(t,e){return B.unlinkSync(e),B.symlinkSync(t,e)}En.exports=Za});var xe=v((bl,_n)=>{"use strict";var dc=Y().fromCallback;_n.exports={copy:dc(vn()),copySync:kn()}});var Dn=v((wl,Nn)=>{"use strict";var On=H(),jn=g("path"),O=g("assert"),ie=process.platform==="win32";function $n(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{t[r]=t[r]||On[r],r=r+"Sync",t[r]=t[r]||On[r]}),t.maxBusyTries=t.maxBusyTries||3}function Xe(t,e,r){let n=0;typeof e=="function"&&(r=e,e={}),O(t,"rimraf: missing path"),O.strictEqual(typeof t,"string","rimraf: path should be a string"),O.strictEqual(typeof r,"function","rimraf: callback function required"),O(e,"rimraf: invalid options argument provided"),O.strictEqual(typeof e,"object","rimraf: options should be object"),$n(e),Pn(t,e,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&n<e.maxBusyTries){n++;let s=n*100;return setTimeout(()=>Pn(t,e,i),s)}o.code==="ENOENT"&&(o=null)}r(o)})}function Pn(t,e,r){O(t),O(e),O(typeof r=="function"),e.lstat(t,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&ie)return qn(t,e,n,r);if(i&&i.isDirectory())return Se(t,e,n,r);e.unlink(t,o=>{if(o){if(o.code==="ENOENT")return r(null);if(o.code==="EPERM")return ie?qn(t,e,o,r):Se(t,e,o,r);if(o.code==="EISDIR")return Se(t,e,o,r)}return r(o)})})}function qn(t,e,r,n){O(t),O(e),O(typeof n=="function"),e.chmod(t,438,i=>{i?n(i.code==="ENOENT"?null:r):e.stat(t,(o,s)=>{o?n(o.code==="ENOENT"?null:r):s.isDirectory()?Se(t,e,r,n):e.unlink(t,n)})})}function Fn(t,e,r){let n;O(t),O(e);try{e.chmodSync(t,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=e.statSync(t)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?Ce(t,e,r):e.unlinkSync(t)}function Se(t,e,r,n){O(t),O(e),O(typeof n=="function"),e.rmdir(t,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?pc(t,e,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function pc(t,e,r){O(t),O(e),O(typeof r=="function"),e.readdir(t,(n,i)=>{if(n)return r(n);let o=i.length,s;if(o===0)return e.rmdir(t,r);i.forEach(a=>{Xe(jn.join(t,a),e,u=>{if(!s){if(u)return r(s=u);--o==0&&e.rmdir(t,r)}})})})}function Tn(t,e){let r;e=e||{},$n(e),O(t,"rimraf: missing path"),O.strictEqual(typeof t,"string","rimraf: path should be a string"),O(e,"rimraf: missing options"),O.strictEqual(typeof e,"object","rimraf: options should be object");try{r=e.lstatSync(t)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&ie&&Fn(t,e,n)}try{r&&r.isDirectory()?Ce(t,e,null):e.unlinkSync(t)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return ie?Fn(t,e,n):Ce(t,e,n);if(n.code!=="EISDIR")throw n;Ce(t,e,n)}}function Ce(t,e,r){O(t),O(e);try{e.rmdirSync(t)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")yc(t,e);else if(n.code!=="ENOENT")throw n}}function yc(t,e){if(O(t),O(e),e.readdirSync(t).forEach(r=>Tn(jn.join(t,r),e)),ie){let r=Date.now();do try{return e.rmdirSync(t,e)}catch{}while(Date.now()-r<500)}else return e.rmdirSync(t,e)}Nn.exports=Xe;Xe.sync=Tn});var oe=v((vl,Rn)=>{"use strict";var Ee=H(),hc=Y().fromCallback,In=Dn();function gc(t,e){if(Ee.rm)return Ee.rm(t,{recursive:!0,force:!0},e);In(t,e)}function bc(t){if(Ee.rmSync)return Ee.rmSync(t,{recursive:!0,force:!0});In.sync(t)}Rn.exports={remove:hc(gc),removeSync:bc}});var Gn=v((xl,Hn)=>{"use strict";var wc=Y().fromPromise,Mn=bt(),Ln=g("path"),An=Q(),Wn=oe(),Bn=wc(async function(e){let r;try{r=await Mn.readdir(e)}catch{return An.mkdirs(e)}return Promise.all(r.map(n=>Wn.remove(Ln.join(e,n))))});function Jn(t){let e;try{e=Mn.readdirSync(t)}catch{return An.mkdirsSync(t)}e.forEach(r=>{r=Ln.join(t,r),Wn.removeSync(r)})}Hn.exports={emptyDirSync:Jn,emptydirSync:Jn,emptyDir:Bn,emptydir:Bn}});var Kn=v((Sl,Vn)=>{"use strict";var vc=Y().fromCallback,Un=g("path"),ft=H(),Yn=Q();function xc(t,e){function r(){ft.writeFile(t,"",n=>{if(n)return e(n);e()})}ft.stat(t,(n,i)=>{if(!n&&i.isFile())return e();let o=Un.dirname(t);ft.stat(o,(s,a)=>{if(s)return s.code==="ENOENT"?Yn.mkdirs(o,u=>{if(u)return e(u);r()}):e(s);a.isDirectory()?r():ft.readdir(o,u=>{if(u)return e(u)})})})}function Sc(t){let e;try{e=ft.statSync(t)}catch{}if(e&&e.isFile())return;let r=Un.dirname(t);try{ft.statSync(r).isDirectory()||ft.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")Yn.mkdirsSync(r);else throw n}ft.writeFileSync(t,"")}Vn.exports={createFile:vc(xc),createFileSync:Sc}});var ti=v((Cl,Zn)=>{"use strict";var Cc=Y().fromCallback,zn=g("path"),mt=H(),Xn=Q(),Ec=lt().pathExists,{areIdentical:Qn}=wt();function kc(t,e,r){function n(i,o){mt.link(i,o,s=>{if(s)return r(s);r(null)})}mt.lstat(e,(i,o)=>{mt.lstat(t,(s,a)=>{if(s)return s.message=s.message.replace("lstat","ensureLink"),r(s);if(o&&Qn(a,o))return r(null);let u=zn.dirname(e);Ec(u,(y,c)=>{if(y)return r(y);if(c)return n(t,e);Xn.mkdirs(u,l=>{if(l)return r(l);n(t,e)})})})})}function _c(t,e){let r;try{r=mt.lstatSync(e)}catch{}try{let o=mt.lstatSync(t);if(r&&Qn(o,r))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=zn.dirname(e);return mt.existsSync(n)||Xn.mkdirsSync(n),mt.linkSync(t,e)}Zn.exports={createLink:Cc(kc),createLinkSync:_c}});var ri=v((El,ei)=>{"use strict";var dt=g("path"),se=H(),Oc=lt().pathExists;function jc(t,e,r){if(dt.isAbsolute(t))return se.lstat(t,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:t,toDst:t}));{let n=dt.dirname(e),i=dt.join(n,t);return Oc(i,(o,s)=>o?r(o):s?r(null,{toCwd:i,toDst:t}):se.lstat(t,a=>a?(a.message=a.message.replace("lstat","ensureSymlink"),r(a)):r(null,{toCwd:t,toDst:dt.relative(n,t)})))}}function $c(t,e){let r;if(dt.isAbsolute(t)){if(r=se.existsSync(t),!r)throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}else{let n=dt.dirname(e),i=dt.join(n,t);if(r=se.existsSync(i),r)return{toCwd:i,toDst:t};if(r=se.existsSync(t),!r)throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:dt.relative(n,t)}}}ei.exports={symlinkPaths:jc,symlinkPathsSync:$c}});var oi=v((kl,ii)=>{"use strict";var ni=H();function Pc(t,e,r){if(r=typeof e=="function"?e:r,e=typeof e=="function"?!1:e,e)return r(null,e);ni.lstat(t,(n,i)=>{if(n)return r(null,"file");e=i&&i.isDirectory()?"dir":"file",r(null,e)})}function qc(t,e){let r;if(e)return e;try{r=ni.lstatSync(t)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}ii.exports={symlinkType:Pc,symlinkTypeSync:qc}});var di=v((_l,mi)=>{"use strict";var Fc=Y().fromCallback,si=g("path"),Z=bt(),ai=Q(),Tc=ai.mkdirs,Nc=ai.mkdirsSync,ci=ri(),Dc=ci.symlinkPaths,Ic=ci.symlinkPathsSync,ui=oi(),Rc=ui.symlinkType,Mc=ui.symlinkTypeSync,Lc=lt().pathExists,{areIdentical:li}=wt();function Ac(t,e,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,Z.lstat(e,(i,o)=>{!i&&o.isSymbolicLink()?Promise.all([Z.stat(t),Z.stat(e)]).then(([s,a])=>{if(li(s,a))return n(null);fi(t,e,r,n)}):fi(t,e,r,n)})}function fi(t,e,r,n){Dc(t,e,(i,o)=>{if(i)return n(i);t=o.toDst,Rc(o.toCwd,r,(s,a)=>{if(s)return n(s);let u=si.dirname(e);Lc(u,(y,c)=>{if(y)return n(y);if(c)return Z.symlink(t,e,a,n);Tc(u,l=>{if(l)return n(l);Z.symlink(t,e,a,n)})})})})}function Wc(t,e,r){let n;try{n=Z.lstatSync(e)}catch{}if(n&&n.isSymbolicLink()){let a=Z.statSync(t),u=Z.statSync(e);if(li(a,u))return}let i=Ic(t,e);t=i.toDst,r=Mc(i.toCwd,r);let o=si.dirname(e);return Z.existsSync(o)||Nc(o),Z.symlinkSync(t,e,r)}mi.exports={createSymlink:Fc(Ac),createSymlinkSync:Wc}});var xi=v((Ol,vi)=>{"use strict";var{createFile:pi,createFileSync:yi}=Kn(),{createLink:hi,createLinkSync:gi}=ti(),{createSymlink:bi,createSymlinkSync:wi}=di();vi.exports={createFile:pi,createFileSync:yi,ensureFile:pi,ensureFileSync:yi,createLink:hi,createLinkSync:gi,ensureLink:hi,ensureLinkSync:gi,createSymlink:bi,createSymlinkSync:wi,ensureSymlink:bi,ensureSymlinkSync:wi}});var ke=v((jl,Si)=>{function Bc(t,{EOL:e=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let o=r?e:"";return JSON.stringify(t,n,i).replace(/\n/g,e)+o}function Jc(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}Si.exports={stringify:Bc,stripBom:Jc}});var _i=v(($l,ki)=>{var Pt;try{Pt=H()}catch(t){Pt=g("fs")}var _e=Y(),{stringify:Ci,stripBom:Ei}=ke();async function Hc(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||Pt,n="throws"in e?e.throws:!0,i=await _e.fromCallback(r.readFile)(t,e);i=Ei(i);let o;try{o=JSON.parse(i,e?e.reviver:null)}catch(s){if(n)throw s.message=`${t}: ${s.message}`,s;return null}return o}var Gc=_e.fromPromise(Hc);function Uc(t,e={}){typeof e=="string"&&(e={encoding:e});let r=e.fs||Pt,n="throws"in e?e.throws:!0;try{let i=r.readFileSync(t,e);return i=Ei(i),JSON.parse(i,e.reviver)}catch(i){if(n)throw i.message=`${t}: ${i.message}`,i;return null}}async function Yc(t,e,r={}){let n=r.fs||Pt,i=Ci(e,r);await _e.fromCallback(n.writeFile)(t,i,r)}var Vc=_e.fromPromise(Yc);function Kc(t,e,r={}){let n=r.fs||Pt,i=Ci(e,r);return n.writeFileSync(t,i,r)}var zc={readFile:Gc,readFileSync:Uc,writeFile:Vc,writeFileSync:Kc};ki.exports=zc});var ji=v((Pl,Oi)=>{"use strict";var Oe=_i();Oi.exports={readJson:Oe.readFile,readJsonSync:Oe.readFileSync,writeJson:Oe.writeFile,writeJsonSync:Oe.writeFileSync}});var je=v((ql,qi)=>{"use strict";var Xc=Y().fromCallback,ae=H(),$i=g("path"),Pi=Q(),Qc=lt().pathExists;function Zc(t,e,r,n){typeof r=="function"&&(n=r,r="utf8");let i=$i.dirname(t);Qc(i,(o,s)=>{if(o)return n(o);if(s)return ae.writeFile(t,e,r,n);Pi.mkdirs(i,a=>{if(a)return n(a);ae.writeFile(t,e,r,n)})})}function tu(t,...e){let r=$i.dirname(t);if(ae.existsSync(r))return ae.writeFileSync(t,...e);Pi.mkdirsSync(r),ae.writeFileSync(t,...e)}qi.exports={outputFile:Xc(Zc),outputFileSync:tu}});var Ti=v((Fl,Fi)=>{"use strict";var{stringify:eu}=ke(),{outputFile:ru}=je();async function nu(t,e,r={}){let n=eu(e,r);await ru(t,n,r)}Fi.exports=nu});var Di=v((Tl,Ni)=>{"use strict";var{stringify:iu}=ke(),{outputFileSync:ou}=je();function su(t,e,r){let n=iu(e,r);ou(t,n,r)}Ni.exports=su});var Ri=v((Nl,Ii)=>{"use strict";var au=Y().fromPromise,G=ji();G.outputJson=au(Ti());G.outputJsonSync=Di();G.outputJSON=G.outputJson;G.outputJSONSync=G.outputJsonSync;G.writeJSON=G.writeJson;G.writeJSONSync=G.writeJsonSync;G.readJSON=G.readJson;G.readJSONSync=G.readJsonSync;Ii.exports=G});var Bi=v((Dl,Wi)=>{"use strict";var cu=H(),Qe=g("path"),uu=xe().copy,Mi=oe().remove,lu=Q().mkdirp,fu=lt().pathExists,Li=wt();function mu(t,e,r,n){typeof r=="function"&&(n=r,r={}),r=r||{};let i=r.overwrite||r.clobber||!1;Li.checkPaths(t,e,"move",r,(o,s)=>{if(o)return n(o);let{srcStat:a,isChangingCase:u=!1}=s;Li.checkParentPaths(t,a,e,"move",y=>{if(y)return n(y);if(du(e))return Ai(t,e,i,u,n);lu(Qe.dirname(e),c=>c?n(c):Ai(t,e,i,u,n))})})}function du(t){let e=Qe.dirname(t);return Qe.parse(e).root===e}function Ai(t,e,r,n,i){if(n)return Ze(t,e,r,i);if(r)return Mi(e,o=>o?i(o):Ze(t,e,r,i));fu(e,(o,s)=>o?i(o):s?i(new Error("dest already exists.")):Ze(t,e,r,i))}function Ze(t,e,r,n){cu.rename(t,e,i=>i?i.code!=="EXDEV"?n(i):pu(t,e,r,n):n())}function pu(t,e,r,n){uu(t,e,{overwrite:r,errorOnExist:!0},o=>o?n(o):Mi(t,n))}Wi.exports=mu});var Yi=v((Il,Ui)=>{"use strict";var Ji=H(),tr=g("path"),yu=xe().copySync,Hi=oe().removeSync,hu=Q().mkdirpSync,Gi=wt();function gu(t,e,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=Gi.checkPathsSync(t,e,"move",r);return Gi.checkParentPathsSync(t,i,e,"move"),bu(e)||hu(tr.dirname(e)),wu(t,e,n,o)}function bu(t){let e=tr.dirname(t);return tr.parse(e).root===e}function wu(t,e,r,n){if(n)return er(t,e,r);if(r)return Hi(e),er(t,e,r);if(Ji.existsSync(e))throw new Error("dest already exists.");return er(t,e,r)}function er(t,e,r){try{Ji.renameSync(t,e)}catch(n){if(n.code!=="EXDEV")throw n;return vu(t,e,r)}}function vu(t,e,r){return yu(t,e,{overwrite:r,errorOnExist:!0}),Hi(t)}Ui.exports=gu});var Ki=v((Rl,Vi)=>{"use strict";var xu=Y().fromCallback;Vi.exports={move:xu(Bi()),moveSync:Yi()}});var pt=v((Ml,zi)=>{"use strict";zi.exports=U(U(U(U(U(U(U(U(U(U({},bt()),xe()),Gn()),xi()),Ri()),Q()),Ki()),je()),lt()),oe())});var _u={};ho(_u,{default:()=>ku});var qe=C(g("@yarnpkg/shell")),lr=async()=>{await(0,qe.execute)("yarn",["@bud","registry","install"],{stdin:process.stdin,stdout:process.stdout}),await(0,qe.execute)("yarn",["@bud","info"],{stdin:process.stdin,stdout:process.stdout})};var Ir=C(g("@yarnpkg/cli")),St=C(g("@yarnpkg/core")),Me=C(g("@yarnpkg/shell")),st=C(Dr()),m=class extends Ir.BaseCommand{async getManifest(){return await St.Manifest.tryFind(this.context.cwd)}async getConfiguration(){return await St.Configuration.find(this.context.cwd,this.context.plugins)}async getProject(){let e=await this.getConfiguration(),{project:r}=await St.Project.find(e,this.context.cwd);return r}withPassthrough(e){return this.passthrough.length?this.passthrough.reduce((r,n)=>n?`${r} ${n}`:`${r}`,e):e}log(e){var n;let r=(n=this.name)!=null?n:"@bud";process.stdout.write(`[${r}] ${e}
`)}err(e){var n;let r=(n=this.name)!=null?n:"@bud";process.stderr.write(`[${r}] ${typeof e=="string"?e:e.message}
`),process.exit(1)}async $(...e){let r=await this.getProject();await Promise.all(e.map(async n=>{if(!!n){this.log(n);try{let i=await(0,Me.execute)(n,[],{cwd:r.cwd});if(i!==0)throw new Error(`${n} failed with code ${i}`)}catch(i){this.err(i)}}}))}async tryExecuting(e,r,n={}){try{let i=await(0,Me.execute)(e,r,n);if(i!==0)throw new Error(`\u274C ${e} ${r.join(" ")} failed`);return i}catch(i){throw new Error(i)}}};ot([st.bind],m.prototype,"getManifest",1),ot([st.bind],m.prototype,"getConfiguration",1),ot([st.bind],m.prototype,"getProject",1),ot([st.bind],m.prototype,"withPassthrough",1),ot([st.bind],m.prototype,"log",1),ot([st.bind],m.prototype,"err",1),ot([st.bind],m.prototype,"$",1);var Qt=class extends m{async execute(){process.stdout.write(`    
 _               _
| |__  _   _  __| |
|  _ \\| | | |/ _  |
| |_) | |_| | (_| |
|_.__/ \\__._|\\__._|
`),Object.values(de).filter(e=>e.usage).forEach(e=>{var r;(r=e.usage.examples)==null||r.forEach(([n,i])=>{process.stdout.write(`
[34m${i}[0m  ${n}
`)})})}};Qt.label="@bud",Qt.paths=[["@bud"]];var Lr=C(g("module")),at=C(g("path")),it={},et=((it==null?void 0:it.url)&&typeof it.url!="undefined"?it.url.replace("file:/",""):__dirname).split("sources/").shift(),Au=(0,at.join)(et,"package.json"),Wu=(0,at.join)(et,"storage");var Bu=(0,at.join)(et,"config","tsconfig.json");var w={root:et,config:(0,at.join)(et,"config"),sources:(0,at.join)(et,"sources"),tests:(0,at.join)(et,"tests"),mocks:(0,at.join)(et,"storage/mocks")},Ar;typeof(it==null?void 0:it.url)!="undefined"?Ar=(0,Lr.createRequire)(it.url)("../../../config/monorepo.config.cjs"):Ar=Mr();var Ct=class extends m{async execute(){try{await this.$("rm -rf **/.budfiles"),await this.$("rm -rf **/node_modules/*"),await this.$(`rm -rf ${w.sources}/@roots/*/lib/*`),await this.$(`rm -rf ${w.sources}/@roots/*/types/*`)}catch(e){}try{await this.$("rm -rf storage/packages/@roots/*"),await this.$("rm -rf storage/packages/npm/*"),await this.$("rm -rf storage/mocks/*")}catch(e){}}};Ct.label="@bud clean",Ct.paths=[["@bud","clean"]],Ct.usage={category:"@bud",description:"clean project artifacts",examples:[["clean project artifacts","yarn @bud clean"]]};var Wr=C(g("clipanion")),Le=C(g("path"));var la=(0,Le.join)(w.config,"tsconfig.json"),fa=(0,Le.join)(w.sources,"@repo/compile-kit/src/cjs"),Et=class extends m{constructor(){super(...arguments);this.package=Wr.Option.String("package to transpile","all")}async execute(){await this.$(`yarn ts-node --project ${la} ${fa} ${this.package}`)}};Et.label="@bud compile",Et.paths=[["@bud","compile"]],Et.usage={category:"@bud",description:"compile a package",details:"compiles package with vercel/ncc",examples:[["compile {package name}","yarn @bud compile @roots/bud-react"]]};var tl=`${et}/sources/@repo/compile-kit/src/cjs @roots/bud-support`,kt=class extends m{async execute(){await this.$("yarn @bud tsc"),await this.$("yarn @bud tsc --watch","yarn @bud test unit --verbose --watch","yarn @bud docs dev")}};kt.label="@bud dev",kt.paths=[["@bud","dev"]],kt.usage={category:"@bud",description:"develop project code",examples:[["run tsc, docusaurus & jest in watch mode","yarn @bud dev"]]};var _t=class extends m{async execute(){await this.$("yarn workspace @repo/docs docusaurus start")}};_t.label="@bud docs dev",_t.paths=[["@bud","docs","dev"]],_t.usage={category:"@bud",description:"develop docs",examples:[["develop docs","yarn @bud docs dev"]]};var $e=C(g("clipanion")),Xi=C(pt());var qt=class extends m{constructor(){super(...arguments);this.api=$e.Option.Boolean("-a,--api",!1,{description:"build api docs"});this.site=$e.Option.Boolean("-s,--site",!1,{description:"build site files"});this.readme=$e.Option.Boolean("-r,--readme",!1,{description:"build readme files"})}async execute(){let e=!this.site&&!this.readme&&!this.api;(e||this.api)&&await this.$("typedoc  --out ./sources/@repo/docs/content/dev/api  --tsconfig ./config/tsconfig.json  --entryPoints  ./sources/@roots/bud-framework/src/index.ts  ./sources/@roots/bud-framework/src/extension/index.ts  ./sources/@roots/bud-framework/src/methods/index.ts  ./sources/@roots/bud-framework/src/services/index.ts  ./sources/@roots/bud/src/index.ts  ./sources/@roots/bud/src/cli/index.ts  ./sources/@roots/bud-api/src/index.ts  ./sources/@roots/bud-build/src/index.ts  ./sources/@roots/bud-compiler/src/index.ts  ./sources/@roots/bud-hooks/src/index.ts  ./sources/@roots/bud-server/src/index.ts  ./sources/@roots/bud/src/index.ts  ./sources/@roots/container/src/index.ts  ./sources/@roots/sage/src/index.ts"),(e||this.site)&&(await this.$(`yarn node ${w.sources}/@repo/markdown-kit/compiled/cli-examples/index.js`),await this.$("yarn workspace @repo/docs run build"),await(0,Xi.copy)(`${w.sources}/@repo/docs/content/dev/api`,`${w.sources}/@repo/docs/build/dev/api`,{overwrite:!0})),(e||this.readme)&&await this.$(`yarn node ${w.sources}/@repo/markdown-kit/compiled/readme/index.js`)}};qt.label="@bud docs",qt.paths=[["@bud","docs"]],qt.usage={category:"@bud",description:"build docs and readme.",examples:[["build all","yarn @bud docs"],["build api documentation","yarn @bud docs --api"],["build api documentation and site files","yarn @bud docs --site"],["build readme files","yarn @bud docs --readme"]]};var Qi=C(g("clipanion"));var Ft=class extends m{constructor(){super(...arguments);this.passthrough=Qi.Option.Proxy({name:"netlify options"})}async execute(){await this.$(this.withPassthrough("yarn workspace @repo/docs netlify"))}};Ft.label="@bud netlify",Ft.paths=[["@bud","netlify"],["@bud","docs","netlify"]],Ft.usage={category:"@bud",description:"netlify alias",examples:[["run commands on netlify-cli","yarn @bud netlify"]]};var z=C(g("child_process")),rr=C(pt());var ce=class extends m{get hasPm2(){try{return(0,z.execSync)("yarn @bud pm2 --version"),!0}catch(e){return!1}}get hasVolta(){try{return(0,z.execSync)("volta -v"),!0}catch(e){return!1}}get voltaList(){return(0,z.execSync)("volta list").toString().trim().split(`
`).filter(e=>e.startsWith("runtime")||e.startsWith("package-manager")).map(e=>"- ".concat(e.split(" / ").shift().split(" (current").shift().replace("runtime ",""))).join(`
`)}get hasVerdaccio(){try{return(0,z.execSync)("yarn @bud pm2 verdaccio --version"),!0}catch(e){return!1}}get head(){return(0,z.execSync)("git rev-parse HEAD").toString().trim()}get branch(){return(0,z.execSync)("git rev-parse --abbrev-ref HEAD").toString().trim()}get pm2(){return(0,z.execSync)("yarn @bud pm2 ls").toString().trim()}get verdaccio(){return(0,z.execSync)("yarn @bud pm2 verdaccio --version").toString().trim()}get logs(){return(0,z.execSync)("yarn @bud pm2 logs --out --lines 5 --nostream").toString().trim().split(`
`).splice(2).join(`
`)}get requiredNode(){return(0,rr.readJsonSync)(`${w.root}/package.json`).volta.node}get requiredNpm(){return(0,rr.readJsonSync)(`${w.root}/package.json`).volta.npm}get pm2Version(){return(0,z.execSync)("yarn @bud pm2 --version").toString().trim().replace("v","")}get nodeVersion(){return process.version.replace("v","")}get yarn(){return(0,z.execSync)("yarn -v").toString().trim().replace("v","")}get npm(){return(0,z.execSync)("npm -v").toString().trim().replace("v","")}get gitLog(){return(0,z.execSync)(`git log --abbrev-commit --decorate --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(dim white)- %an%C(reset)%C(bold yellow)%d%C(reset)' origin..${this.branch}`).toString().trim()}async execute(){this.log(`    
 _               _
| |__  _   _  __| |
|  _ \\| | | |/ _  |
| |_) | |_| | (_| |
|_.__/ \\__._|\\__._|
`),this.hasVolta?process.stdout.write(`
${this.voltaList}
`):process.stdout.write(`
- node@${this.nodeVersion} (required: ${this.requiredNode})
- yarn@${this.yarn} 
- npm@${this.npm} (required: ${this.requiredNpm})
`),this.nodeVersion!==this.requiredNode&&process.stdout.write(`
[31m\u2718[0m node version mismatch

Your node version is ${process.version} but ${this.requiredNode} is required.
Consider using volta to guarantee you are using the correct version of node.`),this.npm!==this.requiredNpm&&process.stdout.write(`
[31m\u2718[0m npm version mismatch

Your npm version is ${this.npm} but ${this.requiredNode} is required.`),process.stdout.write(`
On branch \`${this.branch}\`:

${this.gitLog}
`),this.hasPm2&&this.hasVerdaccio&&process.stdout.write(`
${this.pm2}
${this.logs}`),this.context.stdout.write(`

`)}};ce.label="@bud info",ce.paths=[["@bud","info"]];var Zi=C(g("clipanion"));var Tt=class extends m{constructor(){super(...arguments);this.passthrough=Zi.Option.Proxy({name:"eslint options"})}async execute(){await this.$(this.withPassthrough('yarn eslint "./sources/@roots/*/src/**/*" --config ./config/eslint.config.cjs --ignore-path config/.eslintignore --no-error-on-unmatched-pattern'))}};Tt.label="@bud lint",Tt.paths=[["@bud","lint"]],Tt.usage={category:"@bud",description:"run eslint",examples:[["run eslint","yarn @bud lint"]]};var Nt=class extends m{async execute(){await this.$("yarn syncpack list-mismatches --config ./config/syncpack.config.cjs")}};Nt.label="@bud lint dependencies",Nt.paths=[["@bud","lint","dependencies"]],Nt.usage={category:"@bud",description:"ensure packages are synced",examples:[["lint dependency versions","yarn @bud lint dependencies"]]};var Dt=class extends m{async execute(){await this.$("yarn workspaces foreach --no-private exec yarn run package-check")}};Dt.label="@bud lint exports",Dt.paths=[["@bud","lint","exports"]],Dt.usage={category:"@bud",description:"lint published package module exports",examples:[["lint package.json module exports","yarn @bud lint exports"]]};var to=C(g("clipanion"));var It=class extends m{constructor(){super(...arguments);this.fix=to.Option.Boolean("-f,--fix",!0,{description:"fix"})}async execute(){await this.$(`yarn prettier ./sources/@roots/*/src/**/* ${this.fix?"--write":"--check"} --config ./config/prettier.config.cjs --ignore-unknown --no-error-on-unmatched-pattern`)}};It.label="@bud lint format",It.paths=[["@bud","format"]],It.usage={category:"@bud",description:"Run coding style linters",examples:[["run prettier","yarn @bud format"],["run prettier (no fix)","yarn @bud format --no-fix"]]};var rt=C(pt()),ue=C(g("path"));var Rt=class extends m{async execute(){try{if(await(0,rt.ensureDir)((0,ue.join)(w.root,"storage","packages")),await(0,rt.remove)((0,ue.join)(w.root,"storage","packages")),await(0,rt.pathExists)((0,ue.join)(w.root,"storage",".verdaccio-db.json"))){let r=await(0,rt.readJson)((0,ue.join)(w.root,"storage",".verdaccio-db.json"));r.list=[],await(0,rt.writeJson)(`${w.root}/storage/.verdaccio-db.json`,r)}}catch(e){throw new Error(e)}}};Rt.label="@bud registry clean",Rt.paths=[["@bud","registry","clean"]],Rt.usage={category:"@bud",description:"clean previously published packages",examples:[["clean previously published packages","yarn @bud registry clean"]]};var Mt=class extends m{async execute(){await this.tryExecuting("npm",["install","pm2","verdaccio"],{cwd:`${w.root}/storage`})}};Mt.label="@bud registry install",Mt.paths=[["@bud","registry","install"]],Mt.usage={category:"@bud",description:"install pm2 & verdaccio",examples:[["install pm2 and verdaccio","yarn @bud registry install"]]};var eo=C(g("clipanion")),ro=C(pt());var Lt=class extends m{constructor(){super(...arguments);this.passthrough=eo.Option.Proxy({name:"pm2 options"})}async execute(){var r;await(0,ro.realpath)(`${w.root}/storage/node_modules/pm2/bin/pm2`)||await this.tryExecuting("yarn",["@bud","registry","install"]),await this.tryExecuting("node",[`${w.root}/storage/node_modules/pm2/bin/pm2`,...(r=this.passthrough)!=null?r:[]].filter(Boolean))}};Lt.label="@bud pm2",Lt.paths=[["@bud","pm2"]],Lt.usage={category:"@bud",description:"registry access",examples:[["work with pm2","yarn @bud pm2"]]};var no=C(pt());var At=class extends m{async execute(){await(0,no.realpath)(`${w.root}/storage/node_modules/pm2/bin/pm2`)||await this.tryExecuting("yarn",["@bud","registry","install"]),await this.tryExecuting("yarn",["@bud","pm2","start",`${w.root}/storage/node_modules/.bin/verdaccio`,"--",`--config=${w.root}/config/verdaccio/config.yaml`]),await this.tryExecuting("yarn",["config","set","unsafeHttpWhitelist","--json",'["0.0.0.0","localhost"]']),await this.tryExecuting("yarn",["config","set","npmPublishRegistry","http://0.0.0.0:4873"]),await this.tryExecuting("yarn",["config","set","npmRegistryServer","http://0.0.0.0:4873"])}};At.label="@bud registry start",At.paths=[["@bud","registry","start"]],At.usage={category:"@bud",description:"start verdaccio registry",examples:[["start verdaccio server","yarn @bud registry start"]]};var Pe=C(g("@yarnpkg/shell")),io=C(pt());var Wt=class extends m{async execute(){try{if(!await(0,io.realpath)(`${w.root}/storage/node_modules/pm2/bin/pm2`))return;await this.tryExecuting("yarn",["@bud","pm2","stop","verdaccio"]),await this.tryExecuting("yarn",["@bud","pm2","delete","verdaccio"])}catch(e){}try{await(0,Pe.execute)("yarn",["config","unset","unsafeHttpWhitelist"]),await(0,Pe.execute)("yarn",["config","set","npmPublishRegistry","https://registry.npmjs.org"]),await(0,Pe.execute)("yarn",["config","set","npmRegistryServer","https://registry.npmjs.org"])}catch(e){}}};Wt.label="@bud registry stop",Wt.paths=[["@bud","registry","stop"]],Wt.usage={category:"@bud",description:"stop verdaccio registry",examples:[["stop verdaccio server","yarn @bud registry stop"]]};var nr=C(g("clipanion")),oo=C(g("semver"));var Bt=class extends m{constructor(){super(...arguments);this.version=nr.Option.String("-v,--version",null,{description:"version"});this.tag=nr.Option.String("-t,--tag",null,{description:"tag"})}async execute(){if(await this.$("yarn install --immutable"),!this.tag){let[e]=(0,oo.parse)(this.version).prerelease;this.tag=`${e!=null?e:"latest"}`}this.version&&await this.$(`yarn @bud version ${this.version}`),await this.$("yarn @bud build"),await this.$(`yarn workspaces foreach --no-private npm publish --access public --tag ${this.tag}`)}};Bt.label="@bud release",Bt.paths=[["@bud","release"]],Bt.usage={category:"@bud",description:"Do a release.",examples:[["Bump packages to x.y.z and publish","yarn @bud release --version x.y.z --tag latest"]]};var ir=C(g("clipanion")),Jt=C(pt()),Ht=C(g("path/posix"));var Gt=class extends m{constructor(){super(...arguments);this.select=ir.Option.String({name:"selectProjects",required:!0});this.passthrough=ir.Option.Proxy({name:"jest passthrough options"})}async execute(){this.passthrough.includes("integration")&&(await(0,Jt.ensureFile)((0,Ht.join)(w.root,"storage/yarn.lock")),await(0,Jt.ensureDir)((0,Ht.join)(w.root,"storage/mocks")),await(0,Jt.remove)((0,Ht.join)(w.root,"storage/mocks")),this.log("integration tests directory cleaned")),await this.$(this.withPassthrough(`yarn node --experimental-vm-modules ${(0,Ht.join)(w.root,"node_modules/.bin/jest")} --config ${(0,Ht.join)(w.root,"config/jest.config.js")} --selectProjects ${this.select} --verbose `))}};Gt.label="@bud test",Gt.paths=[["@bud","test"]],Gt.usage={category:"@bud",description:"run tests",examples:[["run e2e tests","yarn @bud test e2e"],["run unit tests","yarn @bud test unit"],["run integration tests","yarn @bud test integration"]]};var Ut=class extends m{async execute(){await this.tryExecuting("yarn",["@bud","registry","start"])}};Ut.label="@bud test setup",Ut.paths=[["@bud","test","setup"]],Ut.usage={category:"@bud",description:"setup integration/e2e tests",examples:[["run setup","yarn @bud test setup"]]};var Yt=class extends m{async execute(){await this.tryExecuting("yarn",["@bud","registry","stop"])}};Yt.label="@bud test teardown",Yt.paths=[["@bud","test","teardown"]],Yt.usage={category:"@bud",description:"teardown integration/e2e tests",examples:[["run teardown","yarn @bud test teardown"]]};var so=C(g("clipanion")),ao=C(g("path"));var Vt=class extends m{constructor(){super(...arguments);this.tsconfig=(0,ao.join)(w.config,"tsconfig.json");this.passthrough=so.Option.Proxy({name:"tsc options"})}async execute(){await this.$(this.withPassthrough(`yarn tsc -b ${this.tsconfig}`))}};Vt.label="@bud tsc",Vt.paths=[["@bud","tsc"],["@bud","build"]],Vt.usage={category:"@bud",description:"Run the typescript compiler",examples:[["run the typescript compiler","yarn @bud tsc"],["run the typescript compiler in watch mode","yarn @bud tsc --watch"],["run the typescript compiler with forced rebuild (no incremental compilation)","yarn @bud tsc --force"]]};var co=C(g("clipanion")),or=C(g("path"));var Su=(0,or.join)(w.config,"tsconfig.json"),Cu=(0,or.join)(w.sources,"@repo/compile-kit/src/vendor/index.ts"),Kt=class extends m{constructor(){super(...arguments);this.request=co.Option.Rest()}async execute(){await this.$(`yarn ts-node-esm --project ${Su} ${Cu} ${this.request}`)}};Kt.label="@bud vendor",Kt.paths=[["@bud","vendor"]],Kt.usage={category:"@bud",description:"vendor a package"};var uo=C(g("clipanion"));var zt=class extends m{constructor(){super(...arguments);this.version=uo.Option.String()}async execute(){if(!this.version){let{version:e}=await this.getManifest();this.version=e}await this.$(`yarn workspaces foreach --no-private package set version ${this.version}`)}};zt.label="@bud version",zt.paths=[["@bud","version"]],zt.usage={category:"@bud",description:"bump version of public packages",examples:[["Bump packages to x.y.z","yarn @bud version x.y.z"]]};var de={Bud:Qt,Clean:Ct,Compile:Et,Dev:kt,Docs:qt,DocsDev:_t,DocsNetlify:Ft,Format:It,Info:ce,Lint:Tt,LintDependencies:Nt,LintExports:Dt,Pm2:Lt,RegistryClean:Rt,RegistryInstall:Mt,RegistryStart:At,RegistryStop:Wt,Release:Bt,TestRun:Gt,TestSetup:Ut,TestTeardown:Yt,Tsc:Vt,Vendor:Kt,Version:zt};var Eu={hooks:{afterAllInstalled:lr},commands:Object.values(de)},ku=Eu;return _u;})();
return plugin;
}
};
