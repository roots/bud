---
slug: '6.3.0'
title: 'Release: 6.3.0'
description: 'Release notes for bud.js 6.3.0'
date: 2022-07-01
author: Kelly Mears
author_title: Lead developer
author_url: https://github.com/kellymears
author_image_url: https://avatars.githubusercontent.com/u/397606?v=4
tags: [release]
---

import CodeBlock from '@theme/CodeBlock'

<!--truncate-->

## @roots/browserslist-config

`@wordpress/browserslist-config` is licensed in a way that is not compatible with bud's overall licensing ideals.

Accordingly, we are now publishing a roots standard browserslist config: `@roots/browserslist-config`. It provides a choice of three configurations. Select whichever is the best fit for your project and audience:

| Export                             | Description                                                                            |
| ---------------------------------- | -------------------------------------------------------------------------------------- |
| @roots/browserslist-config         | >1%. Similar to @wordpress/browserslist-config                                         |
| @roots/browserslist-config/current | >.5%. Similar to @facebook/docusaurus' default                                         |
| @roots/browserslist-config/broad   | Targets the last 3 versions of major browsers. Similar to @shopify/browserslist-config |

All configurations target the most recent version of `firefox`, `chrome` and `safari` when the NODE_ENV is `development`.

## Fix: @roots/bud-vue

A small configuration issues in the @roots/bud-vue extension has been fixed. Returns `@roots/bud-vue` to the zero-config ideal.

## Improvement: env expansion now only applied to project `.env` values

**bud.js** still sources envvars from process and its path, but will no longer attempt to expand values outside of bud root.

This could cause issues if `${` and other such character strings were used in bud's path without being escaped.

## Improvement: multi-compiler root directory

You can now pass an overrides object to `bud.make`'s first parameter, which will be merged with the default object. This is particularly useful for setting a root directory, but it takes any options from `bud.factory` (if you want to override extensions, for instance).

This documentation has a ways to go, but the [bud.make](https://bud.js.org/docs/bud.make) docs have been updated with more information and an example of this new fn signature.

## Improvement: `@roots/bud-postcss`

Short version:

If you want to add `some-example-plugin` to your project, you can now do this:

```js
bud.postcss.setPlugin('example-postcss-plugin')
```

And you'll wind up with this:

- `postcss-import`
- `postcss-nesting`
- `some-example-plugin`
- `postcss-preset-env`

Longer version:

Essentially 100% of postcss users want three things from postcss: `@import`, nesting, and the arcane magic that is `postcss-preset-env`. Some want more, but none want less. And out of that 100%, pretty much 100% of them want the plugins in that order.

That 100% figure is absolutely a fabrication, but I do think there is something to it.

Nobody wants nesting before import because it just doesn't work. Everything goes sideways _immediately_. You probably have an `@import` right at the top and postcss has no way to know what to do with it.

So, that basic asusmption is kind of locked down now (at least by default &mdash; [check the docs for information on how to override](https://bud.js.org/extensions/bud-postcss)). This is how the config syntax got easier. When you set a plugin or a set of plugins they'll get slotted in _before_ `env` and after
`import` and `nesting`.

I mean, look how carefree `@roots/bud-tailwindcss` gets to be now:

```ts
const tailwindcss = await this.resolve('tailwindcss')
const nesting = await this.resolve('tailwindcss/nesting/index.js')

this.app.postcss.setPlugins({nesting, tailwindcss})
```

That's actually all the extension really does, at the moment. It's great.

Tons of information has been added to the [@roots/bud-postcss documentation](https://bud.js.org/extensions/bud-postcss).

## `@roots/sage/client/lazy`

This is a fun client import for @roots/sage users:

```ts
import lazy from '@roots/sage/client/lazy'

const makeConfetti = async () => {
  await lazy(import('skypack:canvas-confetti'), confetti => confetti())
}
```

`import()` is statically analyzed so you have to call it as above. But it saves you from having to destructure the module. Using it with the `skypack` cdn is optional and just for demonstration.

## bud.bundle

It's pretty passe to just go throwing the entirety of node_modules into a `vendor.js` file with `splitChunks`. Why not be cool and make separate chunks for each of the dependencies that really need it?

```ts
bud.bundle('react')
```

Or, assign a name to some dependencies you always use together:

```ts
bud.bundle('react', ['react', 'react-dom'])
```

Nice chunk!

You're not restricted to `node_modules`, use your own code with it too, if you want. The only rule is that the chunk members are being addressed by directory. So, to match your own code you need to make a directory for it.
You can always use `bud.splitChunks` if you need more control than that.

## Public path

I'm just going to come out and say it: if you are not serving from web root you should specify a public path.

This is what I'm imagining you saying right now:

- "But, I shouldn't have to set a public path!"
- "Setting a public path is unncessary"
- "A base URL once robbed me on the L train and now I only take ubers"

Here are my responses:

- [vue cli requires publicPath outside of web root](https://cli.vuejs.org/config/#publicpath)
- [next.js requires publicPath outside of web root](https://nextjs.org/docs/api-reference/next.config.js/basepath)
- [vite requires publicPath outside of web root](https://vitejs.dev/guide/build.html#public-base-path)
- [gatsby requires publicPath outside of web root](https://www.gatsbyjs.com/docs/how-to/previews-deploys-hosting/path-prefix/)
- [create react app requires publicPath outside of web root](https://create-react-app.dev/docs/advanced-configuration/)

In all seriousness we'll get more specific & explicit about this in the documentation but I can say that in the future bud will expect users not serving assets from web root to define a public path. Right now we characterize
it as "if you want to use dynamic imports", but it will be simplifying to just assume it is set.

I think it is a reasonable requirement and certainly a common one. And, for what it's worth, I'm afraid to take the L train, too.

## Upgrading to bud.js 6.3.0

If you are using `@wordpress/browserslist-config` in your project (check the `browserslist` field of `package.json` if you aren't sure) you will need to either:

- Update the `browserslist` field with a config from the table above.
- Install `@wordpress/browserslist-config` as a project dependency.

`@wordpress/browserslist-config` is no longer a dependency of bud.js, so you must do one of those two things or else you will experience build errors.

```

```
