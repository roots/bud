---
title: Building skypack modules
description: Include remote resources in the bundle
slug: building-skypack
sidebar_label: Building skypack modules
---

:::warning

This feature is flagged by webpack as **experimental** and, as such, it is opt-in.

If you use this feature and bump into a problem please ensure that
**bud.js** is doing something wrong before opening an issue in the roots/bud repository. Consider accompanying your issue with
a PR that implements the change you would like to see.

:::

You can build remote packages at compile time, serve them locally, and generate a lockfile to guarantee deployed dependencies match your development environment.

By default **bud.js** is configured to allow modules from [skypack.dev](https://www.skypack.dev/) but you can add other CDNs as well.

To enable this feature you may call:

```ts
app.http.enable()
```

Or, set the `build` command's `--buildHttp` flag.

This will generate some additional files in your storage directory. You will want to add these files to `.gitignore`:

```gitignore title=".gitignore"
!.budfiles/bud/bud.lock
!.budfiles/bud/bud.lock.cache
```

### Serving remote resources locally

When deploying you can use the `--freeze` flag to ensure dependencies are correct.
`--freeze` will fail if the above files are not available, which is why they must
be added to version control.

Now, any remote imports will be served from the bundle rather than a request to the remote URL.

Take note that any packages listed under `imports` in `package.json` will still be resolved to the remote resource, so
you must import from the full URL when using this method:

```ts title="app.js"
import Alpine from 'https://cdn.skypack.dev/alpinejs'

window.Alpine = Alpine
```

If you mix approaches you may end up forcing users to download two copies of the script.
If using `--buildHttp` it is best to go all-in and avoid using the `imports` mapping entirely.

### Using with other CDNs

By default `bud.http` allows for remote resources from `https://cdn.skypack.dev/`. You can customize this to allow for
usage of other CDNs with `bud.http.setAllowedUris`:

```ts
bud.http.setAllowedUris([
  'https://cdn.skypack.dev/',
  'https://cdn.example.com/',
])
```

`bud.http.setAllowedUris` returns the `bud.http` instance.

### Proxying requests

You may proxy network requests using `bud.http.setProxy`:

```ts
bud.http.setProxy('https://proxy.example.com')
```

`bud.http.setAllowedUris` returns the `bud.http` instance.

### Upgrading packages

By default **bud.js** will upgrade packages when a new version is available (unless the lockfile is frozen). To disable this feature you may use `bud.http.setUpgrade`:

```ts
bud.http.setUpgrade(false)
```

`bud.http.setUpgrade` returns the `bud.http` instance.

### Setting the lockfile location

By default the lockfile is stored at `[@storage directory]/[compiler name]/bud.lock`. You may customize this with `bud.http.setLockfileLocation`:

```ts
bud.http.setLockfileLocation(app.path('bud.lock')) // place lockfile in root of project
```
