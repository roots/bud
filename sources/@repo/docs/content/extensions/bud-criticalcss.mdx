---
title: '@roots/bud-criticalcss'
description: Generate above-the-fold CSS
sidebar_label: 'ðŸŸ¡ @roots/bud-criticalcss'
---

import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'
import {Install} from '@site/src/docs/Install'

:::warning

This extension is experimental.

:::

[@roots/bud-criticalcss](/extensions/bud-criticalcss) generates 'above-the-fold' css from your application styles.

For more information on this technique check out this [web.dev article](https://web.dev/extract-critical-css/).

## Installation

<Install packages="@roots/bud-criticalcss" />

## Generating critical styles

You need to do two things:

- Either:
  - specify a `src`: a URL or a path on disk to the markup that will be used to generate critical styles
  - provide `html`: the markup as a string
- explicitly enable the extension

From a URL:

```ts title="bud.config.mjs"
bud.critical.src(`http://example.test`).enable()
```

From a path:

```ts title="bud.config.mjs"
bud.critical.src(bud.path('path/to/index.html')).enable()
```

From raw markup:

```ts title="bud.config.mjs"
bud.critical.html(`<html>...</html>`).enable()
```

Regardless of how you handle it, you want to call `enable`.

## Add the css

The extracted styles will be emitted as a stylesheet to `critical/*.css`.

Inline the contents in the `head` of your response.

If you're using WordPress you might want to do something like this:

```php
  <!-- ...head -->
  <?php wp_head(); ?>
  <?php if (realpath(__DIR__ . '/public/critical/app.css')) echo "<style>" . file_get_contents(__DIR__ . '/public/critical/app.css') . "</style>"; ?>
</head>
```

Or, write a function and call it. Whatever works.
