---
title: '@roots/bud-postcss'
description: 'postcss support for bud.js projects'
sidebar_label: 'üü¢ @roots/bud-postcss'
image: 'https://bud.js.org/img/share/extensions/bud-postcss.png'
---

import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'
import CodeBlock from '@theme/CodeBlock'

import {Install} from '@site/src/docs/Install'

import Example from '!!raw-loader!@site/../../../examples/postcss/bud.config.js'

[PostCSS](https://postcss.org) can be added by installing the **@roots/bud-postcss** extension.

## Installation

<Install packages="@roots/bud-postcss" />

## Configuration

By default, **@roots/bud-postcss** includes:

- [postcss-import](https://github.com/postcss/postcss-import)
- [postcss-nested](https://github.com/postcss/postcss-nested)
- [postcss-preset-env](https://preset-env.cssdb.org/)

If this works for you, great! No need to keep reading. But, should you need something more specialized,
you can configure it in your bud config file or a [postcss.config.js[ file in your project's root directory.

:::info

If you have a postcss config file in your project, that configuration will be used instead of the defaults provided by this extension.

:::

### Add a plugin

Let's say you want to use [postcss-grid-kiss](https://github.com/sylvainpolletvillard/postcss-grid-kiss). This is an extension that
lets you write a CSS grid with ascii art (!!):

```ascii
body {
	grid-kiss:
		"+-------------------------------+      "
		"|           header ‚Üë            | 120px"
		"+-------------------------------+      "
		"                                       "
		"+-- 30% ---+  +--- auto --------+      "
		"| .sidebar |  |       main      | auto "
		"+----------+  +-----------------+      "
		"                                       "
		"+-------------------------------+      "
		"|              ‚Üì                | 60px "
		"|         ‚Üí footer ‚Üê            |      "
		"+-------------------------------+      "
}
```

You can do exactly that with `postcss.setPlugin`.

The function takes up to two parameters.

The first is the resolvable plugin module name.

```js
bud.postcss.setPlugin('precss')
```

The second parameter to be explicit about where to resolve the plugin from:

```js
bud.postcss.setPlugin('precss', bud.path('./directory/dev-plugin.js'))
```

Lastly, you can use a `tuple` alongside the path to set any associated options in one call.

```js
bud.postcss.setPlugin('precss', [
  require.resolve('postcss-preset-env'), // the plugin module path
  {stage: 1}, // options
])
```

### Set plugins

Add multiple postcss plugins. Takes a single parameter, which is either a plain `Object` or a `Map` using the plugin
name as keys and the plugin module path and options as values.

The options can be either a single object or an array of objects.

```js
bud.postcss.setPlugins(
  new Map([
    ['postcss-import', require.resolve('postcss-import')],
    [
      'postcss-preset-env',
      [require.resolve('postcss-preset-env'), {stage: 1}],
    ],
  ]),
)
```

### Modify plugin options

You can modify options for a postcss plugin using **postcss.setPluginOptions**. Takes two parameters. The first is the plugin name,
the second is the options object.

```js
bud.postcss.setPluginOptions('precss', {optimize: false})
```

### Remove a plugin

You may remove a plugin with **postcss.unsetPlugin**.

```js
bud.postcss.unsetPlugin('postcss-import')
```
