"use strict";(self.webpackChunk_roots_bud_docs=self.webpackChunk_roots_bud_docs||[]).push([[39650],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return m}});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var u=a.createContext({}),s=function(e){var t=a.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(u.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,u=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(n),m=r,f=d["".concat(u,".").concat(m)]||d[m]||c[m]||i;return n?a.createElement(f,o(o({ref:t},p),{},{components:n})):a.createElement(f,o({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var u in t)hasOwnProperty.call(t,u)&&(l[u]=t[u]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},93461:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return p},metadata:function(){return c},toc:function(){return d},default:function(){return f}});var a=n(87462),r=n(63366),i=(n(67294),n(3905)),o=n(26396),l=n(58215),u=["components"],s={title:"Environment-specific configuration",description:"Use multiple configuration files to target different environments",sidebar_label:"Environment-specific configs",image:"https://budjs.netlify.app/img/share/guides/general-use__config-env.png"},p=void 0,c={unversionedId:"general-use/config-env",id:"general-use/config-env",title:"Environment-specific configuration",description:"Use multiple configuration files to target different environments",source:"@site/guides/general-use/config-env.mdx",sourceDirName:"general-use",slug:"/general-use/config-env",permalink:"/guides/general-use/config-env",tags:[],version:"current",frontMatter:{title:"Environment-specific configuration",description:"Use multiple configuration files to target different environments",sidebar_label:"Environment-specific configs",image:"https://budjs.netlify.app/img/share/guides/general-use__config-env.png"},sidebar:"sidebar",previous:{title:"Introduction",permalink:"/guides/general-use/"},next:{title:"Static config",permalink:"/guides/general-use/config-static"}},d=[{value:"Example",id:"example",children:[],level:2}],m={toc:d};function f(e){var t=e.components,n=(0,r.Z)(e,u);return(0,i.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"This guide assumes you are already familiar with ",(0,i.kt)("a",{parentName:"p",href:"/guides/getting-started/config"},"configuring bud using vanilla JS"),"."))),(0,i.kt)("p",null,"Bud has tools to deal with ",(0,i.kt)("inlineCode",{parentName:"p"},"production")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"development")," builds of your project. But, you can also create configuration files which are only applied for certain builds."),(0,i.kt)("p",null,"For instance, if you have configuration which only applies to development builds you can create a file called ",(0,i.kt)("inlineCode",{parentName:"p"},"bud.config.development.js")," in the root of your project. It works just like\n",(0,i.kt)("inlineCode",{parentName:"p"},"bud.config.js")," except it is only applied in development."),(0,i.kt)("p",null,"Environment specific configs are compatible with any supported configuration type (js, ts, yml, or json)."),(0,i.kt)("p",null,"You can utilize any number of supported configs in the same project."),(0,i.kt)("p",null,"So, if you want to use ",(0,i.kt)("inlineCode",{parentName:"p"},"bud.config.ts")," as a base config, and then create ",(0,i.kt)("inlineCode",{parentName:"p"},"bud.config.development.ts")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"bud.config.production.ts")," for your environment specific requirements,\nthat's totally doable. Each of the environment limited configs will be used in their respective environments, and the base config will always be applied regardless."),(0,i.kt)("h2",{id:"example"},"Example"),(0,i.kt)("p",null,"This configuration:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Specifies an entrypoint containing ",(0,i.kt)("inlineCode",{parentName:"li"},"app.js"),"."),(0,i.kt)("li",{parentName:"ul"},"Specifies that in ",(0,i.kt)("inlineCode",{parentName:"li"},"production")," mode the entrypoint should be hashed and minified."),(0,i.kt)("li",{parentName:"ul"},"Specifies that in ",(0,i.kt)("inlineCode",{parentName:"li"},"development")," mode the entrypoint should include source maps.")),(0,i.kt)(o.Z,{groupId:"lang",defaultValue:"ts",values:[{label:"Javascript",value:"js"},{label:"TypeScript",value:"ts"}],mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:"title='bud.config.js'",title:"'bud.config.js'"},"module.exports = app =>\n  app\n    .entry('app', 'app.js')\n    .when(\n      app.isProduction,\n      () => app.hash().minimize()\n      () => app.devtool()\n    )\n"))),(0,i.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title='bud.config.ts'",title:"'bud.config.ts'"},"import type {Framework} from '@roots/bud'\n\nexport default function (app: Framework): void {\n  app\n    .entry('app', 'app.js')\n    .when(\n      app.isProduction,\n      () => app.hash().minimize()\n      () => app.devtool()\n    )\n}\n")))),(0,i.kt)("p",null,"Here is the same thing but utilizing environment-specific config files instead of ",(0,i.kt)("a",{parentName:"p",href:"/docs/bud.when"},"bud.when"),"."),(0,i.kt)(o.Z,{groupId:"lang",defaultValue:"ts",values:[{label:"Javascript",value:"js"},{label:"TypeScript",value:"ts"}],mdxType:"Tabs"},(0,i.kt)(l.Z,{value:"js",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:"title='bud.config.js'",title:"'bud.config.js'"},"module.exports = app => app.entry('app', 'app.js')\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:"title='bud.config.development.js'",title:"'bud.config.development.js'"},"module.exports = app => app.hash().minify()\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:"title='bud.config.production.js'",title:"'bud.config.production.js'"},"module.exports = app => app.devtool()\n"))),(0,i.kt)(l.Z,{value:"ts",mdxType:"TabItem"},(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title='bud.config.ts'",title:"'bud.config.ts'"},"import type {Framework} from '@roots/bud'\n\nexport default (app: Framework) => app.entry('app', 'app.js')\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js",metastring:"title='bud.config.development.ts'",title:"'bud.config.development.ts'"},"import type {Framework} from '@roots/bud'\n\nexport default (app: Framework) => app.hash().minify()\n")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title='bud.config.production.ts'",title:"'bud.config.production.ts'"},"import type {Framework} from '@roots/bud'\n\nexport default (app: Framework) => app.devtool()\n")))),(0,i.kt)("p",null,"Worth it? In this case, probably not. But this is a trivial example. Application configuration can be very complex\nand this bit of extra clarity might go a long way to helping keep your house in order."))}f.isMDXComponent=!0},58215:function(e,t,n){var a=n(67294);t.Z=function(e){var t=e.children,n=e.hidden,r=e.className;return a.createElement("div",{role:"tabpanel",hidden:n,className:r},t)}},26396:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(87462),r=n(67294),i=n(72389),o=n(79443);var l=function(){var e=(0,r.useContext)(o.Z);if(null==e)throw new Error('"useUserPreferencesContext" is used outside of "Layout" component.');return e},u=n(63616),s=n(86010),p="tabItem_1uMI";function c(e){var t,n,i,o=e.lazy,c=e.block,d=e.defaultValue,m=e.values,f=e.groupId,g=e.className,v=r.Children.map(e.children,(function(e){if((0,r.isValidElement)(e)&&void 0!==e.props.value)return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})),b=null!=m?m:v.map((function(e){var t=e.props;return{value:t.value,label:t.label,attributes:t.attributes}})),h=(0,u.lx)(b,(function(e,t){return e.value===t.value}));if(h.length>0)throw new Error('Docusaurus error: Duplicate values "'+h.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.');var y=null===d?d:null!=(t=null!=d?d:null==(n=v.find((function(e){return e.props.default})))?void 0:n.props.value)?t:null==(i=v[0])?void 0:i.props.value;if(null!==y&&!b.some((function(e){return e.value===y})))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+y+'" but none of its children has the corresponding value. Available values are: '+b.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");var k=l(),w=k.tabGroupChoices,N=k.setTabGroupChoices,j=(0,r.useState)(y),x=j[0],T=j[1],E=[],O=(0,u.o5)().blockElementScrollPositionUntilNextRender;if(null!=f){var C=w[f];null!=C&&C!==x&&b.some((function(e){return e.value===C}))&&T(C)}var I=function(e){var t=e.currentTarget,n=E.indexOf(t),a=b[n].value;a!==x&&(O(t),T(a),null!=f&&N(f,a))},P=function(e){var t,n=null;switch(e.key){case"ArrowRight":var a=E.indexOf(e.currentTarget)+1;n=E[a]||E[0];break;case"ArrowLeft":var r=E.indexOf(e.currentTarget)-1;n=E[r]||E[E.length-1]}null==(t=n)||t.focus()};return r.createElement("div",{className:"tabs-container"},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":c},g)},b.map((function(e){var t=e.value,n=e.label,i=e.attributes;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:x===t?0:-1,"aria-selected":x===t,key:t,ref:function(e){return E.push(e)},onKeyDown:P,onFocus:I,onClick:I},i,{className:(0,s.Z)("tabs__item",p,null==i?void 0:i.className,{"tabs__item--active":x===t})}),null!=n?n:t)}))),o?(0,r.cloneElement)(v.filter((function(e){return e.props.value===x}))[0],{className:"margin-vert--md"}):r.createElement("div",{className:"margin-vert--md"},v.map((function(e,t){return(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==x})}))))}function d(e){var t=(0,i.Z)();return r.createElement(c,(0,a.Z)({key:String(t)},e))}}}]);